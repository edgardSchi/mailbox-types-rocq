<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">MailboxTypes.Substitution</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab19"></a><h1 class="section">Substitution</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MailboxTypes</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="MailboxTypes.Environment.html#"><span class="id" title="library">Environment</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MailboxTypes</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="MailboxTypes.Syntax.html#"><span class="id" title="library">Syntax</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MailboxTypes</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MailboxTypes.Util.html#"><span class="id" title="library">Util</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MailboxTypes</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MailboxTypes.TypingRules.html#"><span class="id" title="library">TypingRules</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MailboxTypes</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#"><span class="id" title="library">Dblib.DeBruijn</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MailboxTypes</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MailboxTypes.Dblib.DblibTactics.html#"><span class="id" title="library">Dblib.DblibTactics</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MailboxTypes</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#"><span class="id" title="library">Dblib.Environments</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Lia</span>.<br/>

<br/>
<span class="id" title="keyword">Generalizable All Variables</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab20"></a><h2 class="section">Definitions for substitution</h2>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="subs_def" class="idref" href="#subs_def"><span class="id" title="section">subs_def</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="subs_def.M" class="idref" href="#subs_def.M"><span class="id" title="variable">M</span></a> : <a class="idref" href="MailboxTypes.Message.html#IMessage"><span class="id" title="class">IMessage</span></a> <span class="id" title="var">Message</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="subs_def.D" class="idref" href="#subs_def.D"><span class="id" title="variable">D</span></a> : <a class="idref" href="MailboxTypes.Syntax.html#IDefinitionName"><span class="id" title="class">IDefinitionName</span></a> <span class="id" title="var">DefinitionName</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="Var_Value" class="idref" href="#Var_Value"><span class="id" title="instance">Var_Value</span></a> : <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#Var"><span class="id" title="class">Var</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#var"><span class="id" title="method">var</span></a> := <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="traverse_Value" class="idref" href="#traverse_Value"><span class="id" title="definition">traverse_Value</span></a> (<a id="f:5" class="idref" href="#f:5"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a>) <a id="l:6" class="idref" href="#l:6"><span class="id" title="binder">l</span></a> <a id="v:7" class="idref" href="#v:7"><span class="id" title="binder">v</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MailboxTypes.Substitution.html#v:7"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> <span class="id" title="var">x</span> =&gt; <a class="idref" href="MailboxTypes.Substitution.html#f:5"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:6"><span class="id" title="variable">l</span></a> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">v'</span> =&gt; <span class="id" title="var">v'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="traverse_Term" class="idref" href="#traverse_Term"><span class="id" title="definition">traverse_Term</span></a> (<a id="f:9" class="idref" href="#f:9"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a>) <a id="l:10" class="idref" href="#l:10"><span class="id" title="binder">l</span></a> <a id="t:11" class="idref" href="#t:11"><span class="id" title="binder">t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MailboxTypes.Substitution.html#t:11"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <span class="id" title="var">v</span> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Value"><span class="id" title="definition">traverse_Value</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:9"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:10"><span class="id" title="variable">l</span></a> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MailboxTypes.Syntax.html#TLet"><span class="id" title="constructor">TLet</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>  =&gt; <a class="idref" href="MailboxTypes.Syntax.html#TLet"><span class="id" title="constructor">TLet</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Term:15"><span class="id" title="definition">traverse_Term</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:9"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:10"><span class="id" title="variable">l</span></a> <span class="id" title="var">t1</span>) (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Term:15"><span class="id" title="definition">traverse_Term</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:9"><span class="id" title="variable">f</span></a> (1 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:10"><span class="id" title="variable">l</span></a>) <span class="id" title="var">t2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MailboxTypes.Syntax.html#TApp"><span class="id" title="constructor">TApp</span></a> <span class="id" title="var">def</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#TApp"><span class="id" title="constructor">TApp</span></a> <span class="id" title="var">def</span> (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Value"><span class="id" title="definition">traverse_Value</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:9"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:10"><span class="id" title="variable">l</span></a> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MailboxTypes.Syntax.html#TSpawn"><span class="id" title="constructor">TSpawn</span></a> <span class="id" title="var">t1</span> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#TSpawn"><span class="id" title="constructor">TSpawn</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Term:15"><span class="id" title="definition">traverse_Term</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:9"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:10"><span class="id" title="variable">l</span></a> <span class="id" title="var">t1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MailboxTypes.Syntax.html#TNew"><span class="id" title="constructor">TNew</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#TNew"><span class="id" title="constructor">TNew</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MailboxTypes.Syntax.html#TSend"><span class="id" title="constructor">TSend</span></a> <span class="id" title="var">v1</span> <span class="id" title="var">m</span> <span class="id" title="var">v2</span> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#TSend"><span class="id" title="constructor">TSend</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Value"><span class="id" title="definition">traverse_Value</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:9"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:10"><span class="id" title="variable">l</span></a> <span class="id" title="var">v1</span>) <span class="id" title="var">m</span> (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Value"><span class="id" title="definition">traverse_Value</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:9"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:10"><span class="id" title="variable">l</span></a> <span class="id" title="var">v2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MailboxTypes.Syntax.html#TGuard"><span class="id" title="constructor">TGuard</span></a> <span class="id" title="var">v</span> <span class="id" title="var">e</span> <span class="id" title="var">guards</span> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#TGuard"><span class="id" title="constructor">TGuard</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Value"><span class="id" title="definition">traverse_Value</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:9"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:10"><span class="id" title="variable">l</span></a> <span class="id" title="var">v</span>) <span class="id" title="var">e</span> (<span class="id" title="abbreviation">List.map</span> (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Guard:16"><span class="id" title="definition">traverse_Guard</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:9"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:10"><span class="id" title="variable">l</span></a>) <span class="id" title="var">guards</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <a id="traverse_Guard" class="idref" href="#traverse_Guard"><span class="id" title="definition">traverse_Guard</span></a> (<a id="f:12" class="idref" href="#f:12"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a>) <a id="l:13" class="idref" href="#l:13"><span class="id" title="binder">l</span></a> <a id="g:14" class="idref" href="#g:14"><span class="id" title="binder">g</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MailboxTypes.Substitution.html#g:14"><span class="id" title="variable">g</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MailboxTypes.Syntax.html#GFail"><span class="id" title="constructor">GFail</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#GFail"><span class="id" title="constructor">GFail</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MailboxTypes.Syntax.html#GFree"><span class="id" title="constructor">GFree</span></a> <span class="id" title="var">t1</span> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#GFree"><span class="id" title="constructor">GFree</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Term:15"><span class="id" title="definition">traverse_Term</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:12"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:13"><span class="id" title="variable">l</span></a> <span class="id" title="var">t1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Assumption:&nbsp;we&nbsp;only&nbsp;receive&nbsp;one&nbsp;value&nbsp;in&nbsp;the&nbsp;message&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MailboxTypes.Syntax.html#GReceive"><span class="id" title="constructor">GReceive</span></a> <span class="id" title="var">m</span> <span class="id" title="var">t1</span> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#GReceive"><span class="id" title="constructor">GReceive</span></a> <span class="id" title="var">m</span> (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Term:15"><span class="id" title="definition">traverse_Term</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:12"><span class="id" title="variable">f</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#l:13"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>2) <span class="id" title="var">t1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="Traverse_Value_Value" class="idref" href="#Traverse_Value_Value"><span class="id" title="instance">Traverse_Value_Value</span></a> : <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#Traverse"><span class="id" title="class">Traverse</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> := <a class="idref" href="MailboxTypes.Substitution.html#traverse_Value"><span class="id" title="definition">traverse_Value</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="Traverse_Value_Term" class="idref" href="#Traverse_Value_Term"><span class="id" title="instance">Traverse_Value_Term</span></a> : <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#Traverse"><span class="id" title="class">Traverse</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Term"><span class="id" title="inductive">Term</span></a> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> := <a class="idref" href="MailboxTypes.Substitution.html#traverse_Term"><span class="id" title="definition">traverse_Term</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="Traverse_Value_Guard" class="idref" href="#Traverse_Value_Guard"><span class="id" title="instance">Traverse_Value_Guard</span></a> : <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#Traverse"><span class="id" title="class">Traverse</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Guard"><span class="id" title="inductive">Guard</span></a> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> := <a class="idref" href="MailboxTypes.Substitution.html#traverse_Guard"><span class="id" title="definition">traverse_Guard</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="TraverseVarInjective_Value" class="idref" href="#TraverseVarInjective_Value"><span class="id" title="instance">TraverseVarInjective_Value</span></a> : @<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#TraverseVarInjective"><span class="id" title="class">TraverseVarInjective</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <span class="id" title="var">_</span> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">prove_traverse_var_injective</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="traverse_Guards_injective" class="idref" href="#traverse_Guards_injective"><span class="id" title="lemma">traverse_Guards_injective</span></a> : <span class="id" title="keyword">forall</span> (<a id="l1:19" class="idref" href="#l1:19"><span class="id" title="binder">l1</span></a> <a id="l2:20" class="idref" href="#l2:20"><span class="id" title="binder">l2</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Guard"><span class="id" title="inductive">Guard</span></a>) <a id="f:21" class="idref" href="#f:21"><span class="id" title="binder">f</span></a> <a id="n:22" class="idref" href="#n:22"><span class="id" title="binder">n</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">List.map</span> (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Guard"><span class="id" title="definition">traverse_Guard</span></a> (<span class="id" title="keyword">fun</span> <a id="l:23" class="idref" href="#l:23"><span class="id" title="binder">l</span></a> <a id="x:24" class="idref" href="#x:24"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#f:21"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:23"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:24"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MailboxTypes.Substitution.html#n:22"><span class="id" title="variable">n</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#l1:19"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">List.map</span> (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Guard"><span class="id" title="definition">traverse_Guard</span></a> (<span class="id" title="keyword">fun</span> <a id="l:25" class="idref" href="#l:25"><span class="id" title="binder">l</span></a> <a id="x:26" class="idref" href="#x:26"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#f:21"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:25"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:26"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MailboxTypes.Substitution.html#n:22"><span class="id" title="variable">n</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#l2:20"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="x1:27" class="idref" href="#x1:27"><span class="id" title="binder">x1</span></a> <a id="x2:28" class="idref" href="#x2:28"><span class="id" title="binder">x2</span></a> <a id="l:29" class="idref" href="#l:29"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="MailboxTypes.Substitution.html#f:21"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:29"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x1:27"><span class="id" title="variable">x1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:21"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:29"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x2:28"><span class="id" title="variable">x2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x1:27"><span class="id" title="variable">x1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x2:28"><span class="id" title="variable">x2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="f:30" class="idref" href="#f:30"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="x1:31" class="idref" href="#x1:31"><span class="id" title="binder">x1</span></a> <a id="x2:32" class="idref" href="#x2:32"><span class="id" title="binder">x2</span></a> <a id="l:33" class="idref" href="#l:33"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="MailboxTypes.Substitution.html#f:30"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:33"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x1:31"><span class="id" title="variable">x1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:30"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:33"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x2:32"><span class="id" title="variable">x2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x1:31"><span class="id" title="variable">x1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x2:32"><span class="id" title="variable">x2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="t1:34" class="idref" href="#t1:34"><span class="id" title="binder">t1</span></a> <a id="t2:35" class="idref" href="#t2:35"><span class="id" title="binder">t2</span></a> : <a class="idref" href="MailboxTypes.Syntax.html#Guard"><span class="id" title="inductive">Guard</span></a>) (<a id="l:36" class="idref" href="#l:36"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_var"><span class="id" title="abbreviation">traverse_var</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:30"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:36"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t1:34"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_var"><span class="id" title="abbreviation">traverse_var</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:30"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:36"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t2:35"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t1:34"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t2:35"><span class="id" title="variable">t2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#l1:19"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l2:20"><span class="id" title="variable">l2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>, <span class="id" title="var">l2</span>; <span class="id" title="tactic">intros</span> * <span class="id" title="var">MapInj</span> ? <span class="id" title="var">TravInj</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">reflexivity</span> || <span class="id" title="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">MapInj</span>; <span class="id" title="tactic">intros</span> ? <span class="id" title="var">Inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">TravInj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Inj</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHl1</span>); <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="traverse_Value_injective" class="idref" href="#traverse_Value_injective"><span class="id" title="lemma">traverse_Value_injective</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="f:37" class="idref" href="#f:37"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="x1:38" class="idref" href="#x1:38"><span class="id" title="binder">x1</span></a> <a id="x2:39" class="idref" href="#x2:39"><span class="id" title="binder">x2</span></a> <a id="l:40" class="idref" href="#l:40"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="MailboxTypes.Substitution.html#f:37"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:40"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x1:38"><span class="id" title="variable">x1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:37"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:40"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x2:39"><span class="id" title="variable">x2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x1:38"><span class="id" title="variable">x1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x2:39"><span class="id" title="variable">x2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="v1:41" class="idref" href="#v1:41"><span class="id" title="binder">v1</span></a> <a id="v2:42" class="idref" href="#v2:42"><span class="id" title="binder">v2</span></a> : <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a>) (<a id="l:43" class="idref" href="#l:43"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_var"><span class="id" title="abbreviation">traverse_var</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:37"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:43"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v1:41"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_var"><span class="id" title="abbreviation">traverse_var</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:37"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:43"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v2:42"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v1:41"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v2:42"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">v1</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">v1</span>, <span class="id" title="var">v2</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">InjV</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">InjV</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="traverse_Term_injective" class="idref" href="#traverse_Term_injective"><span class="id" title="lemma">traverse_Term_injective</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="f:44" class="idref" href="#f:44"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="inj:48" class="idref" href="#inj:48"><span class="id" title="binder">inj</span></a> : (<span class="id" title="keyword">forall</span> <a id="x1:45" class="idref" href="#x1:45"><span class="id" title="binder">x1</span></a> <a id="x2:46" class="idref" href="#x2:46"><span class="id" title="binder">x2</span></a> <a id="l:47" class="idref" href="#l:47"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="MailboxTypes.Substitution.html#f:44"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:47"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x1:45"><span class="id" title="variable">x1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:44"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:47"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x2:46"><span class="id" title="variable">x2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x1:45"><span class="id" title="variable">x1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x2:46"><span class="id" title="variable">x2</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t1:49" class="idref" href="#t1:49"><span class="id" title="binder">t1</span></a> <a id="t2:50" class="idref" href="#t2:50"><span class="id" title="binder">t2</span></a> : <a class="idref" href="MailboxTypes.Syntax.html#Term"><span class="id" title="inductive">Term</span></a>) (<a id="l:51" class="idref" href="#l:51"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_var"><span class="id" title="abbreviation">traverse_var</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:44"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:51"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t1:49"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_var"><span class="id" title="abbreviation">traverse_var</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:44"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:51"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t2:50"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t1:49"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t2:50"><span class="id" title="variable">t2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t1</span> <span class="id" title="keyword">using</span> @<a class="idref" href="MailboxTypes.Syntax.html#Term_ind3"><span class="id" title="definition">Term_ind3</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">PG</span> := <span class="id" title="keyword">fun</span> <a id="g1:52" class="idref" href="#g1:52"><span class="id" title="binder"><span id="g1:55" class="id">g1</span></span></a> =&gt; <span class="id" title="keyword">forall</span> (<a id="g2:53" class="idref" href="#g2:53"><span class="id" title="binder"><span id="g2:56" class="id">g2</span></span></a> : <a class="idref" href="MailboxTypes.Syntax.html#Guard"><span class="id" title="inductive">Guard</span></a>) (<a id="l:54" class="idref" href="#l:54"><span class="id" title="binder"><span id="l:57" class="id">l</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_var"><span class="id" title="abbreviation">traverse_var</span></a> <span class="id" title="var">f</span> <a class="idref" href="MailboxTypes.Substitution.html#l:54"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g1:52"><span class="id" title="variable">g1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_var"><span class="id" title="abbreviation">traverse_var</span></a> <span class="id" title="var">f</span> <a class="idref" href="MailboxTypes.Substitution.html#l:54"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g2:53"><span class="id" title="variable">g2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g1:52"><span class="id" title="variable">g1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g2:53"><span class="id" title="variable">g2</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">t2</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">t2</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">Inj</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Inj</span>; <span class="id" title="tactic">f_equal</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Substitution.html#traverse_Value_injective"><span class="id" title="lemma">traverse_Value_injective</span></a>; <span class="id" title="var">eassumption</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> ((<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHt1</span> || <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHt1_1</span> || <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHt1_2</span>); <span class="id" title="var">eassumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">gs</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Eql</span> <span class="id" title="var">mTrav</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">mTrav</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.map_eq_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">mTrav</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">mTrav</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.map_eq_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">mTrav</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">mTrav</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">g'</span> [<span class="id" title="var">l'</span> [<span class="id" title="var">Eq</span> [<span class="id" title="var">Eq2</span> <span class="id" title="var">Eq3</span>]]]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">g2</span> := <span class="id" title="var">g'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHgs</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="TraverseVarInjective_Term" class="idref" href="#TraverseVarInjective_Term"><span class="id" title="instance">TraverseVarInjective_Term</span></a> : @<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#TraverseVarInjective"><span class="id" title="class">TraverseVarInjective</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <span class="id" title="var">_</span> <a class="idref" href="MailboxTypes.Syntax.html#Term"><span class="id" title="inductive">Term</span></a> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#traverse_Term_injective"><span class="id" title="lemma">traverse_Term_injective</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="traverse_Value_functorial" class="idref" href="#traverse_Value_functorial"><span class="id" title="lemma">traverse_Value_functorial</span></a> : <span class="id" title="keyword">forall</span> <a id="f:58" class="idref" href="#f:58"><span class="id" title="binder">f</span></a> <a id="g:59" class="idref" href="#g:59"><span class="id" title="binder">g</span></a> (<a id="v:60" class="idref" href="#v:60"><span class="id" title="binder">v</span></a> : <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a>) <a id="l:61" class="idref" href="#l:61"><span class="id" title="binder">l</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g:59"><span class="id" title="variable">g</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:61"><span class="id" title="variable">l</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:58"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:61"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:60"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> (<span class="id" title="keyword">fun</span> <a id="l:62" class="idref" href="#l:62"><span class="id" title="binder">l</span></a> <a id="x:63" class="idref" href="#x:63"><span class="id" title="binder">x</span></a> =&gt; <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g:59"><span class="id" title="variable">g</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:62"><span class="id" title="variable">l</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#f:58"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:62"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:63"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MailboxTypes.Substitution.html#l:61"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:60"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">prove_traverse_functorial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="traverse_Term_functorial" class="idref" href="#traverse_Term_functorial"><span class="id" title="lemma">traverse_Term_functorial</span></a> : <span class="id" title="keyword">forall</span> <a id="f:64" class="idref" href="#f:64"><span class="id" title="binder">f</span></a> <a id="g:65" class="idref" href="#g:65"><span class="id" title="binder">g</span></a> (<a id="t:66" class="idref" href="#t:66"><span class="id" title="binder">t</span></a> : <a class="idref" href="MailboxTypes.Syntax.html#Term"><span class="id" title="inductive">Term</span></a>) <a id="l:67" class="idref" href="#l:67"><span class="id" title="binder">l</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g:65"><span class="id" title="variable">g</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:67"><span class="id" title="variable">l</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:64"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:67"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t:66"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> (<span class="id" title="keyword">fun</span> <a id="l:68" class="idref" href="#l:68"><span class="id" title="binder">l</span></a> <a id="x:69" class="idref" href="#x:69"><span class="id" title="binder">x</span></a> =&gt; <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g:65"><span class="id" title="variable">g</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:68"><span class="id" title="variable">l</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#f:64"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:68"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:69"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MailboxTypes.Substitution.html#l:67"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t:66"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="keyword">using</span> @<a class="idref" href="MailboxTypes.Syntax.html#Term_ind3"><span class="id" title="definition">Term_ind3</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">PG</span> := <span class="id" title="keyword">fun</span> <a id="g1:70" class="idref" href="#g1:70"><span class="id" title="binder"><span id="g1:74" class="id">g1</span></span></a> =&gt; <span class="id" title="keyword">forall</span> (<a id="l:71" class="idref" href="#l:71"><span class="id" title="binder"><span id="l:75" class="id">l</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <span class="id" title="var">g</span> <a class="idref" href="MailboxTypes.Substitution.html#l:71"><span class="id" title="variable">l</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <span class="id" title="var">f</span> <a class="idref" href="MailboxTypes.Substitution.html#l:71"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g1:70"><span class="id" title="variable">g1</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> (<span class="id" title="keyword">fun</span> <a id="l:72" class="idref" href="#l:72"><span class="id" title="binder"><span id="l:76" class="id">l</span></span></a> <a id="x:73" class="idref" href="#x:73"><span class="id" title="binder"><span id="x:77" class="id">x</span></span></a> =&gt; <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <span class="id" title="var">g</span> <a class="idref" href="MailboxTypes.Substitution.html#l:72"><span class="id" title="variable">l</span></a> (<span class="id" title="var">f</span> <a class="idref" href="MailboxTypes.Substitution.html#l:72"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:73"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MailboxTypes.Substitution.html#l:71"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g1:70"><span class="id" title="variable">g1</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#traverse_Value_functorial"><span class="id" title="lemma">traverse_Value_functorial</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">IHt</span> || <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt1</span> || <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">gs</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [| ? ? <span class="id" title="var">Eq</span>]. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHgs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="TraverseFunctorial_Value" class="idref" href="#TraverseFunctorial_Value"><span class="id" title="instance">TraverseFunctorial_Value</span></a> : @<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#TraverseFunctorial"><span class="id" title="class">TraverseFunctorial</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <span class="id" title="var">_</span> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#traverse_Value_functorial"><span class="id" title="lemma">traverse_Value_functorial</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="TraverseFunctorial_Term" class="idref" href="#TraverseFunctorial_Term"><span class="id" title="instance">TraverseFunctorial_Term</span></a> : @<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#TraverseFunctorial"><span class="id" title="class">TraverseFunctorial</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <span class="id" title="var">_</span> <a class="idref" href="MailboxTypes.Syntax.html#Term"><span class="id" title="inductive">Term</span></a> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#traverse_Term_functorial"><span class="id" title="lemma">traverse_Term_functorial</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="TraverseIdentifiesVar_Value" class="idref" href="#TraverseIdentifiesVar_Value"><span class="id" title="instance">TraverseIdentifiesVar_Value</span></a> : <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#TraverseIdentifiesVar"><span class="id" title="class">TraverseIdentifiesVar</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="var">prove_traverse_identifies_var</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="traverse_Value_relative" class="idref" href="#traverse_Value_relative"><span class="id" title="lemma">traverse_Value_relative</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="f:78" class="idref" href="#f:78"><span class="id" title="binder">f</span></a> <a id="g:79" class="idref" href="#g:79"><span class="id" title="binder">g</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a>) (<a id="p:80" class="idref" href="#p:80"><span class="id" title="binder">p</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="v:81" class="idref" href="#v:81"><span class="id" title="binder">v</span></a> : <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a>) (<a id="m:82" class="idref" href="#m:82"><span class="id" title="binder">m</span></a> <a id="l:83" class="idref" href="#l:83"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="l':84" class="idref" href="#l':84"><span class="id" title="binder">l'</span></a> <a id="x:85" class="idref" href="#x:85"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="MailboxTypes.Substitution.html#f:78"><span class="id" title="variable">f</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#l':84"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:80"><span class="id" title="variable">p</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#x:85"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g:79"><span class="id" title="variable">g</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l':84"><span class="id" title="variable">l'</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:85"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#m:82"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:83"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:80"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:78"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#m:82"><span class="id" title="variable">m</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:81"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g:79"><span class="id" title="variable">g</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:83"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:81"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Eq</span> <span class="id" title="var">natEq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">natEq</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="traverse_Term_relative" class="idref" href="#traverse_Term_relative"><span class="id" title="lemma">traverse_Term_relative</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="f:86" class="idref" href="#f:86"><span class="id" title="binder">f</span></a> <a id="g:87" class="idref" href="#g:87"><span class="id" title="binder">g</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a>) (<a id="p:88" class="idref" href="#p:88"><span class="id" title="binder">p</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="t:89" class="idref" href="#t:89"><span class="id" title="binder">t</span></a> : <a class="idref" href="MailboxTypes.Syntax.html#Term"><span class="id" title="inductive">Term</span></a>) (<a id="m:90" class="idref" href="#m:90"><span class="id" title="binder">m</span></a> <a id="l:91" class="idref" href="#l:91"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="l':92" class="idref" href="#l':92"><span class="id" title="binder">l'</span></a> <a id="x:93" class="idref" href="#x:93"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="MailboxTypes.Substitution.html#f:86"><span class="id" title="variable">f</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#l':92"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:88"><span class="id" title="variable">p</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#x:93"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g:87"><span class="id" title="variable">g</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l':92"><span class="id" title="variable">l'</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:93"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#m:90"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:91"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:88"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:86"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#m:90"><span class="id" title="variable">m</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t:89"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g:87"><span class="id" title="variable">g</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:91"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t:89"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="keyword">using</span> @<a class="idref" href="MailboxTypes.Syntax.html#Term_ind3"><span class="id" title="definition">Term_ind3</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">PG</span> := <span class="id" title="keyword">fun</span> <a id="g1:94" class="idref" href="#g1:94"><span class="id" title="binder"><span id="g1:99" class="id">g1</span></span></a> =&gt; <span class="id" title="keyword">forall</span> (<a id="m:95" class="idref" href="#m:95"><span class="id" title="binder"><span id="m:100" class="id">m</span></span></a> <a id="l:96" class="idref" href="#l:96"><span class="id" title="binder"><span id="l:101" class="id">l</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="l':97" class="idref" href="#l':97"><span class="id" title="binder"><span id="l':102" class="id">l'</span></span></a> <a id="x:98" class="idref" href="#x:98"><span class="id" title="binder"><span id="x:103" class="id">x</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <span class="id" title="var">f</span> (<a class="idref" href="MailboxTypes.Substitution.html#l':97"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">p</span>) <a class="idref" href="MailboxTypes.Substitution.html#x:98"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">g</span> <a class="idref" href="MailboxTypes.Substitution.html#l':97"><span class="id" title="variable">l'</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:98"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#m:95"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:96"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <span class="id" title="var">f</span> <a class="idref" href="MailboxTypes.Substitution.html#m:95"><span class="id" title="variable">m</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g1:94"><span class="id" title="variable">g1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <span class="id" title="var">g</span> <a class="idref" href="MailboxTypes.Substitution.html#l:96"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g1:94"><span class="id" title="variable">g1</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Eq</span> <span class="id" title="var">natEq</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">f_equal</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Substitution.html#traverse_Value_relative"><span class="id" title="lemma">traverse_Value_relative</span></a>; <span class="id" title="var">eassumption</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">IHt1</span> || <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt2</span> || <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt</span>); <span class="id" title="tactic">try</span> (<span class="id" title="tactic">assumption</span> || <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">gs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [| ? ? <span class="id" title="var">EqInd</span>]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="var">EqInd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHgs</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="TraverseRelative_Value" class="idref" href="#TraverseRelative_Value"><span class="id" title="instance">TraverseRelative_Value</span></a> : @<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#TraverseRelative"><span class="id" title="class">TraverseRelative</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#traverse_Value_relative"><span class="id" title="lemma">traverse_Value_relative</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="TraverseRelative_Term" class="idref" href="#TraverseRelative_Term"><span class="id" title="instance">TraverseRelative_Term</span></a> : @<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#TraverseRelative"><span class="id" title="class">TraverseRelative</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Term"><span class="id" title="inductive">Term</span></a> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#traverse_Term_relative"><span class="id" title="lemma">traverse_Term_relative</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="traverse_Value_identity" class="idref" href="#traverse_Value_identity"><span class="id" title="lemma">traverse_Value_identity</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="f:104" class="idref" href="#f:104"><span class="id" title="binder">f</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="l:105" class="idref" href="#l:105"><span class="id" title="binder">l</span></a> <a id="x:106" class="idref" href="#x:106"><span class="id" title="binder">x</span></a>, <a class="idref" href="MailboxTypes.Substitution.html#f:104"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:105"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:106"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#var"><span class="id" title="method">var</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:106"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="v:107" class="idref" href="#v:107"><span class="id" title="binder">v</span></a> : <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a>) <a id="l:108" class="idref" href="#l:108"><span class="id" title="binder">l</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:104"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:108"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:107"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:107"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="traverse_Term_identity" class="idref" href="#traverse_Term_identity"><span class="id" title="lemma">traverse_Term_identity</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="f:109" class="idref" href="#f:109"><span class="id" title="binder">f</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="l:110" class="idref" href="#l:110"><span class="id" title="binder">l</span></a> <a id="x:111" class="idref" href="#x:111"><span class="id" title="binder">x</span></a>, <a class="idref" href="MailboxTypes.Substitution.html#f:109"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:110"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:111"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#var"><span class="id" title="method">var</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:111"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="t:112" class="idref" href="#t:112"><span class="id" title="binder">t</span></a> : <a class="idref" href="MailboxTypes.Syntax.html#Term"><span class="id" title="inductive">Term</span></a>) <a id="l:113" class="idref" href="#l:113"><span class="id" title="binder">l</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:109"><span class="id" title="variable">f</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:113"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t:112"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t:112"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="keyword">as</span> [| | | | | | ? ? ? <span class="id" title="var">Fs</span> | | | ] <span class="id" title="keyword">using</span> @<a class="idref" href="MailboxTypes.Syntax.html#Term_ind3"><span class="id" title="definition">Term_ind3</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">PG</span> := <span class="id" title="keyword">fun</span> <a id="g1:114" class="idref" href="#g1:114"><span class="id" title="binder"><span id="g1:116" class="id">g1</span></span></a> =&gt; <span class="id" title="keyword">forall</span> (<a id="l:115" class="idref" href="#l:115"><span class="id" title="binder"><span id="l:117" class="id">l</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse"><span class="id" title="method">traverse</span></a> <span class="id" title="var">f</span> <a class="idref" href="MailboxTypes.Substitution.html#l:115"><span class="id" title="variable">l</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g1:114"><span class="id" title="variable">g1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g1:114"><span class="id" title="variable">g1</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">f_equal</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Substitution.html#traverse_Value_identity"><span class="id" title="lemma">traverse_Value_identity</span></a>; <span class="id" title="var">eassumption</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">IHt1</span> || <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt2</span> || <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt</span>); <span class="id" title="tactic">try</span> (<span class="id" title="tactic">assumption</span> || <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">gs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Fs</span> <span class="id" title="keyword">as</span> [| ? ? <span class="id" title="var">EqInd</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EqInd</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHgs</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="TraverseVarIsIdentity_Value" class="idref" href="#TraverseVarIsIdentity_Value"><span class="id" title="instance">TraverseVarIsIdentity_Value</span></a> : @<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#TraverseVarIsIdentity"><span class="id" title="class">TraverseVarIsIdentity</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <span class="id" title="var">_</span> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#traverse_Value_identity"><span class="id" title="lemma">traverse_Value_identity</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="TraverseVarIsIdentity_Term" class="idref" href="#TraverseVarIsIdentity_Term"><span class="id" title="instance">TraverseVarIsIdentity_Term</span></a> : @<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#TraverseVarIsIdentity"><span class="id" title="class">TraverseVarIsIdentity</span></a> <a class="idref" href="MailboxTypes.Syntax.html#Value"><span class="id" title="inductive">Value</span></a> <span class="id" title="var">_</span> <a class="idref" href="MailboxTypes.Syntax.html#Term"><span class="id" title="inductive">Term</span></a> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#traverse_Term_identity"><span class="id" title="lemma">traverse_Term_identity</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MailboxTypes.Substitution.html#subs_def"><span class="id" title="section">subs_def</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab21"></a><h2 class="section">Properties about substitution</h2>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="subs_properties" class="idref" href="#subs_properties"><span class="id" title="section">subs_properties</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="subs_properties.M" class="idref" href="#subs_properties.M"><span class="id" title="variable">M</span></a> : <a class="idref" href="MailboxTypes.Message.html#IMessage"><span class="id" title="class">IMessage</span></a> <span class="id" title="var">Message</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="subs_properties.D" class="idref" href="#subs_properties.D"><span class="id" title="variable">D</span></a> : <a class="idref" href="MailboxTypes.Syntax.html#IDefinitionName"><span class="id" title="class">IDefinitionName</span></a> <span class="id" title="var">DefinitionName</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="WellTypedTerm_TValue_Un" class="idref" href="#WellTypedTerm_TValue_Un"><span class="id" title="lemma">WellTypedTerm_TValue_Un</span></a> : <span class="id" title="keyword">forall</span> <a id="p:122" class="idref" href="#p:122"><span class="id" title="binder">p</span></a> <a id="env:123" class="idref" href="#env:123"><span class="id" title="binder">env</span></a> <a id="v:124" class="idref" href="#v:124"><span class="id" title="binder">v</span></a> <a id="T:125" class="idref" href="#T:125"><span class="id" title="binder">T</span></a> <a id="T':126" class="idref" href="#T':126"><span class="id" title="binder">T'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:122"><span class="id" title="variable">p</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:123"><span class="id" title="variable">env</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:124"><span class="id" title="variable">v</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#T:125"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#T:125"><span class="id" title="variable">T</span></a> <a class="idref" href="MailboxTypes.Types.html#131af33f01ef889df697fc663d016c9f"><span class="id" title="notation">≤</span></a> <a class="idref" href="MailboxTypes.Substitution.html#T':126"><span class="id" title="variable">T'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Types.html#Unrestricted"><span class="id" title="inductive">Unrestricted</span></a> <a class="idref" href="MailboxTypes.Substitution.html#T':126"><span class="id" title="variable">T'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="env':127" class="idref" href="#env':127"><span class="id" title="binder">env'</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env':127"><span class="id" title="variable">env'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:123"><span class="id" title="variable">env</span></a> <a class="idref" href="MailboxTypes.Environment.html#02646f3c0eda21d78eccefe79f1b4b6b"><span class="id" title="notation">≤ₑ</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env':127"><span class="id" title="variable">env'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">WT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <span class="id" title="var">v</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">T'</span> <span class="id" title="var">v</span> <span class="id" title="var">HeqV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">WT</span>; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Eq</span> <span class="id" title="var">Sub</span> <span class="id" title="var">Un</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">exists</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#env"><span class="id" title="definition">env</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_refl"><span class="id" title="lemma">EnvironmentSubtype_refl</span></a>; <span class="id" title="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Eq</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env</span>); <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvSubtypeTrans"><span class="id" title="constructor">EnvSubtypeTrans</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env2</span> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">T'</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_successor"><span class="id" title="lemma">raw_insert_successor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_EmptyEnv_None"><span class="id" title="lemma">lookup_EmptyEnv_None</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">IHx</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">env'</span> [<span class="id" title="var">Empty'</span> <span class="id" title="var">Sub'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">EmptyTl</span> : <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> (<span class="id" title="definition">tl</span> <span class="id" title="var">env</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_EmptyEnv_insert_Un"><span class="id" title="lemma">EnvironmentSubtype_EmptyEnv_insert_Un</span></a> (<span class="id" title="definition">tl</span> <span class="id" title="var">env</span>) <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">Sub</span> <span class="id" title="var">Un</span> <span class="id" title="var">EmptyTl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">SubE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">x</span> <span class="id" title="var">T</span> (<span class="id" title="definition">tl</span> <span class="id" title="var">env</span>))); <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv_EmptyEnv"><span class="id" title="lemma">create_EmptyEnv_EmptyEnv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">generalize</span> (<span class="id" title="var">IHWT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> (<a class="idref" href="MailboxTypes.Types.html#Subtype_trans"><span class="id" title="lemma">Subtype_trans</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> <span class="id" title="var">Sub</span>) <span class="id" title="var">Un</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">env'</span> [<span class="id" title="var">Empty'</span> <span class="id" title="var">Sub'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">env'</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MailboxTypes.Environment.html#EnvSubtypeTrans"><span class="id" title="constructor">EnvSubtypeTrans</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="WellTypedTerm_TValue_lookup" class="idref" href="#WellTypedTerm_TValue_lookup"><span class="id" title="lemma">WellTypedTerm_TValue_lookup</span></a> : <span class="id" title="keyword">forall</span> <a id="p:128" class="idref" href="#p:128"><span class="id" title="binder">p</span></a> <a id="x:129" class="idref" href="#x:129"><span class="id" title="binder">x</span></a> <a id="T:130" class="idref" href="#T:130"><span class="id" title="binder">T</span></a> <a id="env:131" class="idref" href="#env:131"><span class="id" title="binder">env</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:128"><span class="id" title="variable">p</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:131"><span class="id" title="variable">env</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:129"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MailboxTypes.Substitution.html#T:130"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="T':132" class="idref" href="#T':132"><span class="id" title="binder">T'</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MailboxTypes.Dblib.Environments.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:129"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:131"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Substitution.html#T':132"><span class="id" title="variable">T'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="MailboxTypes.Substitution.html#T':132"><span class="id" title="variable">T'</span></a> <a class="idref" href="MailboxTypes.Types.html#131af33f01ef889df697fc663d016c9f"><span class="id" title="notation">≤</span></a> <a class="idref" href="MailboxTypes.Substitution.html#T:130"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">WT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.TypingRules.html#weak_ValueVar_2"><span class="id" title="lemma">weak_ValueVar_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">WT</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">WT</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">env'</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">Sub</span> [<span class="id" title="var">Empty</span> [<span class="id" title="var">EnvSub</span> <span class="id" title="var">WT</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_insert_right_inv"><span class="id" title="lemma">EnvironmentSubtype_insert_right_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EnvSub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">EnvSub</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">env1'</span> [<span class="id" title="var">T''</span> [<span class="id" title="var">Sub'</span> -&gt;]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">T''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#lookup_insert_bingo"><span class="id" title="lemma">lookup_insert_bingo</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_trans"><span class="id" title="lemma">Subtype_trans</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="WellTypedTerm_TValue_insert_None_eq" class="idref" href="#WellTypedTerm_TValue_insert_None_eq"><span class="id" title="lemma">WellTypedTerm_TValue_insert_None_eq</span></a> : <span class="id" title="keyword">forall</span> <a id="p:133" class="idref" href="#p:133"><span class="id" title="binder">p</span></a> <a id="env:134" class="idref" href="#env:134"><span class="id" title="binder">env</span></a> <a id="x:135" class="idref" href="#x:135"><span class="id" title="binder">x</span></a> <a id="T:136" class="idref" href="#T:136"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:133"><span class="id" title="variable">p</span></a> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:135"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:134"><span class="id" title="variable">env</span></a>) (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:135"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MailboxTypes.Substitution.html#T:136"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">WT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.TypingRules.html#weak_ValueVar_2"><span class="id" title="lemma">weak_ValueVar_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">WT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">WT</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">env'</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">Sub</span> [<span class="id" title="var">Empty</span> [<span class="id" title="var">EnvSub</span> <span class="id" title="var">WT</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_insert_None_Some"><span class="id" title="lemma">EnvironmentSubtype_insert_None_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EnvSub</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="WellTypedTerm_TValue_insert_None_gt" class="idref" href="#WellTypedTerm_TValue_insert_None_gt"><span class="id" title="lemma">WellTypedTerm_TValue_insert_None_gt</span></a> : <span class="id" title="keyword">forall</span> <a id="p:137" class="idref" href="#p:137"><span class="id" title="binder">p</span></a> <a id="env:138" class="idref" href="#env:138"><span class="id" title="binder">env</span></a> <a id="x:139" class="idref" href="#x:139"><span class="id" title="binder">x</span></a> <a id="v:140" class="idref" href="#v:140"><span class="id" title="binder">v</span></a> <a id="T:141" class="idref" href="#T:141"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:137"><span class="id" title="variable">p</span></a> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:139"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:138"><span class="id" title="variable">env</span></a>) (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:140"><span class="id" title="variable">v</span></a>)) <a class="idref" href="MailboxTypes.Substitution.html#T:141"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#x:139"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:140"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:137"><span class="id" title="variable">p</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:138"><span class="id" title="variable">env</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#v:140"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1))) <a class="idref" href="MailboxTypes.Substitution.html#T:141"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">WT</span> <span class="id" title="var">Gt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.TypingRules.html#weak_ValueVar_2"><span class="id" title="lemma">weak_ValueVar_2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">WT</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">env'</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">Sub</span> [<span class="id" title="var">Empty</span> [<span class="id" title="var">EnvSub</span> <span class="id" title="var">WT'</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_raw_insert_insert'"><span class="id" title="lemma">EnvironmentSubtype_raw_insert_insert'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Empty</span> <span class="id" title="var">EnvSub</span> <span class="id" title="var">Gt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">env2'</span> [<span class="id" title="var">Empty'</span> <span class="id" title="var">EnvSub'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SUB"><span class="id" title="constructor">SUB</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">eassumption</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="WellTypedTerm_TValue_raw_insert_None" class="idref" href="#WellTypedTerm_TValue_raw_insert_None"><span class="id" title="lemma">WellTypedTerm_TValue_raw_insert_None</span></a> : <span class="id" title="keyword">forall</span> <a id="p:142" class="idref" href="#p:142"><span class="id" title="binder">p</span></a> <a id="env:143" class="idref" href="#env:143"><span class="id" title="binder">env</span></a> <a id="v:144" class="idref" href="#v:144"><span class="id" title="binder">v</span></a> <a id="x:145" class="idref" href="#x:145"><span class="id" title="binder">x</span></a> <a id="T:146" class="idref" href="#T:146"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:142"><span class="id" title="variable">p</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:143"><span class="id" title="variable">env</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:144"><span class="id" title="variable">v</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#T:146"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:142"><span class="id" title="variable">p</span></a> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:145"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:143"><span class="id" title="variable">env</span></a>) (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#shift"><span class="id" title="abbreviation">shift</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:145"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:144"><span class="id" title="variable">v</span></a>)) <a class="idref" href="MailboxTypes.Substitution.html#T:146"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">WT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <span class="id" title="var">v</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">HeqV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">WT</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HeqV</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_lift_goal</span>; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv_raw_insert_None"><span class="id" title="lemma">EmptyEnv_raw_insert_None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">HeqV</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_lift_goal</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Compare_dec.le_gt_dec</span> <span class="id" title="var">x0</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift_idx_old"><span class="id" title="lemma">lift_idx_old</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert_insert"><span class="id" title="lemma">insert_insert</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.TypingRules.html#VAR"><span class="id" title="constructor">VAR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv_raw_insert_None"><span class="id" title="lemma">EmptyEnv_raw_insert_None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">inversion</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert_insert"><span class="id" title="lemma">insert_insert</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_lift_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.TypingRules.html#VAR"><span class="id" title="constructor">VAR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv_raw_insert_None"><span class="id" title="lemma">EmptyEnv_raw_insert_None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">generalize</span> (<span class="id" title="var">IHWT</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">WT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SUB"><span class="id" title="constructor">SUB</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_insert"><span class="id" title="lemma">EnvironmentSubtype_insert</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="shift_TLet" class="idref" href="#shift_TLet"><span class="id" title="lemma">shift_TLet</span></a> : <span class="id" title="keyword">forall</span> <a id="t1:147" class="idref" href="#t1:147"><span class="id" title="binder">t1</span></a> <a id="t2:148" class="idref" href="#t2:148"><span class="id" title="binder">t2</span></a> <a id="x:149" class="idref" href="#x:149"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#shift"><span class="id" title="abbreviation">shift</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:149"><span class="id" title="variable">x</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TLet"><span class="id" title="constructor">TLet</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t1:147"><span class="id" title="variable">t1</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t2:148"><span class="id" title="variable">t2</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Syntax.html#TLet"><span class="id" title="constructor">TLet</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#shift"><span class="id" title="abbreviation">shift</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:149"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t1:147"><span class="id" title="variable">t1</span></a>) (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#shift"><span class="id" title="abbreviation">shift</span></a> (1 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:149"><span class="id" title="variable">x</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#t2:148"><span class="id" title="variable">t2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_lift_goal</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ((<span class="id" title="keyword">forall</span> <a id="l:150" class="idref" href="#l:150"><span class="id" title="binder"><span id="l:152" class="id">l</span></span></a> <a id="x0:151" class="idref" href="#x0:151"><span class="id" title="binder"><span id="x0:153" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#shift"><span class="id" title="abbreviation">shift</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#l:150"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">x</span>) <a class="idref" href="MailboxTypes.Substitution.html#x0:151"><span class="id" title="variable">x0</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#shift"><span class="id" title="abbreviation">shift</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#l:150"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span>) <a class="idref" href="MailboxTypes.Substitution.html#x0:151"><span class="id" title="variable">x0</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">replace</span> (<span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">x</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_relative"><span class="id" title="method">traverse_relative</span></a> (<span class="id" title="keyword">fun</span> <a id="l:156" class="idref" href="#l:156"><span class="id" title="binder"><span id="l:160" class="id">l</span></span></a> <a id="x0:157" class="idref" href="#x0:157"><span class="id" title="binder"><span id="x0:161" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#shift"><span class="id" title="abbreviation">shift</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#l:156"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">x</span>) <a class="idref" href="MailboxTypes.Substitution.html#x0:157"><span class="id" title="variable">x0</span></a>)) (<span class="id" title="keyword">fun</span> <a id="l:154" class="idref" href="#l:154"><span class="id" title="binder"><span id="l:158" class="id">l</span></span></a> <a id="x0:155" class="idref" href="#x0:155"><span class="id" title="binder"><span id="x0:159" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#shift"><span class="id" title="abbreviation">shift</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#l:154"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span>) <a class="idref" href="MailboxTypes.Substitution.html#x0:155"><span class="id" title="variable">x0</span></a>)) 1 <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">generalize</span> (<span class="id" title="var">H</span> 1 0); <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;Not&nbsp;needed&nbsp;now,&nbsp;but&nbsp;could&nbsp;be&nbsp;useful&nbsp;later&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*Lemma&nbsp;WellTypedTerm_raw_insert_None&nbsp;:&nbsp;forall&nbsp;p&nbsp;env&nbsp;t&nbsp;x&nbsp;T,*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;WellTypedTerm&nbsp;p&nbsp;env&nbsp;t&nbsp;T&nbsp;-&gt;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;WellTypedTerm&nbsp;p&nbsp;(raw_insert&nbsp;x&nbsp;None&nbsp;env)&nbsp;(shift&nbsp;x&nbsp;t)&nbsp;T.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*Proof.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;intros&nbsp;*&nbsp;WT.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;revert&nbsp;x.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;induction&nbsp;WT&nbsp;using&nbsp;@WellTypedTerm_ind3&nbsp;with*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;(P0&nbsp;:=&nbsp;fun&nbsp;env&nbsp;gs&nbsp;T&nbsp;E&nbsp;(WG&nbsp;:&nbsp;WellTypedGuards&nbsp;p&nbsp;env&nbsp;gs&nbsp;T&nbsp;E)&nbsp;=&gt;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forall&nbsp;x,*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WellTypedGuards&nbsp;p&nbsp;(raw_insert&nbsp;x&nbsp;None&nbsp;env)&nbsp;(List.map&nbsp;(shift&nbsp;x)&nbsp;gs)&nbsp;T&nbsp;E*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;)*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;(P1&nbsp;:=&nbsp;fun&nbsp;env&nbsp;g&nbsp;T&nbsp;E&nbsp;(WG&nbsp;:&nbsp;WellTypedGuard&nbsp;p&nbsp;env&nbsp;g&nbsp;T&nbsp;E)&nbsp;=&gt;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forall&nbsp;x,*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WellTypedGuard&nbsp;p&nbsp;(raw_insert&nbsp;x&nbsp;None&nbsp;env)&nbsp;(shift&nbsp;x&nbsp;g)&nbsp;T&nbsp;E*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;);&nbsp;intros.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;-&nbsp;assert&nbsp;(WT'&nbsp;:&nbsp;WellTypedTerm&nbsp;p&nbsp;(insert&nbsp;x&nbsp;T&nbsp;env)&nbsp;(TValue&nbsp;(ValueVar&nbsp;x))&nbsp;T)&nbsp;by&nbsp;now&nbsp;constructor.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;generalize&nbsp;(WellTypedTerm_TValue_raw_insert_None&nbsp;p&nbsp;(insert&nbsp;x&nbsp;T&nbsp;env)&nbsp;(ValueVar&nbsp;x)&nbsp;x0&nbsp;T&nbsp;WT').*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;now&nbsp;simpl_lift_goal.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;-&nbsp;admit.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;-&nbsp;admit.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;-&nbsp;admit.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;-&nbsp;generalize&nbsp;(IHWT&nbsp;x);&nbsp;simpl_lift_goal;&nbsp;simpl;&nbsp;econstructor;&nbsp;try&nbsp;eassumption.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;-&nbsp;rewrite&nbsp;shift_TLet.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;eapply&nbsp;LET&nbsp;with&nbsp;(env2&nbsp;:=&nbsp;raw_insert&nbsp;x&nbsp;None&nbsp;env2);&nbsp;try&nbsp;eassumption.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;admit.&nbsp;<span class="comment">(*&nbsp;Need&nbsp;new&nbsp;lemma&nbsp;*)</span>*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;apply&nbsp;IHWT1.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;rewrite&nbsp;insert_insert&nbsp;by&nbsp;lia.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHWT2.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;-&nbsp;simpl_lift_goal;&nbsp;simpl.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;SPAWN&nbsp;with&nbsp;(env&nbsp;:=&nbsp;raw_insert&nbsp;x&nbsp;None&nbsp;env).*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;generalize&nbsp;(IHWT&nbsp;x);&nbsp;now&nbsp;simpl_lift_goal.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;admit.&nbsp;<span class="comment">(*&nbsp;Need&nbsp;lemma&nbsp;*)</span>*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;-&nbsp;simpl_lift_goal;&nbsp;simpl;&nbsp;constructor;&nbsp;now&nbsp;apply&nbsp;EmptyEnv_raw_insert_None.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;-&nbsp;simpl_lift_goal;&nbsp;simpl;&nbsp;econstructor.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;generalize&nbsp;(IHWT1&nbsp;x);&nbsp;simpl_lift_goal;&nbsp;simpl;&nbsp;intros&nbsp;WT';&nbsp;apply&nbsp;WT'.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;eassumption.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;apply&nbsp;EnvDis_insert_None;&nbsp;eassumption.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;generalize&nbsp;(IHWT2&nbsp;x);&nbsp;simpl_lift_goal;&nbsp;simpl;&nbsp;intros&nbsp;WT';&nbsp;apply&nbsp;WT'.*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;:&nbsp;Continue&nbsp;*)</span>*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*Admitted.*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="subst_insert_TValue_None" class="idref" href="#subst_insert_TValue_None"><span class="id" title="lemma">subst_insert_TValue_None</span></a> : <span class="id" title="keyword">forall</span> <a id="p:162" class="idref" href="#p:162"><span class="id" title="binder">p</span></a> <a id="env:163" class="idref" href="#env:163"><span class="id" title="binder">env</span></a> <a id="v1:164" class="idref" href="#v1:164"><span class="id" title="binder">v1</span></a> <a id="v2:165" class="idref" href="#v2:165"><span class="id" title="binder">v2</span></a> <a id="x:166" class="idref" href="#x:166"><span class="id" title="binder">x</span></a> <a id="T:167" class="idref" href="#T:167"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:162"><span class="id" title="variable">p</span></a> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:166"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:163"><span class="id" title="variable">env</span></a>) (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v1:164"><span class="id" title="variable">v1</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#T:167"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:162"><span class="id" title="variable">p</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:163"><span class="id" title="variable">env</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v2:165"><span class="id" title="variable">v2</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:166"><span class="id" title="variable">x</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v1:164"><span class="id" title="variable">v1</span></a>)) <a class="idref" href="MailboxTypes.Substitution.html#T:167"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">WT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">v1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simpl_lift_goal</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.TypingRules.html#canonical_form_BTBool"><span class="id" title="lemma">canonical_form_BTBool</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">WT</span>); <span class="id" title="tactic">intros</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.TypingRules.html#weak_BTBool_2"><span class="id" title="lemma">weak_BTBool_2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">WT</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">EnvSub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_EmptyEnv_insert_None"><span class="id" title="lemma">EnvironmentSubtype_EmptyEnv_insert_None</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EnvSub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">EnvSub</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">env2'</span> [<span class="id" title="var">Empty'</span> <span class="id" title="var">Sub'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SUB"><span class="id" title="constructor">SUB</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv_EmptyEnv"><span class="id" title="lemma">create_EmptyEnv_EmptyEnv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simpl_lift_goal</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.TypingRules.html#canonical_form_BTUnit"><span class="id" title="lemma">canonical_form_BTUnit</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">WT</span>); <span class="id" title="tactic">intros</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.TypingRules.html#weak_BTUnit_2"><span class="id" title="lemma">weak_BTUnit_2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">WT</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">EnvSub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_EmptyEnv_insert_None"><span class="id" title="lemma">EnvironmentSubtype_EmptyEnv_insert_None</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EnvSub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">EnvSub</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">env2'</span> [<span class="id" title="var">Empty'</span> <span class="id" title="var">Sub'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SUB"><span class="id" title="constructor">SUB</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv_EmptyEnv"><span class="id" title="lemma">create_EmptyEnv_EmptyEnv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simpl_lift_goal</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst_idx"><span class="id" title="definition">subst_idx</span></a>; <span class="id" title="var">dblib_by_cases</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm_TValue_insert_None_le"><span class="id" title="lemma">WellTypedTerm_TValue_insert_None_le</span></a>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#WellTypedTerm_TValue_insert_None_eq"><span class="id" title="lemma">WellTypedTerm_TValue_insert_None_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">WT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#WellTypedTerm_TValue_insert_None_gt"><span class="id" title="lemma">WellTypedTerm_TValue_insert_None_gt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">WT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="subst_TLet" class="idref" href="#subst_TLet"><span class="id" title="lemma">subst_TLet</span></a> : <span class="id" title="keyword">forall</span> <a id="t1:168" class="idref" href="#t1:168"><span class="id" title="binder">t1</span></a> <a id="t2:169" class="idref" href="#t2:169"><span class="id" title="binder">t2</span></a> <a id="v:170" class="idref" href="#v:170"><span class="id" title="binder">v</span></a> <a id="x:171" class="idref" href="#x:171"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:170"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:171"><span class="id" title="variable">x</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TLet"><span class="id" title="constructor">TLet</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t1:168"><span class="id" title="variable">t1</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t2:169"><span class="id" title="variable">t2</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Syntax.html#TLet"><span class="id" title="constructor">TLet</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:170"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:171"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t1:168"><span class="id" title="variable">t1</span></a>) (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#shift"><span class="id" title="abbreviation">shift</span></a> 0 <a class="idref" href="MailboxTypes.Substitution.html#v:170"><span class="id" title="variable">v</span></a>) (1 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:171"><span class="id" title="variable">x</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#t2:169"><span class="id" title="variable">t2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simpl_lift_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_relative"><span class="id" title="method">traverse_relative</span></a> (<span class="id" title="keyword">fun</span> <a id="l:176" class="idref" href="#l:176"><span class="id" title="binder"><span id="l:182" class="id">l</span></span></a> <a id="x0:177" class="idref" href="#x0:177"><span class="id" title="binder"><span id="x0:183" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst_idx"><span class="id" title="definition">subst_idx</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:176"><span class="id" title="variable">l</span></a> 0 <span class="id" title="var">v</span>) (<a class="idref" href="MailboxTypes.Substitution.html#l:176"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">x</span>) <a class="idref" href="MailboxTypes.Substitution.html#x0:177"><span class="id" title="variable">x0</span></a>) (<span class="id" title="keyword">fun</span> <a id="l:172" class="idref" href="#l:172"><span class="id" title="binder"><span id="l:178" class="id">l</span></span></a> <a id="x0:173" class="idref" href="#x0:173"><span class="id" title="binder"><span id="x0:179" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst_idx"><span class="id" title="definition">subst_idx</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:172"><span class="id" title="variable">l</span></a> 0 (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Value"><span class="id" title="definition">traverse_Value</span></a> (<span class="id" title="keyword">fun</span> <a id="l':174" class="idref" href="#l':174"><span class="id" title="binder"><span id="l':180" class="id">l'</span></span></a> <a id="x0':175" class="idref" href="#x0':175"><span class="id" title="binder"><span id="x0':181" class="id">x0'</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#shift"><span class="id" title="abbreviation">shift</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#l':174"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <a class="idref" href="MailboxTypes.Substitution.html#x0':175"><span class="id" title="variable">x0'</span></a>)) 0 <span class="id" title="var">v</span>)) (<a class="idref" href="MailboxTypes.Substitution.html#l:172"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span>) <a class="idref" href="MailboxTypes.Substitution.html#x0:173"><span class="id" title="variable">x0</span></a>) 1 <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H1</span> : <span class="id" title="keyword">forall</span> <a id="l:184" class="idref" href="#l:184"><span class="id" title="binder"><span id="l:188" class="id">l</span></span></a> <a id="y:185" class="idref" href="#y:185"><span class="id" title="binder"><span id="y:189" class="id">y</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst_idx"><span class="id" title="definition">subst_idx</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#l:184"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) 0 <span class="id" title="var">v</span>) (<a class="idref" href="MailboxTypes.Substitution.html#l:184"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">x</span>) <a class="idref" href="MailboxTypes.Substitution.html#y:185"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst_idx"><span class="id" title="definition">subst_idx</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:184"><span class="id" title="variable">l</span></a> 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MailboxTypes.Substitution.html#traverse_Value"><span class="id" title="definition">traverse_Value</span></a> (<span class="id" title="keyword">fun</span> <a id="l0:186" class="idref" href="#l0:186"><span class="id" title="binder"><span id="l0:190" class="id">l0</span></span></a> <a id="x0:187" class="idref" href="#x0:187"><span class="id" title="binder"><span id="x0:191" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#shift"><span class="id" title="abbreviation">shift</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#l0:186"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <a class="idref" href="MailboxTypes.Substitution.html#x0:187"><span class="id" title="variable">x0</span></a>)) 0 <span class="id" title="var">v</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MailboxTypes.Substitution.html#l:184"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span>) <a class="idref" href="MailboxTypes.Substitution.html#y:185"><span class="id" title="variable">y</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">simpl_lift_goal</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst_idx"><span class="id" title="definition">subst_idx</span></a>. <span class="id" title="var">dblib_by_cases</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_functorial"><span class="id" title="method">traverse_functorial</span></a> (<span class="id" title="keyword">fun</span> <a id="l0:194" class="idref" href="#l0:194"><span class="id" title="binder"><span id="l0:198" class="id">l0</span></span></a> <a id="x0:195" class="idref" href="#x0:195"><span class="id" title="binder"><span id="x0:199" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#shift"><span class="id" title="abbreviation">shift</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#l0:194"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <a class="idref" href="MailboxTypes.Substitution.html#x0:195"><span class="id" title="variable">x0</span></a>)) (<span class="id" title="keyword">fun</span> <a id="l0:192" class="idref" href="#l0:192"><span class="id" title="binder"><span id="l0:196" class="id">l0</span></span></a> <a id="x0:193" class="idref" href="#x0:193"><span class="id" title="binder"><span id="x0:197" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> <span class="id" title="var">l</span> (<a class="idref" href="MailboxTypes.Substitution.html#l0:192"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <a class="idref" href="MailboxTypes.Substitution.html#x0:193"><span class="id" title="variable">x0</span></a>)) <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_lift_goal</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">forall</span> <a id="l':200" class="idref" href="#l':200"><span class="id" title="binder"><span id="l':206" class="id">l'</span></span></a> <a id="x':201" class="idref" href="#x':201"><span class="id" title="binder"><span id="x':207" class="id">x'</span></span></a>, (<span class="id" title="keyword">fun</span> <a id="l0:202" class="idref" href="#l0:202"><span class="id" title="binder"><span id="l0:208" class="id">l0</span></span></a> <a id="x0:203" class="idref" href="#x0:203"><span class="id" title="binder"><span id="x0:209" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> (<span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) (<a class="idref" href="MailboxTypes.Substitution.html#l0:202"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <a class="idref" href="MailboxTypes.Substitution.html#x0:203"><span class="id" title="variable">x0</span></a>)) <a class="idref" href="MailboxTypes.Substitution.html#l':200"><span class="id" title="variable">l'</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x':201"><span class="id" title="variable">x'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<span class="id" title="keyword">fun</span> <a id="l0:204" class="idref" href="#l0:204"><span class="id" title="binder"><span id="l0:210" class="id">l0</span></span></a> <a id="x0:205" class="idref" href="#x0:205"><span class="id" title="binder"><span id="x0:211" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> <span class="id" title="var">l</span> (<a class="idref" href="MailboxTypes.Substitution.html#l0:204"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#shift"><span class="id" title="abbreviation">shift</span></a> (<a class="idref" href="MailboxTypes.Substitution.html#l0:204"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <a class="idref" href="MailboxTypes.Substitution.html#x0:205"><span class="id" title="variable">x0</span></a>))) <a class="idref" href="MailboxTypes.Substitution.html#l':200"><span class="id" title="variable">l'</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x':201"><span class="id" title="variable">x'</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#plus_n_O"><span class="id" title="lemma">plus_n_O</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift_lift_fuse_successor"><span class="id" title="lemma">lift_lift_fuse_successor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">PeanoNat.Nat.add_comm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_extensional"><span class="id" title="lemma">traverse_extensional</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">v</span> 0); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">H</span> 1 0 <span class="id" title="var">H1</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="subst_TSpawn" class="idref" href="#subst_TSpawn"><span class="id" title="lemma">subst_TSpawn</span></a> : <span class="id" title="keyword">forall</span> <a id="v:212" class="idref" href="#v:212"><span class="id" title="binder">v</span></a> <a id="x:213" class="idref" href="#x:213"><span class="id" title="binder">x</span></a> <a id="t:214" class="idref" href="#t:214"><span class="id" title="binder">t</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:212"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:213"><span class="id" title="variable">x</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TSpawn"><span class="id" title="constructor">TSpawn</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t:214"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Syntax.html#TSpawn"><span class="id" title="constructor">TSpawn</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:212"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:213"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t:214"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">now</span> <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="subst_TSend" class="idref" href="#subst_TSend"><span class="id" title="lemma">subst_TSend</span></a> : <span class="id" title="keyword">forall</span> <a id="t1:215" class="idref" href="#t1:215"><span class="id" title="binder">t1</span></a> <a id="t2:216" class="idref" href="#t2:216"><span class="id" title="binder">t2</span></a> <a id="v:217" class="idref" href="#v:217"><span class="id" title="binder">v</span></a> <a id="x:218" class="idref" href="#x:218"><span class="id" title="binder">x</span></a> <a id="m:219" class="idref" href="#m:219"><span class="id" title="binder">m</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:217"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:218"><span class="id" title="variable">x</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TSend"><span class="id" title="constructor">TSend</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t1:215"><span class="id" title="variable">t1</span></a> <a class="idref" href="MailboxTypes.Substitution.html#m:219"><span class="id" title="variable">m</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t2:216"><span class="id" title="variable">t2</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Syntax.html#TSend"><span class="id" title="constructor">TSend</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:217"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:218"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t1:215"><span class="id" title="variable">t1</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#m:219"><span class="id" title="variable">m</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:217"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:218"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t2:216"><span class="id" title="variable">t2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">now</span> <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="subst_GReceive" class="idref" href="#subst_GReceive"><span class="id" title="lemma">subst_GReceive</span></a> : <span class="id" title="keyword">forall</span> <a id="m:220" class="idref" href="#m:220"><span class="id" title="binder">m</span></a> <a id="t:221" class="idref" href="#t:221"><span class="id" title="binder">t</span></a> <a id="v:222" class="idref" href="#v:222"><span class="id" title="binder">v</span></a> <a id="x:223" class="idref" href="#x:223"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:222"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:223"><span class="id" title="variable">x</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#GReceive"><span class="id" title="constructor">GReceive</span></a> <a class="idref" href="MailboxTypes.Substitution.html#m:220"><span class="id" title="variable">m</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t:221"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Syntax.html#GReceive"><span class="id" title="constructor">GReceive</span></a> <a class="idref" href="MailboxTypes.Substitution.html#m:220"><span class="id" title="variable">m</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> 2 0 <a class="idref" href="MailboxTypes.Substitution.html#v:222"><span class="id" title="variable">v</span></a>) (2 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:223"><span class="id" title="variable">x</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#t:221"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simpl_lift_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_relative"><span class="id" title="method">traverse_relative</span></a> (<span class="id" title="keyword">fun</span> <a id="l:228" class="idref" href="#l:228"><span class="id" title="binder"><span id="l:234" class="id">l</span></span></a> <a id="x0:229" class="idref" href="#x0:229"><span class="id" title="binder"><span id="x0:235" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst_idx"><span class="id" title="definition">subst_idx</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:228"><span class="id" title="variable">l</span></a> 0 <span class="id" title="var">v</span>) (<a class="idref" href="MailboxTypes.Substitution.html#l:228"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">x</span>) <a class="idref" href="MailboxTypes.Substitution.html#x0:229"><span class="id" title="variable">x0</span></a>) (<span class="id" title="keyword">fun</span> <a id="l:224" class="idref" href="#l:224"><span class="id" title="binder"><span id="l:230" class="id">l</span></span></a> <a id="x0:225" class="idref" href="#x0:225"><span class="id" title="binder"><span id="x0:231" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst_idx"><span class="id" title="definition">subst_idx</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> <a class="idref" href="MailboxTypes.Substitution.html#l:224"><span class="id" title="variable">l</span></a> 0 (<a class="idref" href="MailboxTypes.Substitution.html#traverse_Value"><span class="id" title="definition">traverse_Value</span></a> (<span class="id" title="keyword">fun</span> <a id="l':226" class="idref" href="#l':226"><span class="id" title="binder"><span id="l':232" class="id">l'</span></span></a> <a id="x0':227" class="idref" href="#x0':227"><span class="id" title="binder"><span id="x0':233" class="id">x0'</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> 2 (<a class="idref" href="MailboxTypes.Substitution.html#l':226"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <a class="idref" href="MailboxTypes.Substitution.html#x0':227"><span class="id" title="variable">x0'</span></a>)) 0 <span class="id" title="var">v</span>)) (<a class="idref" href="MailboxTypes.Substitution.html#l:224"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span>)) <a class="idref" href="MailboxTypes.Substitution.html#x0:225"><span class="id" title="variable">x0</span></a>) 2 <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_lift_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst_idx"><span class="id" title="definition">subst_idx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dblib_by_cases</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_functorial"><span class="id" title="method">traverse_functorial</span></a> (<span class="id" title="keyword">fun</span> <a id="l':238" class="idref" href="#l':238"><span class="id" title="binder"><span id="l':242" class="id">l'</span></span></a> <a id="x0':239" class="idref" href="#x0':239"><span class="id" title="binder"><span id="x0':243" class="id">x0'</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> 2 (<a class="idref" href="MailboxTypes.Substitution.html#l':238"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <a class="idref" href="MailboxTypes.Substitution.html#x0':239"><span class="id" title="variable">x0'</span></a>)) (<span class="id" title="keyword">fun</span> <a id="l0:236" class="idref" href="#l0:236"><span class="id" title="binder"><span id="l0:240" class="id">l0</span></span></a> <a id="x0:237" class="idref" href="#x0:237"><span class="id" title="binder"><span id="x0:241" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> <span class="id" title="var">l</span> (<a class="idref" href="MailboxTypes.Substitution.html#l0:236"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <a class="idref" href="MailboxTypes.Substitution.html#x0:237"><span class="id" title="variable">x0</span></a>)) <span class="id" title="var">v</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#traverse_relative"><span class="id" title="method">traverse_relative</span></a> (<span class="id" title="keyword">fun</span> <a id="l0:246" class="idref" href="#l0:246"><span class="id" title="binder"><span id="l0:250" class="id">l0</span></span></a> <a id="x0:247" class="idref" href="#x0:247"><span class="id" title="binder"><span id="x0:251" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> (<span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 2) (<a class="idref" href="MailboxTypes.Substitution.html#l0:246"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <a class="idref" href="MailboxTypes.Substitution.html#x0:247"><span class="id" title="variable">x0</span></a>)) (<span class="id" title="keyword">fun</span> <a id="l0:244" class="idref" href="#l0:244"><span class="id" title="binder"><span id="l0:248" class="id">l0</span></span></a> <a id="x0:245" class="idref" href="#x0:245"><span class="id" title="binder"><span id="x0:249" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> =&gt; <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> <span class="id" title="var">l</span> (<a class="idref" href="MailboxTypes.Substitution.html#l0:244"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> 2 (<a class="idref" href="MailboxTypes.Substitution.html#l0:244"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <a class="idref" href="MailboxTypes.Substitution.html#x0:245"><span class="id" title="variable">x0</span></a>))) 0 <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">Eq</span> 0 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Eq'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H1</span> : <span class="id" title="keyword">forall</span> <a id="l0:252" class="idref" href="#l0:252"><span class="id" title="binder"><span id="l0:254" class="id">l0</span></span></a> <a id="x0:253" class="idref" href="#x0:253"><span class="id" title="binder"><span id="x0:255" class="id">x0</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> (<span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 2) (<a class="idref" href="MailboxTypes.Substitution.html#l0:252"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <a class="idref" href="MailboxTypes.Substitution.html#x0:253"><span class="id" title="variable">x0</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Syntax.html#ValueVar"><span class="id" title="constructor">ValueVar</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> <span class="id" title="var">l</span> (<a class="idref" href="MailboxTypes.Substitution.html#l0:252"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> 2 (<a class="idref" href="MailboxTypes.Substitution.html#l0:252"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 0) <a class="idref" href="MailboxTypes.Substitution.html#x0:253"><span class="id" title="variable">x0</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l'</span> <span class="id" title="var">x'</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#plus_n_O"><span class="id" title="lemma">plus_n_O</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Compare_dec.le_gt_dec</span> <span class="id" title="var">l'</span> <span class="id" title="var">x'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">L</span> | <span class="id" title="var">L</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">simpl_lift_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">A</span> : <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> 2 <span class="id" title="var">l'</span> <span class="id" title="var">x'</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">x'</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="var">simpl_lift_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">B</span> : <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> (2 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">x'</span>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">x'</span>) <span class="id" title="tactic">by</span> (<span class="id" title="var">simpl_lift_goal</span>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">B</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift_idx_recent"><span class="id" title="lemma">lift_idx_recent</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">A</span> : <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> 2 <span class="id" title="var">l'</span> <span class="id" title="var">x'</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">x'</span>) <span class="id" title="tactic">by</span> (<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift_idx_recent"><span class="id" title="lemma">lift_idx_recent</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">B</span> : <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">x'</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">x'</span>) <span class="id" title="tactic">by</span> (<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift_idx_recent"><span class="id" title="lemma">lift_idx_recent</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">B</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Eq'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="subst_TGuard" class="idref" href="#subst_TGuard"><span class="id" title="lemma">subst_TGuard</span></a> : <span class="id" title="keyword">forall</span> <a id="v1:256" class="idref" href="#v1:256"><span class="id" title="binder">v1</span></a> <a id="v2:257" class="idref" href="#v2:257"><span class="id" title="binder">v2</span></a> <a id="x:258" class="idref" href="#x:258"><span class="id" title="binder">x</span></a> <a id="e:259" class="idref" href="#e:259"><span class="id" title="binder">e</span></a> <a id="guards:260" class="idref" href="#guards:260"><span class="id" title="binder">guards</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v1:256"><span class="id" title="variable">v1</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:258"><span class="id" title="variable">x</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TGuard"><span class="id" title="constructor">TGuard</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v2:257"><span class="id" title="variable">v2</span></a> <a class="idref" href="MailboxTypes.Substitution.html#e:259"><span class="id" title="variable">e</span></a> <a class="idref" href="MailboxTypes.Substitution.html#guards:260"><span class="id" title="variable">guards</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Syntax.html#TGuard"><span class="id" title="constructor">TGuard</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v1:256"><span class="id" title="variable">v1</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:258"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v2:257"><span class="id" title="variable">v2</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#e:259"><span class="id" title="variable">e</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">ListDef.map</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v1:256"><span class="id" title="variable">v1</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:258"><span class="id" title="variable">x</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#guards:260"><span class="id" title="variable">guards</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="subst_insert_None" class="idref" href="#subst_insert_None"><span class="id" title="lemma">subst_insert_None</span></a> : <span class="id" title="keyword">forall</span> <a id="p:261" class="idref" href="#p:261"><span class="id" title="binder">p</span></a> <a id="env:262" class="idref" href="#env:262"><span class="id" title="binder">env</span></a> <a id="t1:263" class="idref" href="#t1:263"><span class="id" title="binder">t1</span></a> <a id="v:264" class="idref" href="#v:264"><span class="id" title="binder">v</span></a> <a id="x:265" class="idref" href="#x:265"><span class="id" title="binder">x</span></a> <a id="T:266" class="idref" href="#T:266"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:261"><span class="id" title="variable">p</span></a> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:265"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:262"><span class="id" title="variable">env</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#t1:263"><span class="id" title="variable">t1</span></a> <a class="idref" href="MailboxTypes.Substitution.html#T:266"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:261"><span class="id" title="variable">p</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:262"><span class="id" title="variable">env</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:264"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:265"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t1:263"><span class="id" title="variable">t1</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#T:266"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">WT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="var">env</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">env</span> <span class="id" title="var">HeqE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">WT</span> <span class="id" title="keyword">using</span> @<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm_ind3"><span class="id" title="definition">WellTypedTerm_ind3</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P0</span> := <span class="id" title="keyword">fun</span> <a id="env:267" class="idref" href="#env:267"><span class="id" title="binder"><span id="env:283" class="id">env</span></span></a> <a id="gs:268" class="idref" href="#gs:268"><span class="id" title="binder"><span id="gs:284" class="id">gs</span></span></a> <a id="T:269" class="idref" href="#T:269"><span class="id" title="binder"><span id="T:285" class="id">T</span></span></a> <a id="E:270" class="idref" href="#E:270"><span class="id" title="binder"><span id="E:286" class="id">E</span></span></a> (<a id="WG:271" class="idref" href="#WG:271"><span class="id" title="binder"><span id="WG:287" class="id">WG</span></span></a> : <a class="idref" href="MailboxTypes.TypingRules.html#WellTypedGuards"><span class="id" title="inductive">WellTypedGuards</span></a> <span class="id" title="var">p</span> <a class="idref" href="MailboxTypes.Substitution.html#env:267"><span class="id" title="variable">env</span></a> <a class="idref" href="MailboxTypes.Substitution.html#gs:268"><span class="id" title="variable">gs</span></a> <a class="idref" href="MailboxTypes.Substitution.html#T:269"><span class="id" title="variable">T</span></a> <a class="idref" href="MailboxTypes.Substitution.html#E:270"><span class="id" title="variable">E</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="v:272" class="idref" href="#v:272"><span class="id" title="binder"><span id="v:288" class="id">v</span></span></a> <a id="x:273" class="idref" href="#x:273"><span class="id" title="binder"><span id="x:289" class="id">x</span></span></a> <a id="env':274" class="idref" href="#env':274"><span class="id" title="binder"><span id="env':290" class="id">env'</span></span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#env:267"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:273"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env':274"><span class="id" title="variable">env'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedGuards"><span class="id" title="inductive">WellTypedGuards</span></a> <span class="id" title="var">p</span> <a class="idref" href="MailboxTypes.Substitution.html#env':274"><span class="id" title="variable">env'</span></a> (<span class="id" title="abbreviation">List.map</span> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:272"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:273"><span class="id" title="variable">x</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#gs:268"><span class="id" title="variable">gs</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#T:269"><span class="id" title="variable">T</span></a> <a class="idref" href="MailboxTypes.Substitution.html#E:270"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P1</span> := <span class="id" title="keyword">fun</span> <a id="env:275" class="idref" href="#env:275"><span class="id" title="binder"><span id="env:291" class="id">env</span></span></a> <a id="g:276" class="idref" href="#g:276"><span class="id" title="binder"><span id="g:292" class="id">g</span></span></a> <a id="T:277" class="idref" href="#T:277"><span class="id" title="binder"><span id="T:293" class="id">T</span></span></a> <a id="E:278" class="idref" href="#E:278"><span class="id" title="binder"><span id="E:294" class="id">E</span></span></a> (<a id="WG:279" class="idref" href="#WG:279"><span class="id" title="binder"><span id="WG:295" class="id">WG</span></span></a> : <a class="idref" href="MailboxTypes.TypingRules.html#WellTypedGuard"><span class="id" title="inductive">WellTypedGuard</span></a> <span class="id" title="var">p</span> <a class="idref" href="MailboxTypes.Substitution.html#env:275"><span class="id" title="variable">env</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g:276"><span class="id" title="variable">g</span></a> <a class="idref" href="MailboxTypes.Substitution.html#T:277"><span class="id" title="variable">T</span></a> <a class="idref" href="MailboxTypes.Substitution.html#E:278"><span class="id" title="variable">E</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="v:280" class="idref" href="#v:280"><span class="id" title="binder"><span id="v:296" class="id">v</span></span></a> <a id="x:281" class="idref" href="#x:281"><span class="id" title="binder"><span id="x:297" class="id">x</span></span></a> <a id="env':282" class="idref" href="#env':282"><span class="id" title="binder"><span id="env':298" class="id">env'</span></span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#env:275"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:281"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env':282"><span class="id" title="variable">env'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedGuard"><span class="id" title="inductive">WellTypedGuard</span></a> <span class="id" title="var">p</span> <a class="idref" href="MailboxTypes.Substitution.html#env':282"><span class="id" title="variable">env'</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:280"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:281"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g:276"><span class="id" title="variable">g</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#T:277"><span class="id" title="variable">T</span></a> <a class="idref" href="MailboxTypes.Substitution.html#E:278"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simpl_lift_goal</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv_raw_insert_None"><span class="id" title="lemma">EmptyEnv_raw_insert_None</span></a>; <span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simpl_lift_goal</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_insert_TValue_None"><span class="id" title="lemma">subst_insert_TValue_None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">HeqE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simpl_lift_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#APP"><span class="id" title="constructor">APP</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">IHWT</span> <span class="id" title="var">_</span> <span class="id" title="var">v0</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">now</span> <span class="id" title="var">simpl_lift_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_TLet"><span class="id" title="lemma">subst_TLet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination_raw_insert_None"><span class="id" title="lemma">EnvironmentCombination_raw_insert_None</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">env1'</span> [<span class="id" title="var">env2'</span> [<span class="id" title="var">Eq1</span> [<span class="id" title="var">Eq2</span> [<span class="id" title="var">L1</span> [<span class="id" title="var">L2</span> <span class="id" title="var">Comb'</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#LET"><span class="id" title="constructor">LET</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env1</span> := <span class="id" title="var">env1'</span>) (<span class="id" title="var">env2</span> := <span class="id" title="var">env2'</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHWT2</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_successor"><span class="id" title="lemma">raw_insert_successor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_zero"><span class="id" title="lemma">lookup_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_TSpawn"><span class="id" title="lemma">subst_TSpawn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#secondEnvironment_raw_insert_None"><span class="id" title="lemma">secondEnvironment_raw_insert_None</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HeqE</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Eq</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Eq</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#secondEnvironment_raw_insert_None_inv"><span class="id" title="lemma">secondEnvironment_raw_insert_None_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HeqE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HeqE</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">env2''</span> [<span class="id" title="var">Eq1'</span> <span class="id" title="var">Eq2'</span>]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SPAWN"><span class="id" title="constructor">SPAWN</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_raw_insert_None"><span class="id" title="lemma">EnvironmentDis_raw_insert_None</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">e0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">env1'</span> [<span class="id" title="var">env2'</span> [<span class="id" title="var">Eq1</span> [<span class="id" title="var">Eq2</span> [<span class="id" title="var">L1</span> [<span class="id" title="var">L2</span> <span class="id" title="var">Comb'</span>]]]]]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_TSend"><span class="id" title="lemma">subst_TSend</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SEND"><span class="id" title="constructor">SEND</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">generalize</span> (<span class="id" title="var">IHWT1</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">generalize</span> (<span class="id" title="var">IHWT2</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_raw_insert_None"><span class="id" title="lemma">EnvironmentDis_raw_insert_None</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">e0</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">env1'</span> [<span class="id" title="var">env2'</span> [<span class="id" title="var">Eq1</span> [<span class="id" title="var">Eq2</span> [<span class="id" title="var">L1</span> [<span class="id" title="var">L2</span> <span class="id" title="var">Comb'</span>]]]]]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#GUARD"><span class="id" title="constructor">GUARD</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env1</span> := <span class="id" title="var">env1'</span>) (<span class="id" title="var">env2</span> := <span class="id" title="var">env2'</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">generalize</span> (<span class="id" title="var">IHWT</span> <span class="id" title="var">x</span> <span class="id" title="var">v0</span> <span class="id" title="var">env1'</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>); <span class="id" title="var">simpl_subst_goal</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">generalize</span> (<span class="id" title="var">IHWT0</span> <span class="id" title="var">v0</span> <span class="id" title="var">x</span> <span class="id" title="var">env2'</span>); <span class="id" title="var">simpl_subst_goal</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_raw_insert_None"><span class="id" title="lemma">EnvironmentSubtype_raw_insert_None</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">env2'</span> [<span class="id" title="var">Eq</span> <span class="id" title="var">Sub</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHWT</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">v</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SUB"><span class="id" title="constructor">SUB</span></a>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">generalize</span> (<span class="id" title="var">IHWT</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">env'</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_GReceive"><span class="id" title="lemma">subst_GReceive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#RECEIVE"><span class="id" title="constructor">RECEIVE</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MailboxTypes.Environment.html#BaseEnv_raw_insert_None_inv"><span class="id" title="lemma">BaseEnv_raw_insert_None_inv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="subst_Guard_insert_None" class="idref" href="#subst_Guard_insert_None"><span class="id" title="lemma">subst_Guard_insert_None</span></a> : <span class="id" title="keyword">forall</span> <a id="p:299" class="idref" href="#p:299"><span class="id" title="binder">p</span></a> <a id="env:300" class="idref" href="#env:300"><span class="id" title="binder">env</span></a> <a id="g:301" class="idref" href="#g:301"><span class="id" title="binder">g</span></a> <a id="v:302" class="idref" href="#v:302"><span class="id" title="binder">v</span></a> <a id="x:303" class="idref" href="#x:303"><span class="id" title="binder">x</span></a> <a id="T:304" class="idref" href="#T:304"><span class="id" title="binder">T</span></a> <a id="f:305" class="idref" href="#f:305"><span class="id" title="binder">f</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedGuard"><span class="id" title="inductive">WellTypedGuard</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:299"><span class="id" title="variable">p</span></a> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:303"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:300"><span class="id" title="variable">env</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#g:301"><span class="id" title="variable">g</span></a> <a class="idref" href="MailboxTypes.Substitution.html#T:304"><span class="id" title="variable">T</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:305"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedGuard"><span class="id" title="inductive">WellTypedGuard</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:299"><span class="id" title="variable">p</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:300"><span class="id" title="variable">env</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:302"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:303"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g:301"><span class="id" title="variable">g</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#T:304"><span class="id" title="variable">T</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:305"><span class="id" title="variable">f</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">WT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="var">env</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">env</span> <span class="id" title="var">HeqE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">WT</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Substitution.html#subst_insert_None"><span class="id" title="lemma">subst_insert_None</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_GReceive"><span class="id" title="lemma">subst_GReceive</span></a>; <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MailboxTypes.Environment.html#BaseEnv_raw_insert_None_inv"><span class="id" title="lemma">BaseEnv_raw_insert_None_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> 0 (<a class="idref" href="MailboxTypes.Types.html#65fe139398fbcf205794e24a8b220bcc"><span class="id" title="notation">?</span></a> <span class="id" title="var">e</span> <a class="idref" href="MailboxTypes.Types.html#f39513b867322bb5ca4ed2da3ef6a4a4"><span class="id" title="notation">^^</span></a> <a class="idref" href="MailboxTypes.Types.html#d6e23384ae5ab5f4c7aff284d56ce436"><span class="id" title="notation">•</span></a>) (<a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="var">env0</span>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> (1 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">x</span>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> 0 (<a class="idref" href="MailboxTypes.Types.html#65fe139398fbcf205794e24a8b220bcc"><span class="id" title="notation">?</span></a> <span class="id" title="var">e</span> <a class="idref" href="MailboxTypes.Types.html#f39513b867322bb5ca4ed2da3ef6a4a4"><span class="id" title="notation">^^</span></a> <a class="idref" href="MailboxTypes.Types.html#d6e23384ae5ab5f4c7aff284d56ce436"><span class="id" title="notation">•</span></a>) <span class="id" title="var">env0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert_insert"><span class="id" title="lemma">insert_insert</span></a>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert_insert"><span class="id" title="lemma">insert_insert</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Substitution.html#subst_insert_None"><span class="id" title="lemma">subst_insert_None</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift"><span class="id" title="method">lift</span></a> 2 0 <span class="id" title="var">v</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="subst_Guards_insert_None" class="idref" href="#subst_Guards_insert_None"><span class="id" title="lemma">subst_Guards_insert_None</span></a> : <span class="id" title="keyword">forall</span> <a id="p:306" class="idref" href="#p:306"><span class="id" title="binder">p</span></a> <a id="env:307" class="idref" href="#env:307"><span class="id" title="binder">env</span></a> <a id="gs:308" class="idref" href="#gs:308"><span class="id" title="binder">gs</span></a> <a id="v:309" class="idref" href="#v:309"><span class="id" title="binder">v</span></a> <a id="x:310" class="idref" href="#x:310"><span class="id" title="binder">x</span></a> <a id="T:311" class="idref" href="#T:311"><span class="id" title="binder">T</span></a> <a id="f:312" class="idref" href="#f:312"><span class="id" title="binder">f</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedGuards"><span class="id" title="inductive">WellTypedGuards</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:306"><span class="id" title="variable">p</span></a> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:310"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:307"><span class="id" title="variable">env</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#gs:308"><span class="id" title="variable">gs</span></a> <a class="idref" href="MailboxTypes.Substitution.html#T:311"><span class="id" title="variable">T</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:312"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedGuards"><span class="id" title="inductive">WellTypedGuards</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:306"><span class="id" title="variable">p</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:307"><span class="id" title="variable">env</span></a> (<span class="id" title="abbreviation">List.map</span> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:309"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:310"><span class="id" title="variable">x</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#gs:308"><span class="id" title="variable">gs</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#T:311"><span class="id" title="variable">T</span></a> <a class="idref" href="MailboxTypes.Substitution.html#f:312"><span class="id" title="variable">f</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">WT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="var">env</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">env</span> <span class="id" title="var">HeqE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">WT</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_Guard_insert_None"><span class="id" title="lemma">subst_Guard_insert_None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Substitution.html#subst_Guard_insert_None"><span class="id" title="lemma">subst_Guard_insert_None</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHWT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="subst_lemma_TValue" class="idref" href="#subst_lemma_TValue"><span class="id" title="lemma">subst_lemma_TValue</span></a> : <span class="id" title="keyword">forall</span> <a id="p:313" class="idref" href="#p:313"><span class="id" title="binder">p</span></a> <a id="env1:314" class="idref" href="#env1:314"><span class="id" title="binder">env1</span></a> <a id="env2:315" class="idref" href="#env2:315"><span class="id" title="binder">env2</span></a> <a id="env:316" class="idref" href="#env:316"><span class="id" title="binder">env</span></a> <a id="A:317" class="idref" href="#A:317"><span class="id" title="binder">A</span></a> <a id="A':318" class="idref" href="#A':318"><span class="id" title="binder">A'</span></a> <a id="B:319" class="idref" href="#B:319"><span class="id" title="binder">B</span></a> <a id="v1:320" class="idref" href="#v1:320"><span class="id" title="binder">v1</span></a> <a id="v2:321" class="idref" href="#v2:321"><span class="id" title="binder">v2</span></a> <a id="x:322" class="idref" href="#x:322"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:313"><span class="id" title="variable">p</span></a> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:322"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#A:317"><span class="id" title="variable">A</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env1:314"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v1:320"><span class="id" title="variable">v1</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#B:319"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:313"><span class="id" title="variable">p</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env2:315"><span class="id" title="variable">env2</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v2:321"><span class="id" title="variable">v2</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#A':318"><span class="id" title="variable">A'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#A':318"><span class="id" title="variable">A'</span></a> <a class="idref" href="MailboxTypes.Types.html#131af33f01ef889df697fc663d016c9f"><span class="id" title="notation">≤</span></a> <a class="idref" href="MailboxTypes.Substitution.html#A:317"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#env1:314"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#47f92b61fc5202dedf3649e479db00ed"><span class="id" title="notation">+ₑ</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env2:315"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#47f92b61fc5202dedf3649e479db00ed"><span class="id" title="notation">~=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:316"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:313"><span class="id" title="variable">p</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:316"><span class="id" title="variable">env</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v2:321"><span class="id" title="variable">v2</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:322"><span class="id" title="variable">x</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v1:320"><span class="id" title="variable">v1</span></a>)) <a class="idref" href="MailboxTypes.Substitution.html#B:319"><span class="id" title="variable">B</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">WT1</span> <span class="id" title="var">WT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">x</span> <span class="id" title="var">A</span> <span class="id" title="var">env1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">E1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <span class="id" title="var">v1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">V1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <span class="id" title="var">v2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">V2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span> <span class="id" title="var">x</span> <span class="id" title="var">A</span> <span class="id" title="var">A'</span> <span class="id" title="var">env</span> <span class="id" title="var">env1</span> <span class="id" title="var">env2</span> <span class="id" title="var">HeqE1</span> <span class="id" title="var">HeqV1</span> <span class="id" title="var">HeqV2</span> <span class="id" title="var">WT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">WT1</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#insert_EmptyEnv_injective"><span class="id" title="lemma">insert_EmptyEnv_injective</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HeqE1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">HeqE1</span> <span class="id" title="keyword">as</span> [-&gt; [-&gt; <span class="id" title="var">Empty</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HeqV1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#lift_zero"><span class="id" title="method">lift_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvDis_EmptyEnv_left"><span class="id" title="lemma">EnvDis_EmptyEnv_left</span></a> <span class="id" title="var">env1</span> <span class="id" title="var">env2</span> <span class="id" title="var">env0</span> <span class="id" title="var">Empty</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SUB"><span class="id" title="constructor">SUB</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#insert_EmptyEnv"><span class="id" title="lemma">insert_EmptyEnv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#insert_EmptyEnv"><span class="id" title="lemma">insert_EmptyEnv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#insert_EmptyEnv"><span class="id" title="lemma">insert_EmptyEnv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_insert_inv"><span class="id" title="lemma">EnvironmentSubtype_insert_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">env2'</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">Sub'</span> [<span class="id" title="var">EnvSub'</span> [[<span class="id" title="var">Eq</span> <span class="id" title="var">Un</span>] | <span class="id" title="var">Eq</span>]]]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_insert_TValue_None"><span class="id" title="lemma">subst_insert_TValue_None</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v2</span> := <span class="id" title="var">v2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">WT1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Substitution.html#WellTypedTerm_TValue_Un"><span class="id" title="lemma">WellTypedTerm_TValue_Un</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">WT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">WT2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">env''</span> [<span class="id" title="var">Empty''</span> <span class="id" title="var">EnvSub''</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvDis_Sub"><span class="id" title="lemma">EnvDis_Sub</span></a> <span class="id" title="var">env0</span> <span class="id" title="var">env3</span> <span class="id" title="var">env2'</span> <span class="id" title="var">env''</span> <span class="id" title="var">env</span> <span class="id" title="var">EnvSub'</span> <span class="id" title="var">EnvSub''</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">envE</span> [<span class="id" title="var">SubE</span> <span class="id" title="var">DisE</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvDis_EmptyEnv_right"><span class="id" title="lemma">EnvDis_EmptyEnv_right</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Empty''</span> <span class="id" title="var">DisE</span>); <span class="id" title="tactic">intros</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SUB"><span class="id" title="constructor">SUB</span></a>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_trans"><span class="id" title="lemma">Subtype_trans</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">t2</span> := <span class="id" title="var">A</span>); <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvDis_Sub"><span class="id" title="lemma">EnvDis_Sub</span></a> <span class="id" title="var">env0</span> <span class="id" title="var">env3</span> <span class="id" title="var">env2'</span> <span class="id" title="var">env3</span> <span class="id" title="var">env</span> <span class="id" title="var">EnvSub'</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_refl"><span class="id" title="lemma">EnvironmentSubtype_refl</span></a> <span class="id" title="var">env3</span>) <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">env''</span> [<span class="id" title="var">EnvSub''</span> <span class="id" title="var">Dis''</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SUB"><span class="id" title="constructor">SUB</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_trans"><span class="id" title="lemma">Subtype_trans</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="subst_lemma" class="idref" href="#subst_lemma"><span class="id" title="lemma">subst_lemma</span></a> : <span class="id" title="keyword">forall</span> <a id="p:323" class="idref" href="#p:323"><span class="id" title="binder">p</span></a> <a id="env1:324" class="idref" href="#env1:324"><span class="id" title="binder">env1</span></a> <a id="env2:325" class="idref" href="#env2:325"><span class="id" title="binder">env2</span></a> <a id="env:326" class="idref" href="#env:326"><span class="id" title="binder">env</span></a> <a id="A:327" class="idref" href="#A:327"><span class="id" title="binder">A</span></a> <a id="A':328" class="idref" href="#A':328"><span class="id" title="binder">A'</span></a> <a id="B:329" class="idref" href="#B:329"><span class="id" title="binder">B</span></a> <a id="t:330" class="idref" href="#t:330"><span class="id" title="binder">t</span></a> <a id="v:331" class="idref" href="#v:331"><span class="id" title="binder">v</span></a> <a id="x:332" class="idref" href="#x:332"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:323"><span class="id" title="variable">p</span></a> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:332"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#A:327"><span class="id" title="variable">A</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env1:324"><span class="id" title="variable">env1</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#t:330"><span class="id" title="variable">t</span></a> <a class="idref" href="MailboxTypes.Substitution.html#B:329"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:323"><span class="id" title="variable">p</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env2:325"><span class="id" title="variable">env2</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:331"><span class="id" title="variable">v</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#A':328"><span class="id" title="variable">A'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#A':328"><span class="id" title="variable">A'</span></a> <a class="idref" href="MailboxTypes.Types.html#131af33f01ef889df697fc663d016c9f"><span class="id" title="notation">≤</span></a> <a class="idref" href="MailboxTypes.Substitution.html#A:327"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#env1:324"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#47f92b61fc5202dedf3649e479db00ed"><span class="id" title="notation">+ₑ</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env2:325"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#47f92b61fc5202dedf3649e479db00ed"><span class="id" title="notation">~=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:326"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <a class="idref" href="MailboxTypes.Substitution.html#p:323"><span class="id" title="variable">p</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:326"><span class="id" title="variable">env</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:331"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:332"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#t:330"><span class="id" title="variable">t</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#B:329"><span class="id" title="variable">B</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">WT1</span> <span class="id" title="var">WT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">x</span> <span class="id" title="var">A</span> <span class="id" title="var">env1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">E1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">v</span> <span class="id" title="var">x</span> <span class="id" title="var">A</span> <span class="id" title="var">A'</span> <span class="id" title="var">env</span> <span class="id" title="var">env1</span> <span class="id" title="var">env2</span> <span class="id" title="var">HeqE1</span> <span class="id" title="var">WT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">WT1</span> <span class="id" title="keyword">using</span> @<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm_ind3"><span class="id" title="definition">WellTypedTerm_ind3</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P0</span> := <span class="id" title="keyword">fun</span> <a id="env1:333" class="idref" href="#env1:333"><span class="id" title="binder"><span id="env1:357" class="id">env1</span></span></a> <a id="gs:334" class="idref" href="#gs:334"><span class="id" title="binder"><span id="gs:358" class="id">gs</span></span></a> <a id="T:335" class="idref" href="#T:335"><span class="id" title="binder"><span id="T:359" class="id">T</span></span></a> <a id="E:336" class="idref" href="#E:336"><span class="id" title="binder"><span id="E:360" class="id">E</span></span></a> (<a id="WG:337" class="idref" href="#WG:337"><span class="id" title="binder"><span id="WG:361" class="id">WG</span></span></a> : <a class="idref" href="MailboxTypes.TypingRules.html#WellTypedGuards"><span class="id" title="inductive">WellTypedGuards</span></a> <span class="id" title="var">p</span> <a class="idref" href="MailboxTypes.Substitution.html#env1:333"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Substitution.html#gs:334"><span class="id" title="variable">gs</span></a> <a class="idref" href="MailboxTypes.Substitution.html#T:335"><span class="id" title="variable">T</span></a> <a class="idref" href="MailboxTypes.Substitution.html#E:336"><span class="id" title="variable">E</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="v:338" class="idref" href="#v:338"><span class="id" title="binder"><span id="v:362" class="id">v</span></span></a> <a id="x:339" class="idref" href="#x:339"><span class="id" title="binder"><span id="x:363" class="id">x</span></span></a> <a id="A:340" class="idref" href="#A:340"><span class="id" title="binder"><span id="A:364" class="id">A</span></span></a> <a id="A':341" class="idref" href="#A':341"><span class="id" title="binder"><span id="A':365" class="id">A'</span></span></a> <a id="env1':342" class="idref" href="#env1':342"><span class="id" title="binder"><span id="env1':366" class="id">env1'</span></span></a> <a id="env2:343" class="idref" href="#env2:343"><span class="id" title="binder"><span id="env2:367" class="id">env2</span></span></a> <a id="env:344" class="idref" href="#env:344"><span class="id" title="binder"><span id="env:368" class="id">env</span></span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#env1:333"><span class="id" title="variable">env1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:339"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#A:340"><span class="id" title="variable">A</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env1':342"><span class="id" title="variable">env1'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <span class="id" title="var">p</span> <a class="idref" href="MailboxTypes.Substitution.html#env2:343"><span class="id" title="variable">env2</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:338"><span class="id" title="variable">v</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#A':341"><span class="id" title="variable">A'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#A':341"><span class="id" title="variable">A'</span></a> <a class="idref" href="MailboxTypes.Types.html#131af33f01ef889df697fc663d016c9f"><span class="id" title="notation">≤</span></a> <a class="idref" href="MailboxTypes.Substitution.html#A:340"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#env1':342"><span class="id" title="variable">env1'</span></a> <a class="idref" href="MailboxTypes.Environment.html#47f92b61fc5202dedf3649e479db00ed"><span class="id" title="notation">+ₑ</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env2:343"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#47f92b61fc5202dedf3649e479db00ed"><span class="id" title="notation">~=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:344"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedGuards"><span class="id" title="inductive">WellTypedGuards</span></a> <span class="id" title="var">p</span> <a class="idref" href="MailboxTypes.Substitution.html#env:344"><span class="id" title="variable">env</span></a> (<span class="id" title="abbreviation">List.map</span> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:338"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:339"><span class="id" title="variable">x</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#gs:334"><span class="id" title="variable">gs</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#T:335"><span class="id" title="variable">T</span></a> <a class="idref" href="MailboxTypes.Substitution.html#E:336"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P1</span> := <span class="id" title="keyword">fun</span> <a id="env1:345" class="idref" href="#env1:345"><span class="id" title="binder"><span id="env1:369" class="id">env1</span></span></a> <a id="g:346" class="idref" href="#g:346"><span class="id" title="binder"><span id="g:370" class="id">g</span></span></a> <a id="T:347" class="idref" href="#T:347"><span class="id" title="binder"><span id="T:371" class="id">T</span></span></a> <a id="E:348" class="idref" href="#E:348"><span class="id" title="binder"><span id="E:372" class="id">E</span></span></a> (<a id="WG:349" class="idref" href="#WG:349"><span class="id" title="binder"><span id="WG:373" class="id">WG</span></span></a> : <a class="idref" href="MailboxTypes.TypingRules.html#WellTypedGuard"><span class="id" title="inductive">WellTypedGuard</span></a> <span class="id" title="var">p</span> <a class="idref" href="MailboxTypes.Substitution.html#env1:345"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g:346"><span class="id" title="variable">g</span></a> <a class="idref" href="MailboxTypes.Substitution.html#T:347"><span class="id" title="variable">T</span></a> <a class="idref" href="MailboxTypes.Substitution.html#E:348"><span class="id" title="variable">E</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="v:350" class="idref" href="#v:350"><span class="id" title="binder"><span id="v:374" class="id">v</span></span></a> <a id="x:351" class="idref" href="#x:351"><span class="id" title="binder"><span id="x:375" class="id">x</span></span></a> <a id="A:352" class="idref" href="#A:352"><span class="id" title="binder"><span id="A:376" class="id">A</span></span></a> <a id="A':353" class="idref" href="#A':353"><span class="id" title="binder"><span id="A':377" class="id">A'</span></span></a> <a id="env1':354" class="idref" href="#env1':354"><span class="id" title="binder"><span id="env1':378" class="id">env1'</span></span></a> <a id="env2:355" class="idref" href="#env2:355"><span class="id" title="binder"><span id="env2:379" class="id">env2</span></span></a> <a id="env:356" class="idref" href="#env:356"><span class="id" title="binder"><span id="env:380" class="id">env</span></span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#env1:345"><span class="id" title="variable">env1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:351"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#A:352"><span class="id" title="variable">A</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env1':354"><span class="id" title="variable">env1'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedTerm"><span class="id" title="inductive">WellTypedTerm</span></a> <span class="id" title="var">p</span> <a class="idref" href="MailboxTypes.Substitution.html#env2:355"><span class="id" title="variable">env2</span></a> (<a class="idref" href="MailboxTypes.Syntax.html#TValue"><span class="id" title="constructor">TValue</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:350"><span class="id" title="variable">v</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#A':353"><span class="id" title="variable">A'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#A':353"><span class="id" title="variable">A'</span></a> <a class="idref" href="MailboxTypes.Types.html#131af33f01ef889df697fc663d016c9f"><span class="id" title="notation">≤</span></a> <a class="idref" href="MailboxTypes.Substitution.html#A:352"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Substitution.html#env1':354"><span class="id" title="variable">env1'</span></a> <a class="idref" href="MailboxTypes.Environment.html#47f92b61fc5202dedf3649e479db00ed"><span class="id" title="notation">+ₑ</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env2:355"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#47f92b61fc5202dedf3649e479db00ed"><span class="id" title="notation">~=</span></a> <a class="idref" href="MailboxTypes.Substitution.html#env:356"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.TypingRules.html#WellTypedGuard"><span class="id" title="inductive">WellTypedGuard</span></a> <span class="id" title="var">p</span> <a class="idref" href="MailboxTypes.Substitution.html#env:356"><span class="id" title="variable">env</span></a> (<a class="idref" href="MailboxTypes.Dblib.DeBruijn.html#subst"><span class="id" title="method">subst</span></a> <a class="idref" href="MailboxTypes.Substitution.html#v:350"><span class="id" title="variable">v</span></a> <a class="idref" href="MailboxTypes.Substitution.html#x:351"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Substitution.html#g:346"><span class="id" title="variable">g</span></a>) <a class="idref" href="MailboxTypes.Substitution.html#T:347"><span class="id" title="variable">T</span></a> <a class="idref" href="MailboxTypes.Substitution.html#E:348"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#insert_EmptyEnv"><span class="id" title="lemma">insert_EmptyEnv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_lemma_TValue"><span class="id" title="lemma">subst_lemma_TValue</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#insert_EmptyEnv_injective"><span class="id" title="lemma">insert_EmptyEnv_injective</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HeqE1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">HeqE1</span> <span class="id" title="keyword">as</span> [-&gt; [-&gt; <span class="id" title="var">Empty</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simpl_lift_goal</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#APP"><span class="id" title="constructor">APP</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">IHWT1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <span class="id" title="var">WT2</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_TLet"><span class="id" title="lemma">subst_TLet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination_insert"><span class="id" title="lemma">EnvironmentCombination_insert</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">env1'</span> [<span class="id" title="var">env2'</span> [<span class="id" title="var">L1</span> [<span class="id" title="var">L2</span> [<span class="id" title="var">Comb2</span> [[<span class="id" title="var">Eq1</span> <span class="id" title="var">Eq2</span>] | [[<span class="id" title="var">Eq1</span> <span class="id" title="var">Eq2</span>] | [<span class="id" title="var">A1</span> [<span class="id" title="var">A2</span> [<span class="id" title="var">Eq1</span> [<span class="id" title="var">Eq2</span> <span class="id" title="var">TComb</span>]]]]]]]]]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;is&nbsp;in&nbsp;the&nbsp;left&nbsp;term&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb"><span class="id" title="lemma">EnvironmentDis_Comb</span></a> <span class="id" title="var">env4</span> <span class="id" title="var">env1'</span> <span class="id" title="var">env2'</span> <span class="id" title="var">env3</span> <span class="id" title="var">env0</span> <span class="id" title="var">H0</span> <span class="id" title="var">Comb2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">envT</span> [<span class="id" title="var">CombT</span> <span class="id" title="var">DisT</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#LET"><span class="id" title="constructor">LET</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env1</span> := <span class="id" title="var">envT</span>) (<span class="id" title="var">env2</span> := <span class="id" title="var">env2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1_1</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_insert_None"><span class="id" title="lemma">subst_insert_None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_successor"><span class="id" title="lemma">raw_insert_successor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_zero"><span class="id" title="lemma">lookup_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">WT1_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;is&nbsp;in&nbsp;the&nbsp;right&nbsp;term&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_rev"><span class="id" title="lemma">EnvironmentDis_Comb_rev</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> <span class="id" title="var">Comb2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">envT</span> [<span class="id" title="var">CombT</span> <span class="id" title="var">DisT</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#LET"><span class="id" title="constructor">LET</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env1</span> := <span class="id" title="var">env1'</span>) (<span class="id" title="var">env2</span> := <span class="id" title="var">envT</span>) (<span class="id" title="var">T1</span> := <span class="id" title="var">T1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_insert_None"><span class="id" title="lemma">subst_insert_None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#WellTypedTerm_TValue_raw_insert_None"><span class="id" title="lemma">WellTypedTerm_TValue_raw_insert_None</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := 0) <span class="id" title="tactic">in</span> <span class="id" title="var">WT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Eq</span> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌊</span></a> <span class="id" title="var">T1</span> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌋</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">x</span> <span class="id" title="var">A</span> <span class="id" title="var">env2'</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">A</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌊</span></a> <span class="id" title="var">T1</span> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌋</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env2'</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_successor"><span class="id" title="lemma">raw_insert_successor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">DisE</span> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌊</span></a> <span class="id" title="var">T1</span> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌋</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env2'</span> <a class="idref" href="MailboxTypes.Environment.html#47f92b61fc5202dedf3649e479db00ed"><span class="id" title="notation">+ₑ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env4</span> <a class="idref" href="MailboxTypes.Environment.html#47f92b61fc5202dedf3649e479db00ed"><span class="id" title="notation">~=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌊</span></a> <span class="id" title="var">T1</span> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌋</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">envT</span>); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;is&nbsp;in&nbsp;both&nbsp;terms&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_rev"><span class="id" title="lemma">EnvironmentDis_Comb_rev</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> <span class="id" title="var">Comb2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">envT2</span> [<span class="id" title="var">CombT2</span> <span class="id" title="var">DisT2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb"><span class="id" title="lemma">EnvironmentDis_Comb</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> <span class="id" title="var">Comb2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">envT1</span> [<span class="id" title="var">CombT1</span> <span class="id" title="var">DisT1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">repeat</span> (<span class="id" title="var">simpl_lift_goal</span>; <span class="id" title="tactic">simpl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.TypingRules.html#canonical_form_BTBool"><span class="id" title="lemma">canonical_form_BTBool</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">WT2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.TypingRules.html#weak_BTBool_2"><span class="id" title="lemma">weak_BTBool_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">WT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">TComb</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_Subtype_Empty"><span class="id" title="lemma">EnvironmentDisjointCombination_Subtype_Empty</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> (<a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv_EmptyEnv"><span class="id" title="lemma">create_EmptyEnv_EmptyEnv</span></a> <span class="id" title="var">env4</span>) <span class="id" title="var">WT2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Sub'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SUB"><span class="id" title="constructor">SUB</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#LET"><span class="id" title="constructor">LET</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1_1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">A'</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <a class="idref" href="MailboxTypes.Types.html#BTBool"><span class="id" title="constructor">BTBool</span></a>) (<span class="id" title="var">env2</span> := <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">env1'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_Empty"><span class="id" title="lemma">EnvironmentDisjointCombination_Empty</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1_2</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">A'</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <a class="idref" href="MailboxTypes.Types.html#BTBool"><span class="id" title="constructor">BTBool</span></a>) (<span class="id" title="var">env2</span> := (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">env2'</span>)) (<span class="id" title="var">env1</span> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌊</span></a> <span class="id" title="var">T1</span> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌋</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_successor"><span class="id" title="lemma">raw_insert_successor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_zero"><span class="id" title="lemma">lookup_zero</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv_EmptyEnv"><span class="id" title="lemma">create_EmptyEnv_EmptyEnv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_Empty"><span class="id" title="lemma">EnvironmentDisjointCombination_Empty</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">repeat</span> (<span class="id" title="var">simpl_lift_goal</span>; <span class="id" title="tactic">simpl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.TypingRules.html#canonical_form_BTUnit"><span class="id" title="lemma">canonical_form_BTUnit</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">WT2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.TypingRules.html#weak_BTUnit_2"><span class="id" title="lemma">weak_BTUnit_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">WT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">TComb</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_Subtype_Empty"><span class="id" title="lemma">EnvironmentDisjointCombination_Subtype_Empty</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> (<a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv_EmptyEnv"><span class="id" title="lemma">create_EmptyEnv_EmptyEnv</span></a> <span class="id" title="var">env4</span>) <span class="id" title="var">WT2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Sub'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SUB"><span class="id" title="constructor">SUB</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#LET"><span class="id" title="constructor">LET</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1_1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">A'</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <a class="idref" href="MailboxTypes.Types.html#BTUnit"><span class="id" title="constructor">BTUnit</span></a>) (<span class="id" title="var">env2</span> := <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">env1'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_Empty"><span class="id" title="lemma">EnvironmentDisjointCombination_Empty</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1_2</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">A'</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <a class="idref" href="MailboxTypes.Types.html#BTUnit"><span class="id" title="constructor">BTUnit</span></a>) (<span class="id" title="var">env2</span> := (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">env2'</span>)) (<span class="id" title="var">env1</span> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌊</span></a> <span class="id" title="var">T1</span> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌋</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_successor"><span class="id" title="lemma">raw_insert_successor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_zero"><span class="id" title="lemma">lookup_zero</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv_EmptyEnv"><span class="id" title="lemma">create_EmptyEnv_EmptyEnv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_Empty"><span class="id" title="lemma">EnvironmentDisjointCombination_Empty</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">repeat</span> (<span class="id" title="var">simpl_lift_goal</span>; <span class="id" title="tactic">simpl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.TypingRules.html#weak_ValueVar_3"><span class="id" title="lemma">weak_ValueVar_3</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">WT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">WT2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">env4'</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">Eq'</span> [<span class="id" title="var">Sub</span> [<span class="id" title="var">SubEnv</span> <span class="id" title="var">WT2</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_insert_left"><span class="id" title="lemma">EnvironmentDisjointCombination_insert_left</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">env3'</span> [<span class="id" title="var">env0'</span> [[-&gt; -&gt;] | [<span class="id" title="var">c</span> [-&gt; [-&gt; -&gt;]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_Subtype_Empty_insert"><span class="id" title="lemma">EnvironmentDisjointCombination_Subtype_Empty_insert</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">env4'</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> (<a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv_EmptyEnv"><span class="id" title="lemma">create_EmptyEnv_EmptyEnv</span></a> <span class="id" title="var">env4'</span>) <span class="id" title="var">SubEnv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Sub'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SUB"><span class="id" title="constructor">SUB</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env2</span> := <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> <span class="id" title="var">A</span> <span class="id" title="var">env3'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_trans"><span class="id" title="lemma">EnvironmentSubtype_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_insert_Subtype"><span class="id" title="lemma">EnvironmentSubtype_insert_Subtype</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_trans"><span class="id" title="lemma">Subtype_trans</span></a>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination_raw_insert_None"><span class="id" title="lemma">EnvironmentCombination_raw_insert_None</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Comb2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">env1''</span> [<span class="id" title="var">env2''</span> [<span class="id" title="var">Eq1</span> [? [<span class="id" title="var">Eq2</span> [? <span class="id" title="var">Comb'</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#LET"><span class="id" title="constructor">LET</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env1</span> := <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> <span class="id" title="var">A1</span> <span class="id" title="var">env1''</span>) (<span class="id" title="var">env2</span> := (<a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> <span class="id" title="var">A2</span> <span class="id" title="var">env2''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination_insert_both"><span class="id" title="lemma">EnvironmentCombination_insert_both</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1_1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">A</span> := <span class="id" title="var">A1</span>) (<span class="id" title="var">A'</span> := <span class="id" title="var">A1</span>) (<span class="id" title="var">env2</span> := <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> <span class="id" title="var">A1</span> (<a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">env1''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Eq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_insert_EmptyEnv"><span class="id" title="lemma">EnvironmentDisjointCombination_insert_EmptyEnv</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1_2</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">A</span> := <span class="id" title="var">A2</span>) (<span class="id" title="var">A'</span> := <span class="id" title="var">A2</span>) (<span class="id" title="var">env2</span> := <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">v</span>) <span class="id" title="var">A2</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">env2''</span>)) (<span class="id" title="var">env1</span> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌊</span></a> <span class="id" title="var">T1</span> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌋</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_successor"><span class="id" title="lemma">raw_insert_successor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_zero"><span class="id" title="lemma">lookup_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv_EmptyEnv"><span class="id" title="lemma">create_EmptyEnv_EmptyEnv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_successor"><span class="id" title="lemma">raw_insert_successor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_zero"><span class="id" title="lemma">lookup_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_insert_EmptyEnv"><span class="id" title="lemma">EnvironmentDisjointCombination_insert_EmptyEnv</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_Subtype_Empty_insert_Base"><span class="id" title="lemma">EnvironmentDisjointCombination_Subtype_Empty_insert_Base</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">env4'</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> (<a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv_EmptyEnv"><span class="id" title="lemma">create_EmptyEnv_EmptyEnv</span></a> <span class="id" title="var">env4'</span>) <span class="id" title="var">SubEnv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Sub'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SUB"><span class="id" title="constructor">SUB</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env2</span> := <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> <span class="id" title="var">A</span> <span class="id" title="var">env3'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_trans"><span class="id" title="lemma">EnvironmentSubtype_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_insert_Subtype"><span class="id" title="lemma">EnvironmentSubtype_insert_Subtype</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_trans"><span class="id" title="lemma">Subtype_trans</span></a>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Sub</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">TComb</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination_raw_insert_Base"><span class="id" title="lemma">EnvironmentCombination_raw_insert_Base</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Comb2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">env1''</span> [<span class="id" title="var">env2''</span> [<span class="id" title="var">Comb'</span> [[-&gt; -&gt;] | [[-&gt; -&gt;] | [-&gt; -&gt;]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#LET"><span class="id" title="constructor">LET</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env1</span> := <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) <span class="id" title="var">env1''</span>) (<span class="id" title="var">env2</span> := (<a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) <span class="id" title="var">env2''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination_insert_both"><span class="id" title="lemma">EnvironmentCombination_insert_both</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1_1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">A</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<span class="id" title="var">A'</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<span class="id" title="var">env2</span> := <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">env1''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_insert_Base"><span class="id" title="lemma">EnvironmentDisjointCombination_insert_Base</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1_2</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">A</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<span class="id" title="var">A'</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<span class="id" title="var">env2</span> := <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">v</span>) (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">env2''</span>)) (<span class="id" title="var">env1</span> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌊</span></a> <span class="id" title="var">T1</span> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌋</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert"><span class="id" title="definition">raw_insert</span></a> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="var">env2''</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv_EmptyEnv"><span class="id" title="lemma">create_EmptyEnv_EmptyEnv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_successor"><span class="id" title="lemma">raw_insert_successor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_zero"><span class="id" title="lemma">lookup_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_insert_EmptyEnv"><span class="id" title="lemma">EnvironmentDisjointCombination_insert_EmptyEnv</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#LET"><span class="id" title="constructor">LET</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env1</span> := <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) <span class="id" title="var">env1''</span>) (<span class="id" title="var">env2</span> := (<a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) <span class="id" title="var">env2''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination_insert_both"><span class="id" title="lemma">EnvironmentCombination_insert_both</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1_1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">A</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<span class="id" title="var">A'</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<span class="id" title="var">env2</span> := <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">env1''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_insert_EmptyEnv"><span class="id" title="lemma">EnvironmentDisjointCombination_insert_EmptyEnv</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1_2</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">A</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<span class="id" title="var">A'</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<span class="id" title="var">env2</span> := <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">v</span>) (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">env2''</span>)) (<span class="id" title="var">env1</span> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌊</span></a> <span class="id" title="var">T1</span> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌋</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) <span class="id" title="var">env2''</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_successor"><span class="id" title="lemma">raw_insert_successor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_zero"><span class="id" title="lemma">lookup_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv_EmptyEnv"><span class="id" title="lemma">create_EmptyEnv_EmptyEnv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_successor"><span class="id" title="lemma">raw_insert_successor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_zero"><span class="id" title="lemma">lookup_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_insert_Base"><span class="id" title="lemma">EnvironmentDisjointCombination_insert_Base</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#LET"><span class="id" title="constructor">LET</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env1</span> := <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) <span class="id" title="var">env1''</span>) (<span class="id" title="var">env2</span> := (<a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) <span class="id" title="var">env2''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination_insert_both"><span class="id" title="lemma">EnvironmentCombination_insert_both</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1_1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">A</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<span class="id" title="var">A'</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<span class="id" title="var">env2</span> := <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">env1''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_insert_Base"><span class="id" title="lemma">EnvironmentDisjointCombination_insert_Base</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1_2</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">A</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<span class="id" title="var">A'</span> := <a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<span class="id" title="var">env2</span> := <a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">v</span>) (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">env2''</span>)) (<span class="id" title="var">env1</span> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌊</span></a> <span class="id" title="var">T1</span> <a class="idref" href="MailboxTypes.Types.html#641f176fd2291a0b7a46cb75f37bb2e7"><span class="id" title="notation">⌋</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MailboxTypes.Dblib.Environments.html#insert"><span class="id" title="abbreviation">insert</span></a> <span class="id" title="var">v</span> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">c</span>) <span class="id" title="var">env2''</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_successor"><span class="id" title="lemma">raw_insert_successor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_zero"><span class="id" title="lemma">lookup_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv_EmptyEnv"><span class="id" title="lemma">create_EmptyEnv_EmptyEnv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_successor"><span class="id" title="lemma">raw_insert_successor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_zero"><span class="id" title="lemma">lookup_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination_insert_Base"><span class="id" title="lemma">EnvironmentDisjointCombination_insert_Base</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_TSpawn"><span class="id" title="lemma">subst_TSpawn</span></a>. <span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_TSend"><span class="id" title="lemma">subst_TSend</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisCombination_insert"><span class="id" title="lemma">EnvironmentDisCombination_insert</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">e0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">env1'</span> [<span class="id" title="var">env2'</span> [<span class="id" title="var">L1</span> [<span class="id" title="var">L2</span> [<span class="id" title="var">Dis'</span> [[<span class="id" title="var">Eq1</span> <span class="id" title="var">Eq2</span>] | [[<span class="id" title="var">Eq1</span> <span class="id" title="var">Eq2</span>] | [<span class="id" title="var">BT</span> [<span class="id" title="var">Eq1</span> <span class="id" title="var">Eq2</span>]]]]]]]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;in&nbsp;the&nbsp;left&nbsp;term&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_assoc"><span class="id" title="lemma">EnvironmentDis_assoc</span></a> <span class="id" title="var">env4</span> <span class="id" title="var">env1'</span> <span class="id" title="var">env2'</span> <span class="id" title="var">env3</span> <span class="id" title="var">env0</span> <span class="id" title="var">H0</span> <span class="id" title="var">Dis'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">envT</span> [<span class="id" title="var">DisT1</span> <span class="id" title="var">DisT2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SEND"><span class="id" title="constructor">SEND</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env1</span> := <span class="id" title="var">envT</span>) (<span class="id" title="var">env2</span> := <span class="id" title="var">env2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">DisT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Substitution.html#subst_lemma_TValue"><span class="id" title="lemma">subst_lemma_TValue</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">envT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">WT1_1</span> <span class="id" title="var">WT2</span> <span class="id" title="var">H</span> <span class="id" title="var">DisT2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_insert_None"><span class="id" title="lemma">subst_insert_None</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">v</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">WT1_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">WT1_2</span>; <span class="id" title="var">now</span> <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;in&nbsp;the&nbsp;right&nbsp;term&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_assoc_rev"><span class="id" title="lemma">EnvironmentDis_assoc_rev</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> <span class="id" title="var">Dis'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">envT</span> [<span class="id" title="var">DisT1</span> <span class="id" title="var">DisT2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SEND"><span class="id" title="constructor">SEND</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env1</span> := <span class="id" title="var">env1'</span>) (<span class="id" title="var">env2</span> := <span class="id" title="var">envT</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_insert_None"><span class="id" title="lemma">subst_insert_None</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">v</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">WT1_1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">WT1_1</span>; <span class="id" title="var">now</span> <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">DisT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Substitution.html#subst_lemma_TValue"><span class="id" title="lemma">subst_lemma_TValue</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">envT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">WT1_2</span> <span class="id" title="var">WT2</span> <span class="id" title="var">H</span> <span class="id" title="var">DisT2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;in&nbsp;the&nbsp;both&nbsp;terms&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisCombination_insert_Type_eq"><span class="id" title="lemma">EnvironmentDisCombination_insert_Type_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">e0</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_assoc_rev"><span class="id" title="lemma">EnvironmentDis_assoc_rev</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> <span class="id" title="var">Dis'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">envT2</span> [<span class="id" title="var">DisT1_2</span> <span class="id" title="var">DisT2_2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_assoc"><span class="id" title="lemma">EnvironmentDis_assoc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> <span class="id" title="var">Dis'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">envT1</span> [<span class="id" title="var">DisT1_1</span> <span class="id" title="var">DisT2_1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SEND"><span class="id" title="constructor">SEND</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env1</span> := <span class="id" title="var">envT1</span>) (<span class="id" title="var">env2</span> := <span class="id" title="var">envT2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">DisT2_1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Substitution.html#subst_lemma_TValue"><span class="id" title="lemma">subst_lemma_TValue</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">envT1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">WT1_1</span> <span class="id" title="var">WT2</span> <span class="id" title="var">H</span> <span class="id" title="var">DisT2_1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">admit</span>. <span class="comment">(*&nbsp;This&nbsp;holds&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">DisT2_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Substitution.html#subst_lemma_TValue"><span class="id" title="lemma">subst_lemma_TValue</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">envT2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">WT1_2</span> <span class="id" title="var">WT2</span> <span class="id" title="var">H</span> <span class="id" title="var">DisT2_2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_TGuard"><span class="id" title="lemma">subst_TGuard</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisCombination_insert"><span class="id" title="lemma">EnvironmentDisCombination_insert</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">e0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">env1'</span> [<span class="id" title="var">env2'</span> [<span class="id" title="var">L1</span> [<span class="id" title="var">L2</span> [<span class="id" title="var">Dis'</span> [[<span class="id" title="var">Eq1</span> <span class="id" title="var">Eq2</span>] | [[<span class="id" title="var">Eq1</span> <span class="id" title="var">Eq2</span>] | [<span class="id" title="var">BT</span> [<span class="id" title="var">Eq1</span> <span class="id" title="var">Eq2</span>]]]]]]]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;in&nbsp;left&nbsp;environment&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_assoc"><span class="id" title="lemma">EnvironmentDis_assoc</span></a> <span class="id" title="var">env4</span> <span class="id" title="var">env1'</span> <span class="id" title="var">env2'</span> <span class="id" title="var">env3</span> <span class="id" title="var">env0</span> <span class="id" title="var">H0</span> <span class="id" title="var">Dis'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">envT</span> [<span class="id" title="var">DisT1</span> <span class="id" title="var">DisT2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">DisT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#GUARD"><span class="id" title="constructor">GUARD</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env1</span> := <span class="id" title="var">envT</span>) (<span class="id" title="var">env2</span> := <span class="id" title="var">env2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Substitution.html#subst_lemma_TValue"><span class="id" title="lemma">subst_lemma_TValue</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">envT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">WT1</span> <span class="id" title="var">WT2</span> <span class="id" title="var">H</span> <span class="id" title="var">DisT2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_Guards_insert_None"><span class="id" title="lemma">subst_Guards_insert_None</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">v0</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;in&nbsp;right&nbsp;environment&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_assoc_rev"><span class="id" title="lemma">EnvironmentDis_assoc_rev</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> <span class="id" title="var">Dis'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">envT</span> [<span class="id" title="var">DisT1</span> <span class="id" title="var">DisT2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">DisT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#GUARD"><span class="id" title="constructor">GUARD</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env1</span> := <span class="id" title="var">env1'</span>) (<span class="id" title="var">env2</span> := <span class="id" title="var">envT</span>) (<span class="id" title="var">f</span> := <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_insert_None"><span class="id" title="lemma">subst_insert_None</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">v0</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">WT1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">WT1</span>; <span class="id" title="var">now</span> <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;in&nbsp;the&nbsp;both&nbsp;terms&nbsp;and&nbsp;is&nbsp;a&nbsp;base&nbsp;type&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisCombination_insert_Type_eq"><span class="id" title="lemma">EnvironmentDisCombination_insert_Type_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">e0</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_assoc_rev"><span class="id" title="lemma">EnvironmentDis_assoc_rev</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> <span class="id" title="var">Dis'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">envT2</span> [<span class="id" title="var">DisT1_2</span> <span class="id" title="var">DisT2_2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_assoc"><span class="id" title="lemma">EnvironmentDis_assoc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> <span class="id" title="var">Dis'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">envT1</span> [<span class="id" title="var">DisT1_1</span> <span class="id" title="var">DisT2_1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#GUARD"><span class="id" title="constructor">GUARD</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">env1</span> := <span class="id" title="var">envT1</span>) (<span class="id" title="var">env2</span> := <span class="id" title="var">envT2</span>) (<span class="id" title="var">f</span> := <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">DisT2_1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Substitution.html#subst_lemma_TValue"><span class="id" title="lemma">subst_lemma_TValue</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">envT1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">WT1</span> <span class="id" title="var">WT2</span> <span class="id" title="var">H</span> <span class="id" title="var">DisT2_1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDis_Comb_comm"><span class="id" title="lemma">EnvironmentDis_Comb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">DisT2_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_insert_inv"><span class="id" title="lemma">EnvironmentSubtype_insert_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">env2'</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">Sub'</span> [<span class="id" title="var">EnvSub'</span> [[<span class="id" title="var">Eq</span> <span class="id" title="var">Un</span>] | <span class="id" title="var">Eq</span>]]]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_insert_None"><span class="id" title="lemma">subst_insert_None</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">v</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">WT1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Substitution.html#WellTypedTerm_TValue_Un"><span class="id" title="lemma">WellTypedTerm_TValue_Un</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">WT2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">WT2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">env''</span> [<span class="id" title="var">Empty''</span> <span class="id" title="var">EnvSub''</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvDis_Sub"><span class="id" title="lemma">EnvDis_Sub</span></a> <span class="id" title="var">env0</span> <span class="id" title="var">env3</span> <span class="id" title="var">env2'</span> <span class="id" title="var">env''</span> <span class="id" title="var">env</span> <span class="id" title="var">EnvSub'</span> <span class="id" title="var">EnvSub''</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">envE</span> [<span class="id" title="var">SubE</span> <span class="id" title="var">DisE</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvDis_EmptyEnv_right"><span class="id" title="lemma">EnvDis_EmptyEnv_right</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Empty''</span> <span class="id" title="var">DisE</span>); <span class="id" title="tactic">intros</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SUB"><span class="id" title="constructor">SUB</span></a>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_trans"><span class="id" title="lemma">Subtype_trans</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">t2</span> := <span class="id" title="var">A</span>); <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvDis_Sub"><span class="id" title="lemma">EnvDis_Sub</span></a> <span class="id" title="var">env0</span> <span class="id" title="var">env3</span> <span class="id" title="var">env2'</span> <span class="id" title="var">env3</span> <span class="id" title="var">env</span> <span class="id" title="var">EnvSub'</span> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_refl"><span class="id" title="lemma">EnvironmentSubtype_refl</span></a> <span class="id" title="var">env3</span>) <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">env''</span> [<span class="id" title="var">EnvSub''</span> <span class="id" title="var">Dis''</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SUB"><span class="id" title="constructor">SUB</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_trans"><span class="id" title="lemma">Subtype_trans</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">environment</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SINGLE"><span class="id" title="constructor">SINGLE</span></a>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#SEQ"><span class="id" title="constructor">SEQ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHWT0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">generalize</span> (<span class="id" title="var">IHWT1</span> <span class="id" title="var">v</span> <span class="id" title="var">x</span> <span class="id" title="var">A</span> <span class="id" title="var">A'</span> <span class="id" title="var">env0</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">G</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_subst_goal</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#FREE"><span class="id" title="constructor">FREE</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">G</span>. <span class="id" title="var">now</span> <span class="id" title="var">simpl_subst_goal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Substitution.html#subst_GReceive"><span class="id" title="lemma">subst_GReceive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MailboxTypes.TypingRules.html#RECEIVE"><span class="id" title="constructor">RECEIVE</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">admit</span>. <span class="comment">(*&nbsp;Need&nbsp;lemma&nbsp;about&nbsp;base&nbsp;env*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Dblib.Environments.html#raw_insert_zero"><span class="id" title="lemma">raw_insert_zero</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MailboxTypes.Substitution.html#subs_properties"><span class="id" title="section">subs_properties</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
