<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">MailboxTypes.Environment</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab8"></a><h1 class="section">Typing environments</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MailboxTypes</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="MailboxTypes.Types.html#"><span class="id" title="library">Types</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MailboxTypes</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MailboxTypes.Util.html#"><span class="id" title="library">Util</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Lists.List</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">ListNotations</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Lia</span>.<br/>

<br/>
<span class="id" title="keyword">Generalizable All Variables</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab9"></a><h2 class="section">Definition of environments and operations on them</h2>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="environment_def" class="idref" href="#environment_def"><span class="id" title="section">environment_def</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> `{<a id="environment_def.M" class="idref" href="#environment_def.M"><span class="id" title="variable">M</span></a> : <a class="idref" href="MailboxTypes.Message.html#IMessage"><span class="id" title="class">IMessage</span></a> <span class="id" title="var">Message</span>}.<br/>

<br/>
</div>

<div class="doc">
A type environment is represented as a list of option types.
    For example the environment <span class="inlinecode">[<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>,</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a></span> <span class="inlinecode"><span class="id" title="var">Int</span>,</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a></span> <span class="inlinecode"><span class="id" title="var">Bool</span>,</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>]</span>
    represents
    0 |-&gt; None
    1 |-&gt; Int
    2 |-&gt; Bool
    3 |-&gt; None

<div class="paragraph"> </div>

   This represented is chosen to keep avoid shifting de Bruijn indices
when splitting an environment.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="Env" class="idref" href="#Env"><span class="id" title="definition">Env</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MailboxTypes.Types.html#TUsage"><span class="id" title="inductive">TUsage</span></a>).<br/>

<br/>
</div>

<div class="doc">
Lookup the type of an variable in an environment 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="lookup" class="idref" href="#lookup"><span class="id" title="definition">lookup</span></a> (<a id="n:3" class="idref" href="#n:3"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="env:4" class="idref" href="#env:4"><span class="id" title="binder">env</span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MailboxTypes.Types.html#TUsage"><span class="id" title="inductive">TUsage</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MailboxTypes.Environment.html#n:3"><span class="id" title="variable">n</span></a>, <a class="idref" href="MailboxTypes.Environment.html#env:4"><span class="id" title="variable">env</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;| 0, (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env'</span>) =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;| 0, (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">T</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env'</span>) =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">T</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n'</span>, (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env'</span>) =&gt; <a class="idref" href="MailboxTypes.Environment.html#lookup:5"><span class="id" title="definition">lookup</span></a> <span class="id" title="var">n'</span> <span class="id" title="var">env'</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Convert a list of types to an environment. This reverses the list. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="toEnv" class="idref" href="#toEnv"><span class="id" title="definition">toEnv</span></a> (<a id="l:8" class="idref" href="#l:8"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MailboxTypes.Types.html#TUsage"><span class="id" title="inductive">TUsage</span></a>) : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="definition">rev</span> <a class="idref" href="MailboxTypes.Environment.html#l:8"><span class="id" title="variable">l</span></a>).<br/>

<br/>
</div>

<div class="doc">
Definition 3.4 of environment subtyping.
    Subtyping of environments includes weakening for unrestricted types.
    This representation relates two environments of equal length, but
    they may contain different amounts of types

</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="EnvironmentSubtype" class="idref" href="#EnvironmentSubtype"><span class="id" title="definition, inductive"><span id="EnvironmentSubtype_ind" class="id"><span id="EnvironmentSubtype_sind" class="id">EnvironmentSubtype</span></span></span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="EnvSubtypeEmpty" class="idref" href="#EnvSubtypeEmpty"><span class="id" title="constructor">EnvSubtypeEmpty</span></a> : <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype:9"><span class="id" title="inductive">EnvironmentSubtype</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;| <a id="EnvSubtypeNone" class="idref" href="#EnvSubtypeNone"><span class="id" title="constructor">EnvSubtypeNone</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:11" class="idref" href="#env1:11"><span class="id" title="binder">env1</span></a> <a id="env2:12" class="idref" href="#env2:12"><span class="id" title="binder">env2</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype:9"><span class="id" title="inductive">EnvironmentSubtype</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:11"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:12"><span class="id" title="variable">env2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype:9"><span class="id" title="inductive">EnvironmentSubtype</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:11"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:12"><span class="id" title="variable">env2</span></a>)<br/>
&nbsp;&nbsp;| <a id="EnvSubtypeUn" class="idref" href="#EnvSubtypeUn"><span class="id" title="constructor">EnvSubtypeUn</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:13" class="idref" href="#env1:13"><span class="id" title="binder">env1</span></a> <a id="env2:14" class="idref" href="#env2:14"><span class="id" title="binder">env2</span></a> <a id="T:15" class="idref" href="#T:15"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Types.html#Unrestricted"><span class="id" title="inductive">Unrestricted</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:15"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype:9"><span class="id" title="inductive">EnvironmentSubtype</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:13"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:14"><span class="id" title="variable">env2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype:9"><span class="id" title="inductive">EnvironmentSubtype</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:15"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:13"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:14"><span class="id" title="variable">env2</span></a>)<br/>
&nbsp;&nbsp;| <a id="EnvSubtypeSub" class="idref" href="#EnvSubtypeSub"><span class="id" title="constructor">EnvSubtypeSub</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:16" class="idref" href="#env1:16"><span class="id" title="binder">env1</span></a> <a id="env2:17" class="idref" href="#env2:17"><span class="id" title="binder">env2</span></a> <a id="T1:18" class="idref" href="#T1:18"><span class="id" title="binder">T1</span></a> <a id="T2:19" class="idref" href="#T2:19"><span class="id" title="binder">T2</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Types.html#Subtype"><span class="id" title="inductive">Subtype</span></a> <a class="idref" href="MailboxTypes.Environment.html#T1:18"><span class="id" title="variable">T1</span></a> <a class="idref" href="MailboxTypes.Environment.html#T2:19"><span class="id" title="variable">T2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype:9"><span class="id" title="inductive">EnvironmentSubtype</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:16"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:17"><span class="id" title="variable">env2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype:9"><span class="id" title="inductive">EnvironmentSubtype</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T1:18"><span class="id" title="variable">T1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:16"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T2:19"><span class="id" title="variable">T2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:17"><span class="id" title="variable">env2</span></a>)<br/>
&nbsp;&nbsp;| <a id="EnvSubtypeTrans" class="idref" href="#EnvSubtypeTrans"><span class="id" title="constructor">EnvSubtypeTrans</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:20" class="idref" href="#env1:20"><span class="id" title="binder">env1</span></a> <a id="env2:21" class="idref" href="#env2:21"><span class="id" title="binder">env2</span></a> <a id="env3:22" class="idref" href="#env3:22"><span class="id" title="binder">env3</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype:9"><span class="id" title="inductive">EnvironmentSubtype</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:20"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:21"><span class="id" title="variable">env2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype:9"><span class="id" title="inductive">EnvironmentSubtype</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:21"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env3:22"><span class="id" title="variable">env3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype:9"><span class="id" title="inductive">EnvironmentSubtype</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:20"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env3:22"><span class="id" title="variable">env3</span></a><br/>
&nbsp;&nbsp;| <a id="EnvSubtypeRefl" class="idref" href="#EnvSubtypeRefl"><span class="id" title="constructor">EnvSubtypeRefl</span></a> : <span class="id" title="keyword">forall</span> <a id="env:23" class="idref" href="#env:23"><span class="id" title="binder">env</span></a>, <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype:9"><span class="id" title="inductive">EnvironmentSubtype</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:23"><span class="id" title="variable">env</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:23"><span class="id" title="variable">env</span></a>.<br/>

<br/>
</div>

<div class="doc">
Strict environment subtyping.
    Strict subtyping of environments is same as normal
    subtyping but the domains of both environments must be
    equal. In our representation this means that for every
    index in every list, both contain either None or Some.

</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="EnvironmentSubtypeStrict" class="idref" href="#EnvironmentSubtypeStrict"><span class="id" title="definition, inductive"><span id="EnvironmentSubtypeStrict_ind" class="id"><span id="EnvironmentSubtypeStrict_sind" class="id">EnvironmentSubtypeStrict</span></span></span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="EnvSubtypeStrEmpty" class="idref" href="#EnvSubtypeStrEmpty"><span class="id" title="constructor">EnvSubtypeStrEmpty</span></a> : <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtypeStrict:24"><span class="id" title="inductive">EnvironmentSubtypeStrict</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;| <a id="EnvSubtypeStrNone" class="idref" href="#EnvSubtypeStrNone"><span class="id" title="constructor">EnvSubtypeStrNone</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:26" class="idref" href="#env1:26"><span class="id" title="binder">env1</span></a> <a id="env2:27" class="idref" href="#env2:27"><span class="id" title="binder">env2</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtypeStrict:24"><span class="id" title="inductive">EnvironmentSubtypeStrict</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:26"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:27"><span class="id" title="variable">env2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtypeStrict:24"><span class="id" title="inductive">EnvironmentSubtypeStrict</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:26"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:27"><span class="id" title="variable">env2</span></a>)<br/>
&nbsp;&nbsp;| <a id="EnvSubtypeStrSub" class="idref" href="#EnvSubtypeStrSub"><span class="id" title="constructor">EnvSubtypeStrSub</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:28" class="idref" href="#env1:28"><span class="id" title="binder">env1</span></a> <a id="env2:29" class="idref" href="#env2:29"><span class="id" title="binder">env2</span></a> <a id="T1:30" class="idref" href="#T1:30"><span class="id" title="binder">T1</span></a> <a id="T2:31" class="idref" href="#T2:31"><span class="id" title="binder">T2</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Types.html#Subtype"><span class="id" title="inductive">Subtype</span></a> <a class="idref" href="MailboxTypes.Environment.html#T1:30"><span class="id" title="variable">T1</span></a> <a class="idref" href="MailboxTypes.Environment.html#T2:31"><span class="id" title="variable">T2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtypeStrict:24"><span class="id" title="inductive">EnvironmentSubtypeStrict</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:28"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:29"><span class="id" title="variable">env2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtypeStrict:24"><span class="id" title="inductive">EnvironmentSubtypeStrict</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T1:30"><span class="id" title="variable">T1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:28"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T2:31"><span class="id" title="variable">T2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:29"><span class="id" title="variable">env2</span></a>)<br/>
&nbsp;&nbsp;| <a id="EnvSubtypeStrTrans" class="idref" href="#EnvSubtypeStrTrans"><span class="id" title="constructor">EnvSubtypeStrTrans</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:32" class="idref" href="#env1:32"><span class="id" title="binder">env1</span></a> <a id="env2:33" class="idref" href="#env2:33"><span class="id" title="binder">env2</span></a> <a id="env3:34" class="idref" href="#env3:34"><span class="id" title="binder">env3</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtypeStrict:24"><span class="id" title="inductive">EnvironmentSubtypeStrict</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:32"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:33"><span class="id" title="variable">env2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtypeStrict:24"><span class="id" title="inductive">EnvironmentSubtypeStrict</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:33"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env3:34"><span class="id" title="variable">env3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtypeStrict:24"><span class="id" title="inductive">EnvironmentSubtypeStrict</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:32"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env3:34"><span class="id" title="variable">env3</span></a><br/>
&nbsp;&nbsp;| <a id="EnvSubtypeStrRefl" class="idref" href="#EnvSubtypeStrRefl"><span class="id" title="constructor">EnvSubtypeStrRefl</span></a> : <span class="id" title="keyword">forall</span> <a id="env:35" class="idref" href="#env:35"><span class="id" title="binder">env</span></a>, <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtypeStrict:24"><span class="id" title="inductive">EnvironmentSubtypeStrict</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:35"><span class="id" title="variable">env</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:35"><span class="id" title="variable">env</span></a>.<br/>

<br/>
</div>

<div class="doc">
Definition 3.8 of environment combination.
    This representation relates three environments of equal length, but
    they may contain different amounts of types

</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="EnvironmentCombination" class="idref" href="#EnvironmentCombination"><span class="id" title="definition, inductive"><span id="EnvironmentCombination_ind" class="id"><span id="EnvironmentCombination_sind" class="id">EnvironmentCombination</span></span></span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="EnvCombEmpty" class="idref" href="#EnvCombEmpty"><span class="id" title="constructor">EnvCombEmpty</span></a> : <a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination:36"><span class="id" title="inductive">EnvironmentCombination</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Special&nbsp;constructor&nbsp;for&nbsp;our&nbsp;representation&nbsp;of&nbsp;environments&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;Check&nbsp;if&nbsp;this&nbsp;is&nbsp;correct&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a id="EnvCombNone" class="idref" href="#EnvCombNone"><span class="id" title="constructor">EnvCombNone</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:38" class="idref" href="#env1:38"><span class="id" title="binder">env1</span></a> <a id="env2:39" class="idref" href="#env2:39"><span class="id" title="binder">env2</span></a> <a id="env:40" class="idref" href="#env:40"><span class="id" title="binder">env</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination:36"><span class="id" title="inductive">EnvironmentCombination</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:38"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:39"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:40"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination:36"><span class="id" title="inductive">EnvironmentCombination</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:38"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:39"><span class="id" title="variable">env2</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:40"><span class="id" title="variable">env</span></a>)<br/>
&nbsp;&nbsp;| <a id="EnvCombLeft" class="idref" href="#EnvCombLeft"><span class="id" title="constructor">EnvCombLeft</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:41" class="idref" href="#env1:41"><span class="id" title="binder">env1</span></a> <a id="env2:42" class="idref" href="#env2:42"><span class="id" title="binder">env2</span></a> <a id="env:43" class="idref" href="#env:43"><span class="id" title="binder">env</span></a> <a id="T:44" class="idref" href="#T:44"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination:36"><span class="id" title="inductive">EnvironmentCombination</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:41"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:42"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:43"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination:36"><span class="id" title="inductive">EnvironmentCombination</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:44"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:41"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:42"><span class="id" title="variable">env2</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:44"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:43"><span class="id" title="variable">env</span></a>)<br/>
&nbsp;&nbsp;| <a id="EnvCombRight" class="idref" href="#EnvCombRight"><span class="id" title="constructor">EnvCombRight</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:45" class="idref" href="#env1:45"><span class="id" title="binder">env1</span></a> <a id="env2:46" class="idref" href="#env2:46"><span class="id" title="binder">env2</span></a> <a id="env:47" class="idref" href="#env:47"><span class="id" title="binder">env</span></a> <a id="T:48" class="idref" href="#T:48"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination:36"><span class="id" title="inductive">EnvironmentCombination</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:45"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:46"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:47"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination:36"><span class="id" title="inductive">EnvironmentCombination</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:45"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:48"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:46"><span class="id" title="variable">env2</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:48"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:47"><span class="id" title="variable">env</span></a>)<br/>
&nbsp;&nbsp;| <a id="EnvCombBoth" class="idref" href="#EnvCombBoth"><span class="id" title="constructor">EnvCombBoth</span></a> : <span class="id" title="keyword">forall</span> <a id="T:49" class="idref" href="#T:49"><span class="id" title="binder">T</span></a> <a id="env1:50" class="idref" href="#env1:50"><span class="id" title="binder">env1</span></a> <a id="env2:51" class="idref" href="#env2:51"><span class="id" title="binder">env2</span></a> <a id="env:52" class="idref" href="#env:52"><span class="id" title="binder">env</span></a> <a id="T1:53" class="idref" href="#T1:53"><span class="id" title="binder">T1</span></a> <a id="T2:54" class="idref" href="#T2:54"><span class="id" title="binder">T2</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination:36"><span class="id" title="inductive">EnvironmentCombination</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:50"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:51"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:52"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#T1:53"><span class="id" title="variable">T1</span></a> <a class="idref" href="MailboxTypes.Types.html#327002ea5989f321936dd053eeac2f91"><span class="id" title="notation">▷</span></a> <a class="idref" href="MailboxTypes.Environment.html#T2:54"><span class="id" title="variable">T2</span></a> <a class="idref" href="MailboxTypes.Types.html#327002ea5989f321936dd053eeac2f91"><span class="id" title="notation">~=</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:49"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination:36"><span class="id" title="inductive">EnvironmentCombination</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T1:53"><span class="id" title="variable">T1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:50"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T2:54"><span class="id" title="variable">T2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:51"><span class="id" title="variable">env2</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:49"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:52"><span class="id" title="variable">env</span></a>).<br/>

<br/>
</div>

<div class="doc">
Definition 3.9 of disjoint environment combination.
    This representation relates three environments of equal length, but
    they may contain different amounts of types

</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="EnvironmentDisjointCombination" class="idref" href="#EnvironmentDisjointCombination"><span class="id" title="definition, inductive"><span id="EnvironmentDisjointCombination_ind" class="id"><span id="EnvironmentDisjointCombination_sind" class="id">EnvironmentDisjointCombination</span></span></span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="EnvDisCombEmpty" class="idref" href="#EnvDisCombEmpty"><span class="id" title="constructor">EnvDisCombEmpty</span></a> : <a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination:55"><span class="id" title="inductive">EnvironmentDisjointCombination</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Special&nbsp;constructor&nbsp;for&nbsp;our&nbsp;representation&nbsp;of&nbsp;environments&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;Check&nbsp;if&nbsp;this&nbsp;is&nbsp;correct&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a id="EnvDisCombNone" class="idref" href="#EnvDisCombNone"><span class="id" title="constructor">EnvDisCombNone</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:57" class="idref" href="#env1:57"><span class="id" title="binder">env1</span></a> <a id="env2:58" class="idref" href="#env2:58"><span class="id" title="binder">env2</span></a> <a id="env:59" class="idref" href="#env:59"><span class="id" title="binder">env</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination:55"><span class="id" title="inductive">EnvironmentDisjointCombination</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:57"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:58"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:59"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination:55"><span class="id" title="inductive">EnvironmentDisjointCombination</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:57"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:58"><span class="id" title="variable">env2</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:59"><span class="id" title="variable">env</span></a>)<br/>
&nbsp;&nbsp;| <a id="EnvDisCombLeft" class="idref" href="#EnvDisCombLeft"><span class="id" title="constructor">EnvDisCombLeft</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:60" class="idref" href="#env1:60"><span class="id" title="binder">env1</span></a> <a id="env2:61" class="idref" href="#env2:61"><span class="id" title="binder">env2</span></a> <a id="env:62" class="idref" href="#env:62"><span class="id" title="binder">env</span></a> <a id="T:63" class="idref" href="#T:63"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination:55"><span class="id" title="inductive">EnvironmentDisjointCombination</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:60"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:61"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:62"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination:55"><span class="id" title="inductive">EnvironmentDisjointCombination</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:63"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:60"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:61"><span class="id" title="variable">env2</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:63"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:62"><span class="id" title="variable">env</span></a>)<br/>
&nbsp;&nbsp;| <a id="EnvDisCombRight" class="idref" href="#EnvDisCombRight"><span class="id" title="constructor">EnvDisCombRight</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:64" class="idref" href="#env1:64"><span class="id" title="binder">env1</span></a> <a id="env2:65" class="idref" href="#env2:65"><span class="id" title="binder">env2</span></a> <a id="env:66" class="idref" href="#env:66"><span class="id" title="binder">env</span></a> <a id="T:67" class="idref" href="#T:67"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination:55"><span class="id" title="inductive">EnvironmentDisjointCombination</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:64"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:65"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:66"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination:55"><span class="id" title="inductive">EnvironmentDisjointCombination</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:64"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:67"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:65"><span class="id" title="variable">env2</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:67"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:66"><span class="id" title="variable">env</span></a>)<br/>
&nbsp;&nbsp;| <a id="EnvDisCombBoth" class="idref" href="#EnvDisCombBoth"><span class="id" title="constructor">EnvDisCombBoth</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:68" class="idref" href="#env1:68"><span class="id" title="binder">env1</span></a> <a id="env2:69" class="idref" href="#env2:69"><span class="id" title="binder">env2</span></a> <a id="env:70" class="idref" href="#env:70"><span class="id" title="binder">env</span></a> <a id="BT:71" class="idref" href="#BT:71"><span class="id" title="binder">BT</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination:55"><span class="id" title="inductive">EnvironmentDisjointCombination</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:68"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:69"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:70"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination:55"><span class="id" title="inductive">EnvironmentDisjointCombination</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <a class="idref" href="MailboxTypes.Environment.html#BT:71"><span class="id" title="variable">BT</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:68"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <a class="idref" href="MailboxTypes.Environment.html#BT:71"><span class="id" title="variable">BT</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:69"><span class="id" title="variable">env2</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <a class="idref" href="MailboxTypes.Environment.html#BT:71"><span class="id" title="variable">BT</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:70"><span class="id" title="variable">env</span></a>).<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="EnvironmentDisjointCombinationN" class="idref" href="#EnvironmentDisjointCombinationN"><span class="id" title="definition, inductive"><span id="EnvironmentDisjointCombinationN_ind" class="id"><span id="EnvironmentDisjointCombinationN_sind" class="id">EnvironmentDisjointCombinationN</span></span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="EnvDisComb1" class="idref" href="#EnvDisComb1"><span class="id" title="constructor">EnvDisComb1</span></a> : <span class="id" title="keyword">forall</span> <a id="env:74" class="idref" href="#env:74"><span class="id" title="binder">env</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombinationN:72"><span class="id" title="inductive">EnvironmentDisjointCombinationN</span></a> <span class="id" title="notation">[</span><a class="idref" href="MailboxTypes.Environment.html#env:74"><span class="id" title="variable">env</span></a><span class="id" title="notation">]</span> <a class="idref" href="MailboxTypes.Environment.html#env:74"><span class="id" title="variable">env</span></a><br/>
&nbsp;&nbsp;| <a id="EnvDisComb2" class="idref" href="#EnvDisComb2"><span class="id" title="constructor">EnvDisComb2</span></a> : <span class="id" title="keyword">forall</span> <a id="env:75" class="idref" href="#env:75"><span class="id" title="binder">env</span></a> <a id="env1:76" class="idref" href="#env1:76"><span class="id" title="binder">env1</span></a> <a id="env2:77" class="idref" href="#env2:77"><span class="id" title="binder">env2</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination"><span class="id" title="inductive">EnvironmentDisjointCombination</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:76"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:77"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:75"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombinationN:72"><span class="id" title="inductive">EnvironmentDisjointCombinationN</span></a> <span class="id" title="notation">[</span><a class="idref" href="MailboxTypes.Environment.html#env1:76"><span class="id" title="variable">env1</span></a> <span class="id" title="notation">;</span> <a class="idref" href="MailboxTypes.Environment.html#env2:77"><span class="id" title="variable">env2</span></a><span class="id" title="notation">]</span> <a class="idref" href="MailboxTypes.Environment.html#env:75"><span class="id" title="variable">env</span></a><br/>
&nbsp;&nbsp;| <a id="EnvDisCombN" class="idref" href="#EnvDisCombN"><span class="id" title="constructor">EnvDisCombN</span></a> : <span class="id" title="keyword">forall</span> <a id="env:78" class="idref" href="#env:78"><span class="id" title="binder">env</span></a> <a id="env1:79" class="idref" href="#env1:79"><span class="id" title="binder">env1</span></a> <a id="env2:80" class="idref" href="#env2:80"><span class="id" title="binder">env2</span></a> <a id="env3:81" class="idref" href="#env3:81"><span class="id" title="binder">env3</span></a> <a id="envList:82" class="idref" href="#envList:82"><span class="id" title="binder">envList</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination"><span class="id" title="inductive">EnvironmentDisjointCombination</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:79"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:80"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env3:81"><span class="id" title="variable">env3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombinationN:72"><span class="id" title="inductive">EnvironmentDisjointCombinationN</span></a> (<a class="idref" href="MailboxTypes.Environment.html#env3:81"><span class="id" title="variable">env3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#envList:82"><span class="id" title="variable">envList</span></a>) <a class="idref" href="MailboxTypes.Environment.html#env:78"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombinationN:72"><span class="id" title="inductive">EnvironmentDisjointCombinationN</span></a> (<a class="idref" href="MailboxTypes.Environment.html#env1:79"><span class="id" title="variable">env1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:80"><span class="id" title="variable">env2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#envList:82"><span class="id" title="variable">envList</span></a>) <a class="idref" href="MailboxTypes.Environment.html#env:78"><span class="id" title="variable">env</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="returnEnvironment" class="idref" href="#returnEnvironment"><span class="id" title="definition">returnEnvironment</span></a> (<a id="env:83" class="idref" href="#env:83"><span class="id" title="binder">env</span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a>) : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> := <a class="idref" href="MailboxTypes.Util.html#map_maybe"><span class="id" title="definition">map_maybe</span></a> <a class="idref" href="MailboxTypes.Types.html#returnUsage"><span class="id" title="definition">returnUsage</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:83"><span class="id" title="variable">env</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="secondEnvironment" class="idref" href="#secondEnvironment"><span class="id" title="definition">secondEnvironment</span></a> (<a id="env:84" class="idref" href="#env:84"><span class="id" title="binder">env</span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a>) : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> := <a class="idref" href="MailboxTypes.Util.html#map_maybe"><span class="id" title="definition">map_maybe</span></a> <a class="idref" href="MailboxTypes.Types.html#secondUsage"><span class="id" title="definition">secondUsage</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:84"><span class="id" title="variable">env</span></a>.<br/>

<br/>
</div>

<div class="doc">
An environment is Base if it only contains base types 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="BaseEnv" class="idref" href="#BaseEnv"><span class="id" title="definition">BaseEnv</span></a> (<a id="e:85" class="idref" href="#e:85"><span class="id" title="binder">e</span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MailboxTypes.Environment.html#e:85"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;| (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MailboxTypes.Types.html#TUBase"><span class="id" title="constructor">TUBase</span></a> <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env'</span>) =&gt; <a class="idref" href="MailboxTypes.Environment.html#BaseEnv:86"><span class="id" title="definition">BaseEnv</span></a> <span class="id" title="var">env'</span><br/>
&nbsp;&nbsp;| (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env'</span>) =&gt; <a class="idref" href="MailboxTypes.Environment.html#BaseEnv:86"><span class="id" title="definition">BaseEnv</span></a> <span class="id" title="var">env'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="CruftEnv" class="idref" href="#CruftEnv"><span class="id" title="definition">CruftEnv</span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Util.html#ForallMaybe"><span class="id" title="definition">ForallMaybe</span></a> <a class="idref" href="MailboxTypes.Types.html#TUCruft"><span class="id" title="definition">TUCruft</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="UnrestrictedEnv" class="idref" href="#UnrestrictedEnv"><span class="id" title="definition">UnrestrictedEnv</span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Util.html#ForallMaybe"><span class="id" title="definition">ForallMaybe</span></a> <a class="idref" href="MailboxTypes.Types.html#Unrestricted"><span class="id" title="inductive">Unrestricted</span></a>.<br/>

<br/>
</div>

<div class="doc">
An empty environment contains only None as entries 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="EmptyEnv" class="idref" href="#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> (<a id="e:88" class="idref" href="#e:88"><span class="id" title="binder">e</span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a>) : <span class="id" title="keyword">Prop</span> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="x:89" class="idref" href="#x:89"><span class="id" title="binder">x</span></a> =&gt; <a class="idref" href="MailboxTypes.Environment.html#x:89"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="MailboxTypes.Environment.html#e:88"><span class="id" title="variable">e</span></a>.<br/>

<br/>
</div>

<div class="doc">
A singleton environment contains only a single type 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="SingletonEnv" class="idref" href="#SingletonEnv"><span class="id" title="definition">SingletonEnv</span></a> (<a id="e:90" class="idref" href="#e:90"><span class="id" title="binder">e</span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MailboxTypes.Environment.html#e:90"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">e'</span> =&gt; <a class="idref" href="MailboxTypes.Environment.html#SingletonEnv:91"><span class="id" title="definition">SingletonEnv</span></a> <span class="id" title="var">e'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">e'</span> =&gt; <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> <span class="id" title="var">e'</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Creates an empty environment based on the size of the provided environment 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="create_EmptyEnv" class="idref" href="#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> (<a id="e:93" class="idref" href="#e:93"><span class="id" title="binder">e</span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a>) : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MailboxTypes.Environment.html#e:93"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">e'</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv:94"><span class="id" title="definition">create_EmptyEnv</span></a> <span class="id" title="var">e'</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MailboxTypes.Environment.html#environment_def"><span class="id" title="section">environment_def</span></a>.<br/>

<br/>
</div>

<div class="doc">
Notation for environments 
</div>
<div class="code">
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">environment_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">environment_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="02646f3c0eda21d78eccefe79f1b4b6b" class="idref" href="#02646f3c0eda21d78eccefe79f1b4b6b"><span class="id" title="notation">&quot;</span></a>Env1 ≤ₑ Env2" := (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype"><span class="id" title="inductive">EnvironmentSubtype</span></a> <span class="id" title="var">Env1</span> <span class="id" title="var">Env2</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80) : <span class="id" title="var">environment_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="22c8f7a63b68a1c7f51b8c6d9a892198" class="idref" href="#22c8f7a63b68a1c7f51b8c6d9a892198"><span class="id" title="notation">&quot;</span></a>Env1 ≼ₑ Env2" := (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtypeStrict"><span class="id" title="inductive">EnvironmentSubtypeStrict</span></a> <span class="id" title="var">Env1</span> <span class="id" title="var">Env2</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80) : <span class="id" title="var">environment_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="46d2edd125042a1c06882f2bd42d6000" class="idref" href="#46d2edd125042a1c06882f2bd42d6000"><span class="id" title="notation">&quot;</span></a>Env1 ▷ₑ Env2 ~= Env" := (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentCombination"><span class="id" title="inductive">EnvironmentCombination</span></a> <span class="id" title="var">Env1</span> <span class="id" title="var">Env2</span> <span class="id" title="var">Env</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80) : <span class="id" title="var">environment_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="47f92b61fc5202dedf3649e479db00ed" class="idref" href="#47f92b61fc5202dedf3649e479db00ed"><span class="id" title="notation">&quot;</span></a>Env1 +ₑ Env2 ~= Env" := (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombination"><span class="id" title="inductive">EnvironmentDisjointCombination</span></a> <span class="id" title="var">Env1</span> <span class="id" title="var">Env2</span> <span class="id" title="var">Env</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80) : <span class="id" title="var">environment_scope</span>.<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;Change&nbsp;the&nbsp;below&nbsp;notation.&nbsp;It&nbsp;sometimes&nbsp;collides&nbsp;with&nbsp;list&nbsp;notations&nbsp;*)</span><br/>
<span class="id" title="keyword">Notation</span> <a id="9915f73e4ec13ee83192afedde6b8795" class="idref" href="#9915f73e4ec13ee83192afedde6b8795"><span class="id" title="notation">&quot;</span></a>[ Env1 ]+ₑ ~= Env" := (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentDisjointCombinationN"><span class="id" title="inductive">EnvironmentDisjointCombinationN</span></a> <span class="id" title="var">Env1</span> <span class="id" title="var">Env</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0) : <span class="id" title="var">environment_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="7e627fb760210e3fc16744ce3d28318d" class="idref" href="#7e627fb760210e3fc16744ce3d28318d"><span class="id" title="notation">&quot;</span></a>⌊ Env ⌋ₑ" := (<a class="idref" href="MailboxTypes.Environment.html#returnEnvironment"><span class="id" title="definition">returnEnvironment</span></a> <span class="id" title="var">Env</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0) : <span class="id" title="var">environment_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="b45f5777e87a3824c108430310326b5d" class="idref" href="#b45f5777e87a3824c108430310326b5d"><span class="id" title="notation">&quot;</span></a>⌈ Env ⌉ₑ" := (<a class="idref" href="MailboxTypes.Environment.html#secondEnvironment"><span class="id" title="definition">secondEnvironment</span></a> <span class="id" title="var">Env</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0) : <span class="id" title="var">environment_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="environment_test" class="idref" href="#environment_test"><span class="id" title="section">environment_test</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> `{<a id="environment_test.M" class="idref" href="#environment_test.M"><span class="id" title="variable">M</span></a> : <a class="idref" href="MailboxTypes.Message.html#IMessage"><span class="id" title="class">IMessage</span></a> <span class="id" title="var">Message</span>}.<br/>

<br/>
<span class="comment">(*&nbsp;This&nbsp;relation&nbsp;states&nbsp;that&nbsp;an&nbsp;environment&nbsp;can&nbsp;be&nbsp;split&nbsp;into&nbsp;two&nbsp;environments&nbsp;**)</span><br/>
<span class="id" title="keyword">Inductive</span> <a id="EnvironmentSplit" class="idref" href="#EnvironmentSplit"><span class="id" title="definition, inductive"><span id="EnvironmentSplit_ind" class="id"><span id="EnvironmentSplit_sind" class="id">EnvironmentSplit</span></span></span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="EnvSplitNil" class="idref" href="#EnvSplitNil"><span class="id" title="constructor">EnvSplitNil</span></a> : <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSplit:98"><span class="id" title="inductive">EnvironmentSplit</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;| <a id="EnvSplitNone" class="idref" href="#EnvSplitNone"><span class="id" title="constructor">EnvSplitNone</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:100" class="idref" href="#env1:100"><span class="id" title="binder">env1</span></a> <a id="env2:101" class="idref" href="#env2:101"><span class="id" title="binder">env2</span></a> <a id="env:102" class="idref" href="#env:102"><span class="id" title="binder">env</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSplit:98"><span class="id" title="inductive">EnvironmentSplit</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:100"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:101"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:102"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSplit:98"><span class="id" title="inductive">EnvironmentSplit</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:100"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:101"><span class="id" title="variable">env2</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:102"><span class="id" title="variable">env</span></a>)<br/>
&nbsp;&nbsp;| <a id="EnvSplitLeft" class="idref" href="#EnvSplitLeft"><span class="id" title="constructor">EnvSplitLeft</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:103" class="idref" href="#env1:103"><span class="id" title="binder">env1</span></a> <a id="env2:104" class="idref" href="#env2:104"><span class="id" title="binder">env2</span></a> <a id="env:105" class="idref" href="#env:105"><span class="id" title="binder">env</span></a> <a id="x:106" class="idref" href="#x:106"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSplit:98"><span class="id" title="inductive">EnvironmentSplit</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:103"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:104"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:105"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSplit:98"><span class="id" title="inductive">EnvironmentSplit</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:106"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:103"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:104"><span class="id" title="variable">env2</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:106"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:105"><span class="id" title="variable">env</span></a>)<br/>
&nbsp;&nbsp;| <a id="EnvSplitRight" class="idref" href="#EnvSplitRight"><span class="id" title="constructor">EnvSplitRight</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:107" class="idref" href="#env1:107"><span class="id" title="binder">env1</span></a> <a id="env2:108" class="idref" href="#env2:108"><span class="id" title="binder">env2</span></a> <a id="env:109" class="idref" href="#env:109"><span class="id" title="binder">env</span></a> <a id="x:110" class="idref" href="#x:110"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSplit:98"><span class="id" title="inductive">EnvironmentSplit</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:107"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:108"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:109"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSplit:98"><span class="id" title="inductive">EnvironmentSplit</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:107"><span class="id" title="variable">env1</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:110"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:108"><span class="id" title="variable">env2</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:110"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:109"><span class="id" title="variable">env</span></a>).<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="EnvironmentSplitN" class="idref" href="#EnvironmentSplitN"><span class="id" title="definition, inductive"><span id="EnvironmentSplitN_ind" class="id"><span id="EnvironmentSplitN_sind" class="id">EnvironmentSplitN</span></span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="EnvSplit2" class="idref" href="#EnvSplit2"><span class="id" title="constructor">EnvSplit2</span></a> : <span class="id" title="keyword">forall</span> <a id="env:113" class="idref" href="#env:113"><span class="id" title="binder">env</span></a> <a id="env1:114" class="idref" href="#env1:114"><span class="id" title="binder">env1</span></a> <a id="env2:115" class="idref" href="#env2:115"><span class="id" title="binder">env2</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSplit"><span class="id" title="inductive">EnvironmentSplit</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:114"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:115"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:113"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSplitN:111"><span class="id" title="inductive">EnvironmentSplitN</span></a> <span class="id" title="notation">[</span><a class="idref" href="MailboxTypes.Environment.html#env1:114"><span class="id" title="variable">env1</span></a> <span class="id" title="notation">;</span> <a class="idref" href="MailboxTypes.Environment.html#env2:115"><span class="id" title="variable">env2</span></a><span class="id" title="notation">]</span> <a class="idref" href="MailboxTypes.Environment.html#env:113"><span class="id" title="variable">env</span></a><br/>
&nbsp;&nbsp;| <a id="EnvSplitN" class="idref" href="#EnvSplitN"><span class="id" title="constructor">EnvSplitN</span></a> : <span class="id" title="keyword">forall</span> <a id="env:116" class="idref" href="#env:116"><span class="id" title="binder">env</span></a> <a id="env1:117" class="idref" href="#env1:117"><span class="id" title="binder">env1</span></a> <a id="env2:118" class="idref" href="#env2:118"><span class="id" title="binder">env2</span></a> <a id="env3:119" class="idref" href="#env3:119"><span class="id" title="binder">env3</span></a> <a id="envList:120" class="idref" href="#envList:120"><span class="id" title="binder">envList</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSplit"><span class="id" title="inductive">EnvironmentSplit</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:117"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:118"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env3:119"><span class="id" title="variable">env3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSplitN:111"><span class="id" title="inductive">EnvironmentSplitN</span></a> (<a class="idref" href="MailboxTypes.Environment.html#env3:119"><span class="id" title="variable">env3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#envList:120"><span class="id" title="variable">envList</span></a>) <a class="idref" href="MailboxTypes.Environment.html#env:116"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSplitN:111"><span class="id" title="inductive">EnvironmentSplitN</span></a> (<a class="idref" href="MailboxTypes.Environment.html#env1:117"><span class="id" title="variable">env1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:118"><span class="id" title="variable">env2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#envList:120"><span class="id" title="variable">envList</span></a>) <a class="idref" href="MailboxTypes.Environment.html#env:116"><span class="id" title="variable">env</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="EnvironmentSplit_elems" class="idref" href="#EnvironmentSplit_elems"><span class="id" title="lemma">EnvironmentSplit_elems</span></a> : <span class="id" title="keyword">forall</span> <a id="env:121" class="idref" href="#env:121"><span class="id" title="binder">env</span></a> <a id="env1:122" class="idref" href="#env1:122"><span class="id" title="binder">env1</span></a> <a id="env2:123" class="idref" href="#env2:123"><span class="id" title="binder">env2</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSplit"><span class="id" title="inductive">EnvironmentSplit</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:122"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:123"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:121"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="x:124" class="idref" href="#x:124"><span class="id" title="binder">x</span></a>, <span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:124"><span class="id" title="variable">x</span></a>) <a class="idref" href="MailboxTypes.Environment.html#env:121"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:124"><span class="id" title="variable">x</span></a>) <a class="idref" href="MailboxTypes.Environment.html#env1:122"><span class="id" title="variable">env1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:124"><span class="id" title="variable">x</span></a>) <a class="idref" href="MailboxTypes.Environment.html#env2:123"><span class="id" title="variable">env2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Split</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">xNone</span> | <span class="id" title="var">xIn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">discriminate</span> <span class="id" title="var">xNone</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHSplit</span> <span class="id" title="tactic">in</span> <span class="id" title="var">xIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">xIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">In1</span> | <span class="id" title="var">In2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">left</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">right</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [[<span class="id" title="var">xNone</span> | <span class="id" title="var">xIn</span>] | [<span class="id" title="var">xNone</span> | <span class="id" title="var">xIn</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">now</span> <span class="id" title="tactic">left</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<span class="id" title="var">In'</span> : <span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">env1</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">env2</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHSplit</span> <span class="id" title="tactic">in</span> <span class="id" title="var">In'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<span class="id" title="var">In'</span> : <span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">env1</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">env2</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHSplit</span> <span class="id" title="tactic">in</span> <span class="id" title="var">In'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">ySome</span> | <span class="id" title="var">yIn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHSplit</span> <span class="id" title="tactic">in</span> <span class="id" title="var">yIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">yIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">In1</span> | <span class="id" title="var">In2</span>]; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [[<span class="id" title="var">ySome</span> | <span class="id" title="var">yIn</span>] | [<span class="id" title="var">yNone</span> | <span class="id" title="var">yIn</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<span class="id" title="var">In'</span> : <span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">y</span>) <span class="id" title="var">env1</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">y</span>) <span class="id" title="var">env2</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHSplit</span> <span class="id" title="tactic">in</span> <span class="id" title="var">In'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">discriminate</span> <span class="id" title="var">yNone</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<span class="id" title="var">In'</span> : <span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">y</span>) <span class="id" title="var">env1</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">y</span>) <span class="id" title="var">env2</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHSplit</span> <span class="id" title="tactic">in</span> <span class="id" title="var">In'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">ySome</span> | <span class="id" title="var">yIn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHSplit</span> <span class="id" title="tactic">in</span> <span class="id" title="var">yIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">yIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">In1</span> | <span class="id" title="var">In2</span>]; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [[<span class="id" title="var">ySome</span> | <span class="id" title="var">yIn</span>] | [<span class="id" title="var">yNone</span> | <span class="id" title="var">yIn</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<span class="id" title="var">In'</span> : <span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">y</span>) <span class="id" title="var">env1</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">y</span>) <span class="id" title="var">env2</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHSplit</span> <span class="id" title="tactic">in</span> <span class="id" title="var">In'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<span class="id" title="var">In'</span> : <span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">y</span>) <span class="id" title="var">env1</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="definition">In</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">y</span>) <span class="id" title="var">env2</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHSplit</span> <span class="id" title="tactic">in</span> <span class="id" title="var">In'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MailboxTypes.Environment.html#environment_test"><span class="id" title="section">environment_test</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="f42e2b3f896780e2396790fafca8c93c" class="idref" href="#f42e2b3f896780e2396790fafca8c93c"><span class="id" title="notation">&quot;</span></a>Env1 ,, Env2 ~= Env" := (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSplit"><span class="id" title="inductive">EnvironmentSplit</span></a> <span class="id" title="var">Env1</span> <span class="id" title="var">Env2</span> <span class="id" title="var">Env</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80) : <span class="id" title="var">environment_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="environment_properties" class="idref" href="#environment_properties"><span class="id" title="section">environment_properties</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> `{<a id="environment_properties.M" class="idref" href="#environment_properties.M"><span class="id" title="variable">M</span></a> : <a class="idref" href="MailboxTypes.Message.html#IMessage"><span class="id" title="class">IMessage</span></a> <span class="id" title="var">Message</span>}.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;Remove&nbsp;if&nbsp;not&nbsp;needed&nbsp;anymore&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
This example shows that environment subtyping is not transitive, since the Unrestricted
    predicate is a syntactic check on a type, NOT a semantic one.
 
</div>
<div class="code">
<span class="comment">(*Example&nbsp;Example_trans1&nbsp;:&nbsp;Some&nbsp;(!&nbsp;𝟙&nbsp;^^&nbsp;•)&nbsp;::&nbsp;None&nbsp;::&nbsp;nil&nbsp;≤ₑ&nbsp;Some&nbsp;(!&nbsp;𝟙&nbsp;^^&nbsp;◦)&nbsp;::&nbsp;None&nbsp;::&nbsp;nil.*)</span><br/>
<span class="comment">(*Proof.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;repeat&nbsp;constructor;&nbsp;&nbsp;apply&nbsp;MPInclusion_refl.*)</span><br/>
<span class="comment">(*Qed.*)</span><br/>
<span class="comment">(*Example&nbsp;Example_trans2&nbsp;:&nbsp;Some&nbsp;(!&nbsp;𝟙&nbsp;^^&nbsp;◦)&nbsp;::&nbsp;None&nbsp;::&nbsp;nil&nbsp;≤ₑ&nbsp;None&nbsp;::&nbsp;None&nbsp;::&nbsp;nil.*)</span><br/>
<span class="comment">(*Proof.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;repeat&nbsp;constructor;&nbsp;&nbsp;apply&nbsp;MPInclusion_refl.*)</span><br/>
<span class="comment">(*Qed.*)</span><br/>
<span class="comment">(*Example&nbsp;Example_trans3&nbsp;:&nbsp;~&nbsp;(Some&nbsp;(!&nbsp;𝟙&nbsp;^^&nbsp;•)&nbsp;::&nbsp;None&nbsp;::&nbsp;nil&nbsp;≤ₑ&nbsp;None&nbsp;::&nbsp;None&nbsp;::&nbsp;nil).*)</span><br/>
<span class="comment">(*Proof.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;intros&nbsp;N;&nbsp;inversion&nbsp;N;&nbsp;subst;&nbsp;inversion&nbsp;H2.*)</span><br/>
<span class="comment">(*Qed.*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="EnvironmentSplit_EmptyEnv" class="idref" href="#EnvironmentSplit_EmptyEnv"><span class="id" title="lemma">EnvironmentSplit_EmptyEnv</span></a> : <span class="id" title="keyword">forall</span> <a id="env:127" class="idref" href="#env:127"><span class="id" title="binder">env</span></a>, <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:127"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:127"><span class="id" title="variable">env</span></a><a class="idref" href="MailboxTypes.Environment.html#f42e2b3f896780e2396790fafca8c93c"><span class="id" title="notation">,,</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:127"><span class="id" title="variable">env</span></a> <a class="idref" href="MailboxTypes.Environment.html#f42e2b3f896780e2396790fafca8c93c"><span class="id" title="notation">~=</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:127"><span class="id" title="variable">env</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Empty</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Empty</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHenv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="EnvironmentSplit_create_EmptyEnv" class="idref" href="#EnvironmentSplit_create_EmptyEnv"><span class="id" title="lemma">EnvironmentSplit_create_EmptyEnv</span></a> : <span class="id" title="keyword">forall</span> <a id="env:128" class="idref" href="#env:128"><span class="id" title="binder">env</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#env:128"><span class="id" title="variable">env</span></a><a class="idref" href="MailboxTypes.Environment.html#f42e2b3f896780e2396790fafca8c93c"><span class="id" title="notation">,,</span></a> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:128"><span class="id" title="variable">env</span></a> <a class="idref" href="MailboxTypes.Environment.html#f42e2b3f896780e2396790fafca8c93c"><span class="id" title="notation">~=</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:128"><span class="id" title="variable">env</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvSplitLeft"><span class="id" title="constructor">EnvSplitLeft</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvSplitNone"><span class="id" title="constructor">EnvSplitNone</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="EmptyEnv_lookup" class="idref" href="#EmptyEnv_lookup"><span class="id" title="lemma">EmptyEnv_lookup</span></a> : <span class="id" title="keyword">forall</span> <a id="env:129" class="idref" href="#env:129"><span class="id" title="binder">env</span></a>, <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:129"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="x:130" class="idref" href="#x:130"><span class="id" title="binder">x</span></a>, <a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:130"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:129"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Empty</span> <span class="id" title="var">x</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Empty</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Empty</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHenv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_nil" class="idref" href="#lookup_nil"><span class="id" title="lemma">lookup_nil</span></a> : <span class="id" title="keyword">forall</span> <a id="x:131" class="idref" href="#x:131"><span class="id" title="binder">x</span></a>, <a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:131"><span class="id" title="variable">x</span></a> <span class="id" title="notation">[]</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_False_cons" class="idref" href="#lookup_False_cons"><span class="id" title="lemma">lookup_False_cons</span></a> : <span class="id" title="keyword">forall</span> <a id="env:132" class="idref" href="#env:132"><span class="id" title="binder">env</span></a>,<br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="x:133" class="idref" href="#x:133"><span class="id" title="binder">x</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="MailboxTypes.Util.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:133"><span class="id" title="variable">x</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:132"><span class="id" title="variable">env</span></a>))<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="x:134" class="idref" href="#x:134"><span class="id" title="binder">x</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="MailboxTypes.Util.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:134"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:132"><span class="id" title="variable">env</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Eq</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">generalize</span> (<span class="id" title="var">Eq</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span>)).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_False_cons_Some" class="idref" href="#lookup_False_cons_Some"><span class="id" title="lemma">lookup_False_cons_Some</span></a> : <span class="id" title="keyword">forall</span> <a id="env:135" class="idref" href="#env:135"><span class="id" title="binder">env</span></a> <a id="T:136" class="idref" href="#T:136"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="x:137" class="idref" href="#x:137"><span class="id" title="binder">x</span></a>, 0 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:137"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="MailboxTypes.Util.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:137"><span class="id" title="variable">x</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:136"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:135"><span class="id" title="variable">env</span></a>))<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="x:138" class="idref" href="#x:138"><span class="id" title="binder">x</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="MailboxTypes.Util.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:138"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:135"><span class="id" title="variable">env</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Eq</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">Eq</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">EqX</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">discriminate</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">discriminate</span> <span class="id" title="var">H0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;Merge&nbsp;both&nbsp;lemmas&nbsp;into&nbsp;one&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_False_EmptyEnv" class="idref" href="#lookup_False_EmptyEnv"><span class="id" title="lemma">lookup_False_EmptyEnv</span></a> : <span class="id" title="keyword">forall</span> <a id="env:139" class="idref" href="#env:139"><span class="id" title="binder">env</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="x:140" class="idref" href="#x:140"><span class="id" title="binder">x</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="MailboxTypes.Util.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:140"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:139"><span class="id" title="variable">env</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:139"><span class="id" title="variable">env</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">generalize</span> (<span class="id" title="var">Eq</span> 0); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHenv</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_False_cons"><span class="id" title="lemma">lookup_False_cons</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_False_EmptyEnv'" class="idref" href="#lookup_False_EmptyEnv'"><span class="id" title="lemma">lookup_False_EmptyEnv'</span></a> : <span class="id" title="keyword">forall</span> <a id="env:141" class="idref" href="#env:141"><span class="id" title="binder">env</span></a>, <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:141"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="x:142" class="idref" href="#x:142"><span class="id" title="binder">x</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="MailboxTypes.Util.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:142"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:141"><span class="id" title="variable">env</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Empty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_nil"><span class="id" title="lemma">lookup_nil</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Empty</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Empty</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHenv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_False_SingletonEnv" class="idref" href="#lookup_False_SingletonEnv"><span class="id" title="lemma">lookup_False_SingletonEnv</span></a> : <span class="id" title="keyword">forall</span> <a id="env:143" class="idref" href="#env:143"><span class="id" title="binder">env</span></a> <a id="n:144" class="idref" href="#n:144"><span class="id" title="binder">n</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="x:145" class="idref" href="#x:145"><span class="id" title="binder">x</span></a>, <a class="idref" href="MailboxTypes.Environment.html#n:144"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:145"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="MailboxTypes.Util.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:145"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:143"><span class="id" title="variable">env</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#SingletonEnv"><span class="id" title="definition">SingletonEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:143"><span class="id" title="variable">env</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">generalize</span> (<span class="id" title="var">Eq</span> 0); <span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_nil"><span class="id" title="lemma">lookup_nil</span></a>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">Eq</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span>)). <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Eq'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_nil"><span class="id" title="lemma">lookup_nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">x</span>). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Eq'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#lookup_False_cons_Some"><span class="id" title="lemma">lookup_False_cons_Some</span></a> <span class="id" title="var">env</span> <span class="id" title="var">t</span> <span class="id" title="var">Eq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Eq'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#lookup_False_EmptyEnv"><span class="id" title="lemma">lookup_False_EmptyEnv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">generalize</span> (<span class="id" title="var">Eq</span> 0); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">Eq</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHenv</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span> := <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">Eq</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span>)). <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Eq'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">x</span>). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_False_n" class="idref" href="#lookup_False_n"><span class="id" title="lemma">lookup_False_n</span></a> : <span class="id" title="keyword">forall</span> <a id="env:146" class="idref" href="#env:146"><span class="id" title="binder">env</span></a> <a id="n:147" class="idref" href="#n:147"><span class="id" title="binder">n</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="x:148" class="idref" href="#x:148"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="MailboxTypes.Environment.html#n:147"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:148"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="MailboxTypes.Util.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:148"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:146"><span class="id" title="variable">env</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="T:149" class="idref" href="#T:149"><span class="id" title="binder">T</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#n:147"><span class="id" title="variable">n</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:146"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:149"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">generalize</span> (<span class="id" title="var">Eq</span> 0); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">generalize</span> (<span class="id" title="var">Eq</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)). <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">generalize</span> (<span class="id" title="var">Eq</span> 0); <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">generalize</span> (<span class="id" title="var">Eq</span> 0); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">F</span> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">F</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHenv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">Eq</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span>)); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Eq'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">x</span>). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_cons_None" class="idref" href="#lookup_cons_None"><span class="id" title="lemma">lookup_cons_None</span></a> : <span class="id" title="keyword">forall</span> <a id="x:150" class="idref" href="#x:150"><span class="id" title="binder">x</span></a> <a id="env:151" class="idref" href="#env:151"><span class="id" title="binder">env</span></a> <a id="T:152" class="idref" href="#T:152"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:150"><span class="id" title="variable">x</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:151"><span class="id" title="variable">env</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:152"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> (<a class="idref" href="MailboxTypes.Environment.html#x:150"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a>1) <a class="idref" href="MailboxTypes.Environment.html#env:151"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:152"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> * <span class="id" title="var">xLookup</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">xLookup</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">PeanoNat.Nat.sub_0_r</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_cons_None'" class="idref" href="#lookup_cons_None'"><span class="id" title="lemma">lookup_cons_None'</span></a> : <span class="id" title="keyword">forall</span> <a id="x:153" class="idref" href="#x:153"><span class="id" title="binder">x</span></a> <a id="env:154" class="idref" href="#env:154"><span class="id" title="binder">env</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#x:153"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:153"><span class="id" title="variable">x</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:154"><span class="id" title="variable">env</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> (<a class="idref" href="MailboxTypes.Environment.html#x:153"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a>1) <a class="idref" href="MailboxTypes.Environment.html#env:154"><span class="id" title="variable">env</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> * <span class="id" title="var">xLookup</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">PeanoNat.Nat.sub_0_r</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="SingletonEnv_lookup_eq" class="idref" href="#SingletonEnv_lookup_eq"><span class="id" title="lemma">SingletonEnv_lookup_eq</span></a> : <span class="id" title="keyword">forall</span> <a id="env:155" class="idref" href="#env:155"><span class="id" title="binder">env</span></a> <a id="x:156" class="idref" href="#x:156"><span class="id" title="binder">x</span></a> <a id="y:157" class="idref" href="#y:157"><span class="id" title="binder">y</span></a> <a id="T:158" class="idref" href="#T:158"><span class="id" title="binder">T</span></a> <a id="T':159" class="idref" href="#T':159"><span class="id" title="binder">T'</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#SingletonEnv"><span class="id" title="definition">SingletonEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:155"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:156"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:155"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:158"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#y:157"><span class="id" title="variable">y</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:155"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T':159"><span class="id" title="variable">T'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#x:156"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Environment.html#y:157"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:158"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MailboxTypes.Environment.html#T':159"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Singleton</span> <span class="id" title="var">xLookup</span> <span class="id" title="var">yLookup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">xLookup</span> <span class="id" title="var">yLookup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Singleton</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> * <span class="id" title="var">xLookup</span> <span class="id" title="var">yLookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MailboxTypes.Environment.html#EmptyEnv_lookup"><span class="id" title="lemma">EmptyEnv_lookup</span></a> <span class="id" title="var">env</span> <span class="id" title="var">Singleton</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nLookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span>, <span class="id" title="var">y</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">generalize</span> (<span class="id" title="var">nLookup</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">F</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">F</span> <span class="id" title="tactic">in</span> <span class="id" title="var">xLookup</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">generalize</span> (<span class="id" title="var">nLookup</span> <span class="id" title="var">y</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">F</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">F</span> <span class="id" title="tactic">in</span> <span class="id" title="var">yLookup</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">xLookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">yLookup</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">yLookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> * <span class="id" title="var">xLookup</span> <span class="id" title="var">yLookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span>,<span class="id" title="var">y</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">discriminate</span> <span class="id" title="var">xLookup</span> || <span class="id" title="tactic">discriminate</span> <span class="id" title="var">yLookup</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">generalize</span> (<span class="id" title="var">IHenv</span> <span class="id" title="var">Singleton</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">xLookup</span> <span class="id" title="var">yLookup</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Eq1</span> <span class="id" title="var">Eq2</span>]; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="SingletonEnv_lookup_None" class="idref" href="#SingletonEnv_lookup_None"><span class="id" title="lemma">SingletonEnv_lookup_None</span></a> : <span class="id" title="keyword">forall</span> <a id="env:160" class="idref" href="#env:160"><span class="id" title="binder">env</span></a> <a id="x:161" class="idref" href="#x:161"><span class="id" title="binder">x</span></a> <a id="T:162" class="idref" href="#T:162"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#SingletonEnv"><span class="id" title="definition">SingletonEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:160"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#x:161"><span class="id" title="variable">x</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:160"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MailboxTypes.Environment.html#T:162"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="y:163" class="idref" href="#y:163"><span class="id" title="binder">y</span></a>, <a class="idref" href="MailboxTypes.Environment.html#x:161"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#y:163"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MailboxTypes.Environment.html#y:163"><span class="id" title="variable">y</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:160"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> * <span class="id" title="var">Single</span> <span class="id" title="var">Lookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv_lookup"><span class="id" title="lemma">EmptyEnv_lookup</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := <span class="id" title="var">x</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Single</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Single</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Lookup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">Neq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv_lookup"><span class="id" title="lemma">EmptyEnv_lookup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> ? <span class="id" title="var">Neq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">IHenv</span> (<span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a>1) <span class="id" title="var">T</span> <span class="id" title="var">Single</span> (<a class="idref" href="MailboxTypes.Environment.html#lookup_cons_None"><span class="id" title="lemma">lookup_cons_None</span></a> <span class="id" title="var">x</span> <span class="id" title="var">env</span> <span class="id" title="var">T</span> <span class="id" title="var">Lookup</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">F</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">F</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Ge</span> : 0 <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Lookup</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="EnvironmentSubtype_diff" class="idref" href="#EnvironmentSubtype_diff"><span class="id" title="definition">EnvironmentSubtype_diff</span></a> (<a id="env1:164" class="idref" href="#env1:164"><span class="id" title="binder">env1</span></a> <a id="env2:165" class="idref" href="#env2:165"><span class="id" title="binder">env2</span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a>) : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MailboxTypes.Environment.html#env1:164"><span class="id" title="variable">env1</span></a>, <a class="idref" href="MailboxTypes.Environment.html#env2:165"><span class="id" title="variable">env2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env1'</span>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env2'</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_diff:166"><span class="id" title="definition">EnvironmentSubtype_diff</span></a> <span class="id" title="var">env1'</span> <span class="id" title="var">env2'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">T</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env1'</span>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env2'</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">T</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_diff:166"><span class="id" title="definition">EnvironmentSubtype_diff</span></a> <span class="id" title="var">env1'</span> <span class="id" title="var">env2'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">T</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env1'</span>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">T'</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env2'</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_diff:166"><span class="id" title="definition">EnvironmentSubtype_diff</span></a> <span class="id" title="var">env1'</span> <span class="id" title="var">env2'</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;should&nbsp;never&nbsp;occur&nbsp;when&nbsp;env1&nbsp;≤ₑ&nbsp;env2&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;Remove?&nbsp;Do&nbsp;not&nbsp;know&nbsp;if&nbsp;this&nbsp;holds&nbsp;*)</span><br/>
<span class="comment">(*Lemma&nbsp;EnvironmentSubtype_diff_CruftEnv&nbsp;:&nbsp;forall&nbsp;env1&nbsp;env2,*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;env1&nbsp;≤ₑ&nbsp;env2&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;CruftEnv&nbsp;(EnvironmentSubtype_diff&nbsp;env1&nbsp;env2).*)</span><br/>
<span class="comment">(*Proof.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;intros&nbsp;*&nbsp;Sub;&nbsp;induction&nbsp;Sub;&nbsp;try&nbsp;(now&nbsp;constructor).*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;simpl.&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;now&nbsp;apply&nbsp;Unrestricted_implies_Cruft.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;assumption.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;admit.*)</span><br/>
<span class="comment">(*Admitted.*)</span><br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="EnvironmentSubtype_diff_Sub" class="idref" href="#EnvironmentSubtype_diff_Sub"><span class="id" title="definition">EnvironmentSubtype_diff_Sub</span></a> (<a id="env1:169" class="idref" href="#env1:169"><span class="id" title="binder">env1</span></a> <a id="env2:170" class="idref" href="#env2:170"><span class="id" title="binder">env2</span></a> : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a>) : <a class="idref" href="MailboxTypes.Environment.html#Env"><span class="id" title="definition">Env</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MailboxTypes.Environment.html#env1:169"><span class="id" title="variable">env1</span></a>, <a class="idref" href="MailboxTypes.Environment.html#env2:170"><span class="id" title="variable">env2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env1'</span>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env2'</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_diff_Sub:171"><span class="id" title="definition">EnvironmentSubtype_diff_Sub</span></a> <span class="id" title="var">env1'</span> <span class="id" title="var">env2'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">T</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env1'</span>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env2'</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_diff_Sub:171"><span class="id" title="definition">EnvironmentSubtype_diff_Sub</span></a> <span class="id" title="var">env1'</span> <span class="id" title="var">env2'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">T</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env1'</span>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">T'</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">env2'</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">T</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_diff_Sub:171"><span class="id" title="definition">EnvironmentSubtype_diff_Sub</span></a> <span class="id" title="var">env1'</span> <span class="id" title="var">env2'</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;should&nbsp;never&nbsp;occur&nbsp;when&nbsp;env1&nbsp;≤ₑ&nbsp;env2&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*Lemma&nbsp;EnvironmentSubtype_diff_Sub_Unrestricted&nbsp;:&nbsp;forall&nbsp;env1&nbsp;env2&nbsp;env2A&nbsp;env2B,*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;env1&nbsp;≤ₑ&nbsp;env2&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;env2A,,&nbsp;env2B&nbsp;~=&nbsp;env2&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;UnrestrictedEnv&nbsp;env2B&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;UnrestrictedEnv&nbsp;(EnvironmentSubtype_diff_Sub&nbsp;env1&nbsp;env2B).*)</span><br/>
<span class="comment">(*Proof.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;intros&nbsp;*&nbsp;Sub.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;revert&nbsp;env2A&nbsp;env2B.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;induction&nbsp;Sub;&nbsp;intros&nbsp;*&nbsp;Split&nbsp;Unr.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;inversion&nbsp;Split;&nbsp;subst;&nbsp;simpl;&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;inversion&nbsp;Split;&nbsp;subst;&nbsp;simpl.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;Unr;&nbsp;subst.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;I.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;now&nbsp;apply&nbsp;IHSub&nbsp;with&nbsp;(env2A&nbsp;:=&nbsp;env0).*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;inversion&nbsp;Split;&nbsp;subst;&nbsp;simpl.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;Unr;&nbsp;subst.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;assumption.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;now&nbsp;apply&nbsp;IHSub&nbsp;with&nbsp;(env2A&nbsp;:=&nbsp;env0).*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;inversion&nbsp;Split;&nbsp;subst;&nbsp;simpl;&nbsp;inversion&nbsp;Unr;&nbsp;subst.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;I.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now&nbsp;apply&nbsp;IHSub&nbsp;with&nbsp;(env2A&nbsp;:=&nbsp;env0).*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;now&nbsp;apply&nbsp;Subtype_preserves_Unrestricted&nbsp;with&nbsp;(T2&nbsp;:=&nbsp;T2).*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;now&nbsp;apply&nbsp;IHSub&nbsp;with&nbsp;(env2A&nbsp;:=&nbsp;env0).*)</span><br/>
<span class="comment">(*Qed.*)</span><br/>

<br/>
<span class="comment">(*Lemma&nbsp;EnvironmentSubtype_diff_split&nbsp;:&nbsp;forall&nbsp;env1&nbsp;env2,*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;env1&nbsp;≤ₑ&nbsp;env2&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;(EnvironmentSubtype_diff_Sub&nbsp;env1&nbsp;env2),,&nbsp;(EnvironmentSubtype_diff&nbsp;env1&nbsp;env2)&nbsp;~=&nbsp;env1.*)</span><br/>
<span class="comment">(*Proof.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;intros&nbsp;*&nbsp;Sub;&nbsp;induction&nbsp;Sub;&nbsp;simpl;&nbsp;now&nbsp;constructor.*)</span><br/>
<span class="comment">(*Qed.*)</span><br/>

<br/>
<span class="comment">(*Lemma&nbsp;EnvironmentSubtype_diff_split2&nbsp;:&nbsp;forall&nbsp;env1&nbsp;env2&nbsp;env2A&nbsp;env2B,*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;env1&nbsp;≤ₑ&nbsp;env2&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;env2A,,&nbsp;env2B&nbsp;~=&nbsp;env2&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;EnvironmentSplitN&nbsp;<span class="inlinecode"><span class="id" title="var">EnvironmentSubtype_diff_Sub</span></span> <span class="inlinecode"><span class="id" title="var">env1</span></span> <span class="inlinecode"><span class="id" title="var">env2A</span>;</span> <span class="inlinecode"><span class="id" title="var">EnvironmentSubtype_diff_Sub</span></span> <span class="inlinecode"><span class="id" title="var">env1</span></span> <span class="inlinecode"><span class="id" title="var">env2B</span>;</span> <span class="inlinecode"><span class="id" title="var">EnvironmentSubtype_diff</span></span> <span class="inlinecode"><span class="id" title="var">env1</span></span> <span class="inlinecode"><span class="id" title="var">env2</span></span>&nbsp;env1.*)</span><br/>
<span class="comment">(*Proof.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;intros&nbsp;*&nbsp;Sub.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;revert&nbsp;env2A&nbsp;env2B.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;induction&nbsp;Sub;&nbsp;intros&nbsp;*&nbsp;Split.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;inversion&nbsp;Split;&nbsp;subst;&nbsp;simpl.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;EnvSplitN&nbsp;with&nbsp;(env3&nbsp;:=&nbsp;<span class="inlinecode"></span>);&nbsp;repeat&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;inversion&nbsp;Split;&nbsp;subst;&nbsp;simpl.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHSub&nbsp;in&nbsp;H2.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H2;&nbsp;subst.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H5;&nbsp;subst.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;econstructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;assert&nbsp;(H&nbsp;:&nbsp;None&nbsp;::&nbsp;EnvironmentSubtype_diff_Sub&nbsp;env1&nbsp;env0,,*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None&nbsp;::&nbsp;EnvironmentSubtype_diff_Sub&nbsp;env1&nbsp;env3&nbsp;~=&nbsp;None&nbsp;::&nbsp;env6).*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;H.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;now&nbsp;repeat&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;econstructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;assert&nbsp;(H&nbsp;:&nbsp;None&nbsp;::&nbsp;EnvironmentSubtype_diff_Sub&nbsp;env1&nbsp;env0,,*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None&nbsp;::&nbsp;EnvironmentSubtype_diff_Sub&nbsp;env1&nbsp;env3&nbsp;~=&nbsp;None&nbsp;::&nbsp;env6).*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;H.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;inversion&nbsp;H7.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;inversion&nbsp;Split;&nbsp;subst;&nbsp;simpl.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHSub&nbsp;in&nbsp;H3.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H3;&nbsp;subst.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H6;&nbsp;subst.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;apply&nbsp;EnvSplitN&nbsp;with&nbsp;(env3&nbsp;:=&nbsp;None&nbsp;::&nbsp;env6).*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;now&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;now&nbsp;repeat&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;inversion&nbsp;H8.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;inversion&nbsp;Split;&nbsp;subst;&nbsp;simpl.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;apply&nbsp;IHSub&nbsp;in&nbsp;H3.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H3;&nbsp;subst.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H6;&nbsp;subst.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;EnvSplitN&nbsp;with&nbsp;(env3&nbsp;:=&nbsp;Some&nbsp;T1&nbsp;::&nbsp;env6).*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;now&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;now&nbsp;repeat&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;inversion&nbsp;H8.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;apply&nbsp;IHSub&nbsp;in&nbsp;H3.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H3;&nbsp;subst.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H6;&nbsp;subst.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;EnvSplitN&nbsp;with&nbsp;(env3&nbsp;:=&nbsp;Some&nbsp;T1&nbsp;::&nbsp;env6).*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;now&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;now&nbsp;repeat&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;inversion&nbsp;H8.*)</span><br/>
<span class="comment">(*Qed.*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="EnvironmentSubtype_diff_Sub_Empty" class="idref" href="#EnvironmentSubtype_diff_Sub_Empty"><span class="id" title="lemma">EnvironmentSubtype_diff_Sub_Empty</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:174" class="idref" href="#env1:174"><span class="id" title="binder">env1</span></a> <a id="env2:175" class="idref" href="#env2:175"><span class="id" title="binder">env2</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:175"><span class="id" title="variable">env2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> (<a class="idref" href="MailboxTypes.Environment.html#EnvironmentSubtype_diff_Sub"><span class="id" title="definition">EnvironmentSubtype_diff_Sub</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:174"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:175"><span class="id" title="variable">env2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">env1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env2</span>; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Empty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">env1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Empty</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">env1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHenv2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*Lemma&nbsp;EnvironmentSubtype_diff_Sub_Singleton&nbsp;:&nbsp;forall&nbsp;env1&nbsp;env2,*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;env1&nbsp;≤ₑ&nbsp;env2&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;SingletonEnv&nbsp;env2&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;SingletonEnv&nbsp;(EnvironmentSubtype_diff_Sub&nbsp;env1&nbsp;env2).*)</span><br/>
<span class="comment">(*Proof.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;intros&nbsp;*&nbsp;Sub&nbsp;Single.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;induction&nbsp;Sub;&nbsp;simpl&nbsp;in&nbsp;*.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;inversion&nbsp;Single.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;now&nbsp;apply&nbsp;IHSub.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;now&nbsp;apply&nbsp;IHSub.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;now&nbsp;apply&nbsp;EnvironmentSubtype_diff_Sub_Empty.*)</span><br/>
<span class="comment">(*Qed.*)</span><br/>

<br/>
<span class="comment">(*Lemma&nbsp;EnvironmentSubtype_diff_Sub_Singleton_Split&nbsp;:&nbsp;forall&nbsp;env1&nbsp;env2&nbsp;env2A&nbsp;env2B,*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;env1&nbsp;≤ₑ&nbsp;env2&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;env2A,,&nbsp;env2B&nbsp;~=&nbsp;env2&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;SingletonEnv&nbsp;env2A&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;SingletonEnv&nbsp;(EnvironmentSubtype_diff_Sub&nbsp;env1&nbsp;env2A).*)</span><br/>
<span class="comment">(*Proof.*)</span><br/>

<br/>
<span class="comment">(*Lemma&nbsp;EnvironmentSubtype_diff_Sub_lookup&nbsp;:&nbsp;forall&nbsp;env1&nbsp;env2&nbsp;v&nbsp;T,*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;env1&nbsp;≤ₑ&nbsp;env2&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;lookup&nbsp;v&nbsp;env2&nbsp;=&nbsp;Some&nbsp;T&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;exists&nbsp;T',&nbsp;lookup&nbsp;v&nbsp;(EnvironmentSubtype_diff_Sub&nbsp;env1&nbsp;env2)&nbsp;=&nbsp;Some&nbsp;T'.*)</span><br/>
<span class="comment">(*Proof.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;intros&nbsp;*&nbsp;Sub.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;revert&nbsp;v.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;induction&nbsp;Sub;&nbsp;simpl&nbsp;in&nbsp;*;&nbsp;intros&nbsp;*&nbsp;Lookup.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;rewrite&nbsp;lookup_nil&nbsp;in&nbsp;Lookup;&nbsp;discriminate.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;destruct&nbsp;v.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;simpl&nbsp;in&nbsp;*.&nbsp;discriminate.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;apply&nbsp;lookup_cons_None&nbsp;in&nbsp;Lookup.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHSub&nbsp;in&nbsp;Lookup.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Lookup&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">T'</span></span> <span class="inlinecode"><span class="id" title="var">Eq</span></span>.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;T'.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;lookup_cons_None'.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assumption.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lia.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;destruct&nbsp;v.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;simpl&nbsp;in&nbsp;*.&nbsp;discriminate.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;apply&nbsp;lookup_cons_None&nbsp;in&nbsp;Lookup.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHSub&nbsp;in&nbsp;Lookup.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Lookup&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">T'</span></span> <span class="inlinecode"><span class="id" title="var">Eq</span></span>.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;T'.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;lookup_cons_None'.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assumption.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lia.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;destruct&nbsp;v.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;now&nbsp;exists&nbsp;T1.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;simpl&nbsp;in&nbsp;*.&nbsp;now&nbsp;apply&nbsp;IHSub.*)</span><br/>
<span class="comment">(*Qed.*)</span><br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;Remove&nbsp;this&nbsp;if&nbsp;not&nbsp;needed&nbsp;*)</span><br/>

<br/>
<span class="comment">(*Fixpoint&nbsp;size&nbsp;(env&nbsp;:&nbsp;Env)&nbsp;:&nbsp;nat&nbsp;:=*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;match&nbsp;env&nbsp;with*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;|&nbsp;nil&nbsp;=&gt;&nbsp;0*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;|&nbsp;Some&nbsp;_&nbsp;::&nbsp;env'&nbsp;=&gt;&nbsp;S&nbsp;(size&nbsp;env')*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;|&nbsp;None&nbsp;::&nbsp;env'&nbsp;=&gt;&nbsp;size&nbsp;env'*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;end.*)</span><br/>
<span class="comment">(**)</span><br/>
<span class="comment">(*Definition&nbsp;TTest&nbsp;(x&nbsp;y&nbsp;:&nbsp;option&nbsp;TUsage)&nbsp;:=*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;match&nbsp;x&nbsp;with*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;|&nbsp;Some&nbsp;x'&nbsp;=&gt;&nbsp;match&nbsp;y&nbsp;with*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Some&nbsp;y'&nbsp;=&gt;&nbsp;x'&nbsp;≤&nbsp;y'*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;None&nbsp;=&gt;&nbsp;Unrestricted&nbsp;x'*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;|&nbsp;None&nbsp;=&gt;&nbsp;match&nbsp;y&nbsp;with*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Some&nbsp;y'&nbsp;=&gt;&nbsp;False*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;None&nbsp;=&gt;&nbsp;True*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;end.*)</span><br/>
<span class="comment">(**)</span><br/>
<span class="comment">(*Lemma&nbsp;Unrestricted_dec&nbsp;:&nbsp;forall&nbsp;T,&nbsp;{Unrestricted&nbsp;T}&nbsp;+&nbsp;{~&nbsp;Unrestricted&nbsp;T}.*)</span><br/>
<span class="comment">(*Proof.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;intros&nbsp;*.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;destruct&nbsp;T.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;left;&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;destruct&nbsp;m;&nbsp;destruct&nbsp;m;&nbsp;destruct&nbsp;u;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;(right;&nbsp;unfold&nbsp;not;&nbsp;intros&nbsp;Un;&nbsp;inversion&nbsp;Un;&nbsp;fail).*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;left;&nbsp;constructor.*)</span><br/>
<span class="comment">(*Qed.*)</span><br/>
<span class="comment">(**)</span><br/>
<span class="comment">(*Fixpoint&nbsp;get_Unrestricted&nbsp;(env&nbsp;:&nbsp;Env)&nbsp;:&nbsp;Env&nbsp;:=*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;match&nbsp;env&nbsp;with*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;|&nbsp;nil&nbsp;=&gt;&nbsp;nil*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;|&nbsp;None&nbsp;::&nbsp;env'&nbsp;=&gt;&nbsp;None&nbsp;::&nbsp;get_Unrestricted&nbsp;env'*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;|&nbsp;Some&nbsp;T&nbsp;::&nbsp;env'&nbsp;=&gt;&nbsp;if&nbsp;Unrestricted_dec&nbsp;T*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;Some&nbsp;T&nbsp;::&nbsp;get_Unrestricted&nbsp;env'*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;None&nbsp;::&nbsp;get_Unrestricted&nbsp;env'*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;end.*)</span><br/>
<span class="comment">(**)</span><br/>
<span class="comment">(**)</span><br/>
<span class="comment">(*Lemma&nbsp;EnvironmentSubtype_inv&nbsp;:&nbsp;forall&nbsp;env1&nbsp;env2,*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;env1&nbsp;≤ₑ&nbsp;env2&nbsp;-&gt;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;env1&nbsp;=&nbsp;env2&nbsp;\/&nbsp;size&nbsp;env1&nbsp;&gt;&nbsp;size&nbsp;env2&nbsp;\/&nbsp;Forall2&nbsp;TTest&nbsp;env1&nbsp;env2.*)</span><br/>
<span class="comment">(*Proof.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;intros&nbsp;*&nbsp;Sub.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;induction&nbsp;Sub.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;now&nbsp;left.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;destruct&nbsp;IHSub&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Eq</span></span> <span class="inlinecode">|</span> <span class="inlinecode">[<span class="id" title="var">Size</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">Forall</span>]</span>.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;subst.&nbsp;now&nbsp;left.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;simpl.&nbsp;right.&nbsp;now&nbsp;left.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;now&nbsp;repeat&nbsp;right.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;destruct&nbsp;IHSub&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Eq</span></span> <span class="inlinecode">|</span> <span class="inlinecode">[<span class="id" title="var">Size</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">Forall</span>]</span>.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;simpl.&nbsp;subst.&nbsp;right.&nbsp;left.&nbsp;constructor.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;simpl.&nbsp;subst.&nbsp;right.&nbsp;left.&nbsp;lia.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;simpl.&nbsp;now&nbsp;repeat&nbsp;right.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;-&nbsp;destruct&nbsp;IHSub&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Eq</span></span> <span class="inlinecode">|</span> <span class="inlinecode">[<span class="id" title="var">Size</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">Forall</span>]</span>.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;subst.&nbsp;repeat&nbsp;right.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;easy.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;Move&nbsp;to&nbsp;own&nbsp;lemma&nbsp;*)</span>*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;induction&nbsp;env2.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;easy.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;inversion&nbsp;Sub;&nbsp;subst.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;constructor.&nbsp;easy.&nbsp;now&nbsp;apply&nbsp;IHenv2.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;constructor.&nbsp;easy.&nbsp;now&nbsp;apply&nbsp;IHenv2.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;right.&nbsp;left.&nbsp;simpl.&nbsp;lia.*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;now&nbsp;repeat&nbsp;right.*)</span><br/>
<span class="comment">(*Qed.*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="create_EmptyEnv_EmptyEnv" class="idref" href="#create_EmptyEnv_EmptyEnv"><span class="id" title="lemma">create_EmptyEnv_EmptyEnv</span></a> : <span class="id" title="keyword">forall</span> <a id="env:176" class="idref" href="#env:176"><span class="id" title="binder">env</span></a>, <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> (<a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:176"><span class="id" title="variable">env</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="EmptyEnv_SubEnv_EmptyEnv" class="idref" href="#EmptyEnv_SubEnv_EmptyEnv"><span class="id" title="lemma">EmptyEnv_SubEnv_EmptyEnv</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:177" class="idref" href="#env1:177"><span class="id" title="binder">env1</span></a> <a id="env2:178" class="idref" href="#env2:178"><span class="id" title="binder">env2</span></a>, <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:177"><span class="id" title="variable">env1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:177"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#02646f3c0eda21d78eccefe79f1b4b6b"><span class="id" title="notation">≤ₑ</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:178"><span class="id" title="variable">env2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:178"><span class="id" title="variable">env2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Empty</span> <span class="id" title="var">Sub</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">Sub</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Empty</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHSub</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Empty</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Empty</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHSub2</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHSub1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="UnrestrictedEnv_EmptyEnv" class="idref" href="#UnrestrictedEnv_EmptyEnv"><span class="id" title="lemma">UnrestrictedEnv_EmptyEnv</span></a> : <span class="id" title="keyword">forall</span> <a id="env:179" class="idref" href="#env:179"><span class="id" title="binder">env</span></a>, <a class="idref" href="MailboxTypes.Environment.html#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:179"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#UnrestrictedEnv"><span class="id" title="definition">UnrestrictedEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:179"><span class="id" title="variable">env</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Empty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Empty</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHenv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="SubEnv_EmptyEnv_create_EmptyEnv" class="idref" href="#SubEnv_EmptyEnv_create_EmptyEnv"><span class="id" title="lemma">SubEnv_EmptyEnv_create_EmptyEnv</span></a> : <span class="id" title="keyword">forall</span> <a id="env:180" class="idref" href="#env:180"><span class="id" title="binder">env</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#EmptyEnv"><span class="id" title="definition">EmptyEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:180"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MailboxTypes.Environment.html#env:180"><span class="id" title="variable">env</span></a> <a class="idref" href="MailboxTypes.Environment.html#02646f3c0eda21d78eccefe79f1b4b6b"><span class="id" title="notation">≤ₑ</span></a> <a class="idref" href="MailboxTypes.Environment.html#create_EmptyEnv"><span class="id" title="definition">create_EmptyEnv</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:180"><span class="id" title="variable">env</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Empty</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Empty</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHenv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="EnvironmentSubtypeStrict_refl" class="idref" href="#EnvironmentSubtypeStrict_refl"><span class="id" title="lemma">EnvironmentSubtypeStrict_refl</span></a> : <span class="id" title="keyword">forall</span> <a id="env:181" class="idref" href="#env:181"><span class="id" title="binder">env</span></a>, <a class="idref" href="MailboxTypes.Environment.html#env:181"><span class="id" title="variable">env</span></a> <a class="idref" href="MailboxTypes.Environment.html#22c8f7a63b68a1c7f51b8c6d9a892198"><span class="id" title="notation">≼ₑ</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:181"><span class="id" title="variable">env</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">assumption</span>); <span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="EnvironmentSubtype_refl" class="idref" href="#EnvironmentSubtype_refl"><span class="id" title="lemma">EnvironmentSubtype_refl</span></a> : <span class="id" title="keyword">forall</span> <a id="env:182" class="idref" href="#env:182"><span class="id" title="binder">env</span></a>, <a class="idref" href="MailboxTypes.Environment.html#env:182"><span class="id" title="variable">env</span></a> <a class="idref" href="MailboxTypes.Environment.html#02646f3c0eda21d78eccefe79f1b4b6b"><span class="id" title="notation">≤ₑ</span></a> <a class="idref" href="MailboxTypes.Environment.html#env:182"><span class="id" title="variable">env</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">env</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Types.html#Subtype_refl"><span class="id" title="lemma">Subtype_refl</span></a> || <span class="id" title="tactic">assumption</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="EnvironmentSubtype_trans" class="idref" href="#EnvironmentSubtype_trans"><span class="id" title="lemma">EnvironmentSubtype_trans</span></a> : <span class="id" title="keyword">forall</span> <a id="env1:183" class="idref" href="#env1:183"><span class="id" title="binder">env1</span></a> <a id="env2:184" class="idref" href="#env2:184"><span class="id" title="binder">env2</span></a> <a id="env3:185" class="idref" href="#env3:185"><span class="id" title="binder">env3</span></a>, <a class="idref" href="MailboxTypes.Environment.html#env1:183"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#02646f3c0eda21d78eccefe79f1b4b6b"><span class="id" title="notation">≤ₑ</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:184"><span class="id" title="variable">env2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#env2:184"><span class="id" title="variable">env2</span></a> <a class="idref" href="MailboxTypes.Environment.html#02646f3c0eda21d78eccefe79f1b4b6b"><span class="id" title="notation">≤ₑ</span></a> <a class="idref" href="MailboxTypes.Environment.html#env3:185"><span class="id" title="variable">env3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="MailboxTypes.Environment.html#env1:183"><span class="id" title="variable">env1</span></a> <a class="idref" href="MailboxTypes.Environment.html#02646f3c0eda21d78eccefe79f1b4b6b"><span class="id" title="notation">≤ₑ</span></a> <a class="idref" href="MailboxTypes.Environment.html#env3:185"><span class="id" title="variable">env3</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MailboxTypes.Environment.html#EnvSubtypeTrans"><span class="id" title="constructor">EnvSubtypeTrans</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MailboxTypes.Environment.html#environment_properties"><span class="id" title="section">environment_properties</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
